<!DOCTYPE html>
<!-- Created with https://packager.turbowarp.org/ -->
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <!-- We only include this to explicitly loosen the CSP of various packager environments. It does not provide any security. -->
  <meta http-equiv="Content-Security-Policy" content="default-src * 'self' 'unsafe-inline' 'unsafe-eval' data: blob:">
  <title>ScocialHouse Profile Page Editor</title>
  <style>
    body {
      color: #ffffff;
      font-family: sans-serif;
      overflow: hidden;
      margin: 0;
      padding: 0;
    }
    :root, body.is-fullscreen {
      background-color: #ffffff;
    }
    [hidden] {
      display: none !important;
    }
    h1 {
      font-weight: normal;
    }
    a {
      color: inherit;
      text-decoration: underline;
      cursor: pointer;
    }

    #app, #loading, #error, #launch {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }
    .screen {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      cursor: default;
      user-select: none;
      -webkit-user-select: none;
      background-color: #ffffff;
    }
    #launch {
      background-color: rgba(0, 0, 0, 0.7);
      cursor: pointer;
    }
    .green-flag {
      width: 80px;
      height: 80px;
      padding: 16px;
      border-radius: 100%;
      background: rgba(255, 255, 255, 0.75);
      border: 3px solid hsla(0, 100%, 100%, 1);
      display: flex;
      justify-content: center;
      align-items: center;
      box-sizing: border-box;
    }
    #loading {
      
    }
    .progress-bar-outer {
      border: 1px solid currentColor;
      height: 10px;
      width: 200px;
      max-width: 200px;
    }
    .progress-bar-inner {
      height: 100%;
      width: 0;
      background-color: currentColor;
    }
    .loading-text, noscript {
      font-weight: normal;
      font-size: 36px;
      margin: 0 0 16px;
    }
    .loading-image {
      margin: 0 0 16px;
    }
    #error-message, #error-stack {
      font-family: monospace;
      max-width: 600px;
      white-space: pre-wrap;
      user-select: text;
      -webkit-user-select: text;
    }
    #error-stack {
      text-align: left;
      max-height: 200px;
      overflow: auto;
    }
    .control-button {
      width: 2rem;
      height: 2rem;
      padding: 0.375rem;
      margin-top: 0.5rem;
      margin-bottom: 0.5rem;
      user-select: none;
      -webkit-user-select: none;
      cursor: pointer;
      border: 0;
      border-radius: 4px;
    }
    .control-button:hover {
      background: #ffffff26;
    }
    .control-button.active {
      background: #ffffff59;
    }
    .fullscreen-button {
      background: white !important;
    }
    .standalone-fullscreen-button {
      position: absolute;
      top: 0;
      right: 0;
      background-color: rgba(0, 0, 0, 0.5);
      border-radius: 0 0 0 4px;
      padding: 4px;
      cursor: pointer;
    }
    .sc-canvas {
      cursor: auto;
    }
    .sc-monitor-root[opcode^="data_"] .sc-monitor-value-color {
      background-color: #ffffff;
    }
    .sc-monitor-row-value-outer {
      background-color: #0040ff;
    }
    .sc-monitor-row-value-editing .sc-monitor-row-value-outer {
      background-color: #0039e5;
    }
    
  </style>
  <meta name="theme-color" content="#ffffff">
  
</head>
<body>
  <div id="app"></div>

  <div id="launch" class="screen" hidden title="Click to start">
    <div class="green-flag">
      <svg viewBox="0 0 16.63 17.5" width="42" height="44">
        <defs><style>.cls-1,.cls-2{fill:#4cbf56;stroke:#45993d;stroke-linecap:round;stroke-linejoin:round;}.cls-2{stroke-width:1.5px;}</style></defs>
        <path class="cls-1" d="M.75,2A6.44,6.44,0,0,1,8.44,2h0a6.44,6.44,0,0,0,7.69,0V12.4a6.44,6.44,0,0,1-7.69,0h0a6.44,6.44,0,0,0-7.69,0"/>
        <line class="cls-2" x1="0.75" y1="16.75" x2="0.75" y2="0.75"/>
      </svg>
    </div>
  </div>

  <div id="loading" class="screen">
    <noscript>Enable JavaScript</noscript>
    
    
    <div class="progress-bar-outer"><div class="progress-bar-inner" id="loading-inner"></div></div>
  </div>

  <div id="error" class="screen" hidden>
    <h1>Error</h1>
    <details>
      <summary id="error-message"></summary>
      <p id="error-stack"></p>
    </details>
  </div>

  <script src="script.js"></script>
  <script>
    const appElement = document.getElementById('app');
    const launchScreen = document.getElementById('launch');
    const loadingScreen = document.getElementById('loading');
    const loadingInner = document.getElementById('loading-inner');
    const errorScreen = document.getElementById('error');
    const errorScreenMessage = document.getElementById('error-message');
    const errorScreenStack = document.getElementById('error-stack');

    const handleError = (error) => {
      console.error(error);
      if (!errorScreen.hidden) return;
      errorScreen.hidden = false;
      errorScreenMessage.textContent = '' + error;
      let debug = error && error.stack || 'no stack';
      debug += '\nUser agent: ' + navigator.userAgent;
      errorScreenStack.textContent = debug;
    };
    const setProgress = (progress) => {
      if (loadingInner) loadingInner.style.width = progress * 100 + '%';
    };
    const interpolate = (a, b, t) => a + t * (b - a);

    try {
      setProgress(0.1);

      const scaffolding = new Scaffolding.Scaffolding();
      scaffolding.width = 640;
      scaffolding.height = 287;
      scaffolding.resizeMode = "stretch";
      scaffolding.editableLists = true;
      scaffolding.usePackagedRuntime = true;
      scaffolding.setup();
      scaffolding.appendTo(appElement);

      const vm = scaffolding.vm;
      window.scaffolding = scaffolding;
      window.vm = scaffolding.vm;
      window.Scratch = {
        vm,
        renderer: vm.renderer,
        audioEngine: vm.runtime.audioEngine,
        bitmapAdapter: vm.runtime.v2BitmapAdapter,
        videoProvider: vm.runtime.ioDevices.video.provider
      };

      scaffolding.setUsername("player####".replace(/#/g, () => Math.floor(Math.random() * 10)));
      scaffolding.setAccentColor("#ffffff");

      scaffolding.addCloudProvider(new Scaffolding.Cloud.WebSocketProvider(["wss://clouddata.turbowarp.org","wss://clouddata.turbowarp.xyz"], "p4-@ScocialHouse Profile Page Editor.sb3"));

      vm.setTurboMode(true);
      if (vm.setInterpolation) vm.setInterpolation(true);
      if (vm.setFramerate) vm.setFramerate(67);
      if (vm.renderer.setUseHighQualityRender) vm.renderer.setUseHighQualityRender(true);
      if (vm.setRuntimeOptions) vm.setRuntimeOptions({
        fencing: false,
        miscLimits: false,
        maxClones: 9999999999,
      });
      if (vm.setCompilerOptions) vm.setCompilerOptions({
        enabled: true,
        warpTimer: false
      });

      if (typeof ScaffoldingAddons !== 'undefined') {
        ScaffoldingAddons.run(scaffolding, {"gamepad":true,"pointerlock":false,"specialCloudBehaviors":false,"unsafeCloudBehaviors":false,"pause":false});
      }

      scaffolding.setExtensionSecurityManager({
        getSandboxMode: 'unsandboxed',
        canLoadExtensionFromProject: (url) => {
          handleError(new Error('Missing custom extension: ' + url));
          return Promise.resolve(false);
        }
      });
      for (const extension of ["data:text/javascript;,(function(Scratch)%20%7B%20(function%20(Scratch)%20%7B%0A%20%20'use%20strict'%3B%0A%0A%20%20const%20menuIconURI%20%3D%20'data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAYAAAA%2Bs9J6AAAABmJLR0QA%2FwD%2FAP%2BgvaeTAAAhkklEQVR42u1dd3RU15mfOLubsn9t4iTreM%2FZc3Y3PSfNm42d%2BGSzWduJU5zECYnjOA44BlGCbWxMM2AZjBGYYooNQgiQ6KILRBMCRC%2Bm944pKqOOumaku99v3oiVhSTuff2%2B%2Bb5zfh4jjea9d%2B%2F3m3vvV0MhFs9FhMRHZvQW96f2Eg%2FPTBLP0OurhHGE9Fk9xWp63Uk4TbhEKCCUxxEliPhr688K4u%2FD%2B3fG%2Fz4dn0f%2FPxCfT9f6Aa6H6%2FLosySUzO0uPp72vHiAiNCDSDGJsIlwntAQJ5PbwHXP4T6IoBMJ3en%2Fv4P75Nli0V6yuomPEtm%2BSYrdl14XxFemiEdkU0Ukfr%2Fzcf%2F0xfENPA%2FPKovvSUfK%2BiAp7cj4ClelCeFkUUVfJhvpdQThe8nJ4h6edRbPhZTxXkI3Qmr8LCYSCKWErNQk0Sv9OfF51gYW1wQKR8r3Aq14u%2Bi1JcGI1xmaYQSilbI%2Fvd7HWsJiu8zpIT6DsxEpWH5c4Zh4XRCSxmobvfbBToG1h8W04MxDyvQIKVImoY7JZQqN2LLSCvlLNuywSMu7fcU%2Fk%2BIMi%2FvamEj24SJ9qQ3F%2BLKWsXQo9G39BVKUKbzqubI6ZlKwwNdZ61haLZyIUlnLRhb3AeMWtqocuZO4K9%2FPSBEOMhl8gQM0Hz9lrUyglY%2BwnRXffyAi7sXKyFoaUEE0C5NPG2xFVA5rbUAk7lxPZf%2BedsAZPWv2X8W%2FshZrKpMGiE%2FQ1mYwTeQtVmitUUtIxnyyVmskZHX7BU3cB6zAgcIVGNNYu30u5Hv6bDzChZU2uMjCPLO2%2B9PqiWyGElbShEA5sjfYv%2BgTiYeZbWDFTEhnfw6HwXl%2F9vsJTUYhK2RCI0x68ASzwQPLZzzOk0PNGK3IzPyz%2BEdmhzur39dowM%2Bw0jE6wCkKyvgKs8RBIRP1rwJYu4VhL6phpGO22CxICKUVMIW3nwyFaBscV%2F6e2WOP6%2BHeeLkEVi6GakB43vR%2B4tPMImsE%2FPd4cVpWKobpjP73%2BogvMZvMnf8egvmZlYhhA8pIn37IrFIj4O%2B4zATDgZL%2FTzO75LagA9gAE1zM7ivE4mFCrBhjYOlIinzp7arB5gVmWdcr4GBW1GBh4VAhdswX4sxOIUqvCdHcLO6QSJMQxZeFOJEnxLJkV8LdUphtHRPwDVbaYGDuC0JszxCi4BwxrEWoCb3%2F%2BikhVqUwEV0TRMLToExj5dUfCwYZq1mkUViWFloxD%2BUIkdbbUSJO5UwM4ww4gRVY8y3nkDj5moTtcvmws0TEApDoBBzLSqwv5vQX4shGOudFhKNy4YDjxptJiUrAEazImiJJiLx0IWorhGuyf5XjzzUsEd0QrMwaYukIIQovCNcF58xFQx1%2FvsRwX9Bh%2BPdcflDDLPYkw9UQaRCeybUTrvgRnw76Cojq1%2FWs1Hph8WvkbjgvfCHLRzv%2BvPW0UHw%2FyMHYHAuqGXYutN%2Fq2VDXIm6cbxI3zjWJ%2Bho1RyKssC48dykR8YuBS0ciXGCl1sjh%2FhK5Bw7ZR7wPTjWKNVMrxeTnwuK1xwrEsEcNjHi8UGxKvyVaJLlYVezaGJwPTBoUdbz9O84H1AurKVrlVql14kUjLWL%2FuloxqUf4Nuk6Q15mtfTnzh%2FkXj4i9DcIhpiJrNj6YE9Wx%2FGdSpbMphaxZ1WNGPfH4ruSrxUjf14o6qvlLrx2kqtlFVN0J%2BBvOCNCD6T%2FzXCKW5Wz%2BxvExO5hafK1xZm99VLXQFyqy6Uyuul6DvwyF2XSxPpJqUVl162Rr%2BxmVGQOLzNFvlbsXlEjda29y9wvHkVb06%2FqRsBPcllCPZDzDlkra8yTDwYVkOf1XxRaIiCwbaHcudCF6JmOcFKrzlB0wzNZwfVwP1g5%2F5XeiIjUAaWWydeKHVly3wb7V3pWdn%2BqLufAx%2Fkc6PPoFwqGPrHF2vZzX3atLatfW7y%2FsVbq2jsWeFdKEW33fE3AeGuyIlZ0f2c%2BfHDMPPnqyIK5cFS5reRrxeWjcomIuTO97X3h2yY08eRc7o7kY8wfaJSYsOJwH%2F9MsSMEBG6Vye2NV47xfCzX%2BXUb2p0V3d8W0KqweQLuIuPL8J8WOEbAFPIpygrKZ3i%2Bpe8p%2FuTHsDSOC%2FUplo%2Bi3L9Kc%2BRramgRS8dWOEa%2BVmCLKyM1Fb4Z11JfdQymG1rCyu5PrBorKEjaHAErw1Hxbr8SxwkIIMJGttyFj8Y30xcEJCfmz1jZ%2FYmN081nQFw60ihGP1nkCgGBkutyNTL2r%2FCZpdlra2m8WecHrPD%2Bw7a55n2ABzfUUnZDgWsEnPCs%2FHlwzdu%2BG%2BtLc7uLj3u5DX2dFd5%2F2L1ESKcGtY9%2BQTaDW%2BRrxca0W3LnUwotTevjQ79rTzHUK5%2Fg%2FXQDNaz0%2FirAhOpnZg0wC98od52AwPWzcnvmK0d9O%2FbV6c%2BJz3uxCi5kxfcXAU9uM%2B%2BAT32p1BMCYisqu2rvXODf8SfbyFxXCUh9wR%2Fk0DR%2FEfDEVnMEhIN8Wu8STwiokswLorqVzGsSzbQt%2Fa6bjnnOlPcTAfPMEbC8MCom%2FiXsGQFR5qKsICp1rzfPajEfuW4R8BFWfv%2FA7Bmw6EpEpDxV7BkBgfRBZdL3i4wPHeaDbCU%2FcsMvuIOV3x84nmuyvwMFSr%2Fxq0JPCQgc21Yndb8os5%2FxiiYZKj3FLnbMJ8oKuN4cAU%2Fvqbc9BckMxv6hKFYISsMoGRkjzaPOWUSTxPtMAO9x2CQBD2%2BuczQIWwVbF8hXV9swTbs52ufUKvgoE8B7HDV5BkQWRNt6n14CtUary%2BXCedB0Jq23fvPkyNmQSLiRSeAtDq01R0DUgPED%2BVqxfLx8O6dD6%2FScK%2BLLWrujY77OfkHv68GYailGxXf9sgK2uiWKr8oFazdHje6%2Fms5Zi60V2hANwETwDpveM9pHq8qBHH8REJg%2Fslz6%2Fi8e0H7u0mwhIOpp0Ic1MBm8AapNRyPBICBw9aR8Q%2FvV47Sfv3qKLvucHTGiw5gM3gC1VJrq1QmISmh%2BJCDKI8pK%2BGow5pB2kYPtKN7E3ZS8qAkznAKrq0zkAq73JwGBi4flO4xunhmYubwEHrFbQreqaIPMdUXy6xYUmPWy%2FANVFhu1UQM0p%2F9jZSuaxaRwF%2BgLaKYvxOHcOt8SUKWmaKy47%2FyAFVvuKRaZIuCcHuIz9AGNTAz3kNbXXFtqdEJysxyFKmYPlF8FURVudr%2FAzW29qYaj9If9mBju4uwucwV5%2FRAL2qVF9IT8Koj%2BiAFNOevF2RI%2BB5RPVeD0drMimhlkjihXWgXRJzGI84uuv6qr4H3IFGZyuIOcyeqV0apKoo6WpLcDw39SEMtblA6vWxzoeQaf7lNJ3H2RyeEOlo4QorFWjYC1Vc1i8l%2FDviYgsGJCpdoq2C%2FYc0286quyEu5hgrhgCaWeCuUF6lXRZr5Y6nsCogd9RXFU%2Brl2LkqIOc%2BXLeL0Od6KumAJJT%2FY9VNqBET42rxhZb4nILBhlnykQTUZT2f3TYh5B6%2FulTHIPMskcR5mmnSunFSpBQHH%2FK5I1FfLH3K3zkmceSd%2B%2FVFmK7qYSeJwifo56gREwxQdCAggfUq65TYFJsxKSpy5p3NhRpcEzOomPkpvLGWiOIclI9SDsi8eavBNWYq7YVpSiZKld%2F2UhNOBcHKyuKerrehDTBTngEiQUsWQNNQGffN3RdqsgirhaQXnEtQe8Lx4oCvXxEgmi3M4s1ONgDhXTX4urA0BZRt9GiW16Yz7VmLqQZcNZOiXm5ksziAvXY2A2NLpYgkFEDqHVVtWLuxLXF0gnuV0dR6sZMI4kxvYqHgOzJlRpQ0BYyUMF8qXMIzQjnXhkITWiYoOz4XEzm8xYfxxDkR9UJ0IOLF7mDoCyzdEPLiG9QLF0zhrwiWotitDUHbyLwu1IuH59xuUHPNBD0%2BTRFJHltEFPDA2F2maYBgg5LdpLTETv04EXDS6XOlLJjeV9SKOzI5WwjM8MPYhvT8yHRQjYiZWakXAN54oFJUl8sYYJCynJrFuxHHyQwScNEB8gn4Y5YGxMSxNsWnnkS16nQMBRPFIW3uJq8uSWS%2FaIDK1v%2FhY263of%2FKg2IcVb6oV6y29EfFFqzIVzOivFhlzdBPrRQeuim%2B1tYw%2Bx4Ni08DSdqv4kto5cHofvc6BI39WKF3KHlJDx8Y5%2FVk3OgjmfrbteXAyD4o9yM9U24aue69Ku21o3vxqNWPMTNaLTkj4dlsSbuJBsQ5826sU7EWRJj%2BXKewIU3qFpZt7QpAzybrRKda3JSFX2bYB7yu0LkOG%2FMS%2FhLUiIDI5bpxrUoqMWfwa60UXOBMjIMJnUrnhi2VkvqKWorQx7ZZ229AtGbeUtqF7l7Ne3K0eaaxEPqVV%2FAsPhnUc2ySvnOFrkVi3Wp0ICOORSncoNHQJWCl7R4CuZ9iKPsyDYb10vcoqmD64TDtraNHliJJPcPko1gtJ48xD8BE%2Bw4NhDQdWyRPwzN567bah%2BUvUrKGHclgnlGrOoH8aD4a1qmm1ki3Y4dye0lMvYwx6Cqo45SsKA9lLwkmH%2FUBsR8fzYJjHhunBTVEa9ZsiUVEkHxsKsq56i3VCEWNBwnQeCPO4ckSymgO51t55Xq9V8NjWOt6GOr8dnYWQtdU8GOYNMs2SC8Xp3XqdBVVK2LeWLkzryzphAitAwl08EOawZZa8kqJHny4EnNQjTOU45KNimiNsDbVUGp%2F%2Bc5oHwhzO75VT0rKbUW3C01CwqeBik9IqeGA164KlvEL6z1UeCHOolkwqR6SJLqvgwQ1qLaIKLxoWYtYH07gEEhbwQJgwLfeW7yk4rbceqUrL365QIiBaui0cyrpgETdAwjIeCHXMe0k%2BUBsRJzpkR%2BBeVQRnYtYFyygBCat5IMwl78quhKikfXx7nVg2rsKXJe3hDyy5HlEi4NndrAM2oQokbOSBMIeqsHp3Jbg0Tu6sF7NfLfWFsQbpSSolCyGVxZwpbyMaQEJuCGoSp3cISxL%2BICKWja%2FwlIx716gZYqJkOF0%2BmufeRjTzSmilrugkYYsUXGoSc4e4n1mRPa1S%2BV7zMxysTEDtwzfNMBqo3jgN145RNhKv%2BDd%2Bjt%2FjfUFbCflMaAEw0dsliKp56%2FfunBlB%2Buao2v2dc%2BgcuGS40bEqItlVDe%2FD%2B%2FF3QTkTsnXUApa%2BTkrRZB8RYcTJSqlwPCJGpZ11LODgBuVB%2Fs3esUO2xbHNQvnLoO35Gn%2BvedZGCfsJbcCO%2BWrl7qVKQ9BZzYmz4pu%2FLRKlN9UsoegoZfeqs2ioQWw7BJ%2BzSF9%2F5Q2OmLEJ2%2BYJpbw7GTmRX2%2BrjxGNZlDhTUVQxHj9VHvHKot2D7WV9o4VPg%2Bfq2vEzCkmkT2A1RD9FuyUi4cbbOnShJo2qq4IyO6l9o7R%2FEEU7lcmHBF8Lj5fx9jRnUwgAxlUMW0dWTy3zqHtYBb1h9jYBusNhUQh29UpXVvokNiKs4pqQ5jO5BQZbKxsTeELPLmjXt1QlG9%2FgMONM8JRwZegZgWmtoOEqxKVdKiJuWsxFeE9pr49QpJueQFZDPcY4VtzX%2BjccIMsA6vf%2FjuyakyugAWxba2qgCxpfRw4O7sguI5Gergc%2BYSzE2q1e1mIPbTKld%2B0d%2BJRDvDaCfJjvdfxNzF%2BBh9X2XXz11g%2BvkJ5C4pVVFUqi4zYWDvHHZbV2ip3SIjr2G3JdRCpIGFKIpBv0TAj3jEacV4JbpUa29mOOtJiS7Z9nlq5%2FFZpqG0R4%2F5YLBcP%2ButCcfGQ%2BhmwgbqdLRlh%2F%2FjDya8iCCbH%2FWMVx6tqcPn2DG10cwy2o68GvTI2zjZmfVGWDAWUb7htrkG8jlbkS4fUP%2FPs%2Foa7EnD8n4qV6oS2zZBHFJAT8yBrsMI2P39pdexLpP2XCn7eIsnFWENSPWrMvBzcuqNJBgEaaoTnUny589UFW2NVH%2BPSsZ1vS1FGo7pc3VcCV0SuQ6lJc1%2BUd9%2Bsmtx1t2L8XrbyG66rRd3RIFbgxipz7aTwlSDUauci0WG7aFhjWxSIWFYQjRlc2ltAN8%2B9Zc5XidXHQWNG9gR7i2GdljznZr%2BtQd3a58WDoRm9xf1BIiC65FaXCt%2FK%2BX0dVyVD8xQVQTW0VqWcllSi1C3pjugchxu3yFpFZdsD4H1BsZLGelEEqSsTLJN2xnE6JTfPdWx9PLdXbTVEDOj7G2stReq40Tlp%2F0q5e2l%2FDuzK6CQj%2B1f4XmfrYl2Z4v0Jzweh%2FKAXxhezUnrNqFva%2FuxUU%2B7SDdAWdPcSd%2Bbm%2FWy5W1Jxv8gIrutzvT19u0koHQ43ak3ANMOwYIdUFEfF2X0NYs%2BqGpFLZ6yNsw3kZVaLg%2BtrxaWjjTFXgR1SdOnODPWN7zrPP6ycbm7VZJun2k7Ctb7vQ5Fzm4T0j4m6EhAhZFELW1AYRM4daBArJ1WKFEkfHELI0K8PxER2vBW5fvJO5z7I6ZQ0ketww1R354hJ2CnGtSVhdx0JiHJ7dVVmlbFF7FpeE%2FOpWQmMBiHTB5WJCyYc461yuF0Ph5wpzhCwhioarvCgNAWTsFP3xDNte9Z%2FR8dg6zKToWdH8%2BpEylPF9merDy1TrlrWej5Dd6e2z2d3oDM%2BD4ELXswVk7BTEn7zNgmn9hcfox9GdCEgzk3VJgwYNZXNIuO1MsfLyCMht0Xx2Ih4x7YW02VvGBEslu0vdP47tM6ZzAJEAq0aSxbWZRTJs0uIq0eNWjDtIZtNYjcJcd2O7gf3ifvFfeP%2BO4pocgER8C7UVpzuSbFgsOGsRp0SDET4ihFahCyEg6sN98Li4R370GA1xGDtX2VYFU25BS40Wd56qlazjkbUmHhmx4efO2%2B2sJSxjyD1VSn2zyVy9pDaVWdzQLbdJJQVPMeRDa7nIp4ItRdaGhc4cm4j8l0%2BrGa9bKg1vsWA%2BlvWB%2FnKiUbxxhPuV8GeN6yM%2FJYtStvS1e1Ig9C7iFoyvIjQ8fRgtv2typDaBLN%2FpEE4Il6RsG1UE7awdqdwdWIZzbiDhPSLPnZfKC%2FN6FfgpVw73WRLZrpZLEguV3KmY5fQUTmI66flArBPbaNv9IEOfJkOod3LVWfnymsStkrJVRd6bCSJXneQkGLYvmHnRQ5mC88FPj%2B3Sgh2BfgZVWTN%2BM7LZxzPNZKJW90yCFCH0uyjyJd5A5xRmFhNmArn58svJIyd0el5s5IdNcp89Q4SxsPXKu24wNZ0YXv1MVVprGuJxVT6odcD3Bhn9snv4T44Lp8o67gbaLB7UTx%2BImGrSwfP78C4loNvoY7EjsgZRIDUe5w%2BBB8gfHd%2BarqCQADZSBucnxf4oGAR%2Bg46GTjgdxJCYEC0%2B4xIPFsb6kzoDSOsXgAZ5V4KculmDfBna%2BqcGfLmxAOrvCfhvuXuzp0fSQjZZ38g%2BJCuSPg9SxWV%2B7pzduhMLh1pFGP%2FUOTrVtRVpXJR5ghE8DQYYgC29ExC42hjjIddY0vpg9%2FulITxc2HY7Iej1J8XgiiVRaPKtegLv2GW5GrY4u2WFD5Z1Rjc0huRWIA7asKYgco4mr3G1ZONMX1RDabYb9%2FOpPB2%2BlJnQv6LRWYvsD3DPeLB%2F3Zmb32s1AOyynXpCQ9rrWyxKVT19oqEqLgmS7592bVi3NPF2swBgPvFfcuSET0ZbRrbeaG7CZHwz2YvcCxX7oFO7aqnjOISseD18lhJhuPb60XBxSaq%2Fdnc6USXF0Zj2Q67VtTEiCebAOpHoFiTjHjVDRd9J2SlbYa%2FjsD9y4odVeiIX0%2FdlYS0X%2F2s2cahsk0zu5o4nJvQtGTCs8UxoL30yJ8Xaj3R7bH2XbktKZzjXpAQNW9k5PDmukDMx6HNcodfjIvFsY1O7yc%2BHZIRs6Xxj0uuhOvIShgkUqliSk%2B5PtsIo%2FIiuBhxoTKC5wjCfLzzvNx8IL7U4thuDckK%2BTH6m7nIIcmUFaQSJTIJUSlNNrh7oQctv2R2NHXU3zBIc1J36%2B6xhad3WPYP9pYmISpAYek0U2ZCLm2nWStjihMovipnnVkxxn0SItPlroaKcDRQ84EQx7sJMn6sbEVx1AupCB0gt5lpsCIrmcPLEpqE8GnKSM477pPwRN7d7wsW3uQngnFWR4C%2FzM7kxFZLBpnNIVUxlVWRJN%2F044KiXyhokG1VlpvqPglla6AuG1cRiLlAe3IZsVge8nkzJLzXTD3SU9vlV8O0gaUJS0LZdmWbZ7pPwpzJklkqRVEx%2BjdFWs8D7h%2FP4fCupH72X8WnQmaEDpJLVS%2B4dqI8CdG6OVFJKNuyDKU83CYhuknJFlFG5W83KxbY7bC%2FflbuQZE6ZjZrBQnzIbNC%2B9hHzGxJZaMtIIvfLE9IEl4%2BJncmXD%2FFG18hqiFIx1bWt4j962rFotHlsRL1ZqEyflaug%2Fvcv7Y2lu4mK1cOW4oV%2FZFpEiLGjT7kgupFUdlZVmDq1i3kyQ6US26Blo%2FyhoRoG%2B62%2BDWAO%2Bbbnmx6LC%2FeNVZUYjUcqryd6a%2FWlRXhaDoEX9uZTSFbst%2FujrkqcLq%2FvC4kLDhnaRwHhaxK3GeobKBBZTUVyUmgKBrkO8pt87xNZ0LZRTc6G%2FuZhHj%2BZeZ3I%2FXKvsEuLKXpZipzVRXLPyyKISWK7zB3nlzNmUIfdJtVOVoEkYS7l1rsR2%2BX0Id92UxQN3xcasmTLbEeD0EnYcElOYvcsU3%2BKLYs47wPIgmtOOcJLVQ87SshOwUdZMzcjGpf9ltlzdqavO0M3vbKR9iZxVu2lH1QSIgvHovB82tCdgux%2Bsem%2BpW%2FpF6yHpbDCX8JJhHRXk1qex711ijT2c6moTbYJMTz5c6ypZjTD0NOCH34AdMRGIrlBCpLomLyc%2BFAEXD8M8WUniQ3ENdO%2BLcRz8mt1trR%2BZGEeJ6T24zns2Gc9oScEmL3T83emGyuYVtBA5cgnRGPbZWvnJSf4fOuWAMMowUqhttVFt9tEuK%2Bcf94DjsLORFP%2FjfkpNBF8s3WsMS3u6rUkzPfbzVEzfalkK1ngtYB7Tv4%2BrrjLJ2dFg8TYuUYw6ndHuf3ekNCXLej%2B8F94n4dSpjeGXJazJ4NY4WBXzDXVQnnI539iGOoRAcMTrLiF6so9yc0lbL03yE3BGn6plukDTJfVh2ZB7pF7Y94vFBcOS7fVglNXbzIpmcS2kLAzSG3JF4kuMXszSIesrHeHBGRAa1LCtTwnxTESnmoyPEtwSJgApGwmXaJD4TcFLpoppWbRtPPBpM9K3C2OrihVox%2B0r%2BrIsp3HN6sRkCMh1OdlZiEjiM95LZQTNz9dOFqS7GJo9QCve%2BwnlY0izVTK2OFk%2FxEwFG0ZUblAFXZsSB4BIy1yVsj9%2FyydYfwPhnBdV16xluE%2B0JeCJlih9tRaLa6zJqpGWXNl4ypiG3%2FvCZgKgVny2ZqfyjB%2BbgRmRJEEu6RbBIkG6CB98nInqWuPeOgkFcyaYD4BN3AFTu6wKokAncmZQVRkT2t0pMCRGO6FcWiYVpM9GWso3juzIHBJKBKDLGsBVy2u5VL9XkuTu0vPhbyUsgi9Lgtzt%2BXhbh51h6nLzK9UVUZBhynV0dUCUdpflzTjMD9kj0huAQElr4uHzcMd45d7h5c14XneyzkB7HSRKa9Qx%2FWQTsF%2FS1goUT%2FCoSN2RKE3SsscmZWxUpUtFjsSJyfGWwC3q7CJ9kyDzVfOmtxjp%2FL1oSprXR%2Be096nxHyi8Qrs4Xt3L44FSiMJqJoXb1zWY3Inl4Vy2FEcxpkN2BVQ6mNST3CsZ%2FNHVIW65uxdWF1jMgoTIW%2Ft0sOrE4AArZW4ctX2J5TlFTe%2FGoxo39JbE7win%2Fj57KC6zn8TCVzeojPhPwkZKR51u5e6SgrEFQ5mJ04BGz1DbspLtTmeTrkRzGbc9jVNmbHfPOOfT8K%2BtEjWz2RCNiKK0fcGWMrldEkkR3yq8TbqhXa%2FdDzB6knB%2FtREJjtVQlDPwDuqEijs2OMz8d1HHyOYtRdCvlZ4ulOLU4MwJq3hSi%2BrCcBC84brphEJWArsLNxUvD5Dt5%2FC%2B32fhHSQYiI7zppaculsg%2Bl1zVZ%2FWgrvXcZWdJ6MwFVOzqryqltzt436fU7IV0k7sQ%2F5bTZO2eK%2B7Uxpf1%2FzUa76%2FmvMuncqFljQ02Yu%2BH43O7i4yGd5L0%2B4kt041VuTGpWspGDZyUO1bYyCZSKdGaH0SaOCdc1ts0Vosmi0Q1%2Fj89xOjbU9sppLm5Lf%2BXU%2BbAzZ%2F%2BGaUZHVbM5i%2BZMntRf%2FooQuxYHMwvCSeCcfGGfUA56wPvxdy6cs3EO%2FG1IZ6GHGOelbwo95WBZtRok3l4Q6wol2J5hWG%2BZUNaAchNH1lOlvZtdjzt%2Bj%2Ffh%2FS7d25sh3SU5WdxDK%2BJGP0w0gqRR%2BS2fLGiHaSIv7DcK%2FYSvUvA3TW5ViVGesYIIVnLV%2BB18WzhvICIfbcpQGj6DVztni0i9bLTYQ%2BlBWDvxin%2Fj5y7fy5asbuKjoSDI9H7i0%2FRA51nBGBrhrOnGnj421PwbHJ08uQwNUEK7ty%2BEgigUUfNf9IC1PMkMH6OOCPhQKMhCD9nNTHMZBsONYk1EwCdDiSD0sC%2FwhDN8iH6hRBJ64Nd40hk%2BwpBQIgot%2FW%2Fx5DM8L%2BPfU4wOJbLQIExgRWB4iGmhRBcREh%2Bhb6KprAwMt4GsCOhfiOX21nQwKwbDxS1oCrOOicjwjoAjmW13d1%2BwH5HhiB8w4dwQFlbEJxG5wErDsBENtAI%2BxexSEEqifJBjTRk2oZTwMLPKfND3GVYihgVcoBXwi8wm62lQW1iZGCYMMJsDl47klSCxkgY1mQ02DIWSFCmBScj1mcHmlzTAFaxkjK6KMmlfE0YDF8aXCSdZ2RgdlSXk859LgvqP2G7w9pTRuv0kpBI%2Byexwf3v6KA18ASthQqNYm9L0AfYnfo4mYh0rY0IiG02ImAX%2BOSuibEaYFTMhUE6l9Hux1vvTuf9P8bMBK2pwkeW7DrksHZ4V0Z7tEitsoHCR8Bhrt14O%2Fn%2BgA%2FuLqS41pWE4hhoEamjXEYnlQ2fF%2B%2BJb1CgrtHZuh0zfd8VlkRdaFb%2FLMaj6xHyS1fsB1tqACpm0f0BnxjxWdl%2BSbxeR78espYmzTX2MsI%2BV3xfYQwR8hLUyccn4MMzefGb05MyXi6B81kKWmFDe2X%2BQUkzhshqOoxEGFyLfV1nrWDqUeBjcEGRkM2FsxXlU0%2BMwMxZVQj4Qd29wOzeTxZWw1cd5j4vssljdqn4KsYpxqyqfHbsGxieXiNeTS0uwOLZdJQXrS4qWz%2FmM%2F088GpNt9NqHt5ssrkq8CFW3%2BJb1RoIRLxyzKtMOAVFJrA0snktysrgHZ0haEYYScgJYC6c8nrcJo9V3%2BIzHogUpaWv2dVLYJJjk43VxIpoQril%2Bv7jvJPpS%2BRqeh2eVRXtBZgcR89tk4HmW8DYp%2BIZ4ceN6j8iG654mrCeMJ7L9mfAt3CfPFkvCCc5VRIDv0%2BvThFfiXYzT6HVl3Ah0Mp4jeS2%2BNSxvs7JG2vzsWvx9eH9%2B%2FO%2FT4p%2F3Cj6f%2Fv8hPsf5R%2F4PVY57P6%2FezIwAAAAASUVORK5CYII%3D'%3B%0A%0A%20%20const%20requireNonPackagedRuntime%20%3D%20(blockName)%20%3D%3E%20%7B%0A%20%20%20%20if%20(Scratch.vm.runtime.isPackaged)%20%7B%0A%20%20%20%20%20%20alert(%60To%20use%20the%20Looks%2B%20%24%7BblockName%7D%20block%2C%20the%20creator%20of%20the%20packaged%20project%20must%20uncheck%20%22Remove%20raw%20asset%20data%20after%20loading%20to%20save%20RAM%22%20under%20advanced%20settings%20in%20the%20packager.%60)%3B%0A%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20true%3B%0A%20%20%7D%3B%0A%0A%20%20class%20LooksPlus%20%7B%0A%20%20%20%20getInfo()%20%7B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20id%3A%20'lmsLooksPlus'%2C%0A%20%20%20%20%20%20%20%20name%3A%20'Looks%2B'%2C%0A%20%20%20%20%20%20%20%20color1%3A%20'%239966FF'%2C%0A%20%20%20%20%20%20%20%20color2%3A%20'%23855CD6'%2C%0A%20%20%20%20%20%20%20%20color3%3A%20'%23774DCB'%2C%0A%20%20%20%20%20%20%20%20menuIconURI%3A%20menuIconURI%2C%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'showSprite'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'show%20%5BTARGET%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TARGET%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20'spriteMenu'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'hideSprite'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'hide%20%5BTARGET%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TARGET%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20'spriteMenu'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'spriteVisible'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'%5BTARGET%5D%20visible%3F'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TARGET%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20'spriteMenu'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20'---'%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'setLayerTo'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'set%20layer%20%23%20of%20%5BTARGET%5D%20to%20%5BLAYER%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TARGET%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20'spriteMenu'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20LAYER%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'1'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'spriteLayerNumber'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'layer%20%23%20of%20%5BTARGET%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TARGET%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20'spriteMenu'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'effectValue'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'%5BEFFECT%5D%20effect%20of%20%5BTARGET%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20EFFECT%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'color'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20'effectMenu'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TARGET%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20'spriteMenu'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20'---'%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'targetCostumeNumber'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'%23%20of%20costumes%20in%20%5BTARGET%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TARGET%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20'spriteMenu'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'costumeAttribute'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'%5BATTRIBUTE%5D%20of%20%5BCOSTUME%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ATTRIBUTE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20'costumeAttribute'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COSTUME%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.COSTUME%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20'---'%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'snapshotStage'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'snapshot%20stage'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20'---'%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'replaceCostumeContent'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'set%20%5BTYPE%5D%20for%20%5BCOSTUME%5D%20to%20%5BCONTENT%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TYPE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20'SVGPNG'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'SVG'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COSTUME%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.COSTUME%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20CONTENT%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'%3Csvg%20%2F%3E'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'restoreCostumeContent'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'restore%20content%20for%20%5BCOSTUME%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COSTUME%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.COSTUME%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'costumeContent'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'%5BCONTENT%5D%20of%20costume%20%23%20%5BCOSTUME%5D%20of%20%5BTARGET%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20CONTENT%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20'contentType'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'content'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COSTUME%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%201%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TARGET%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20'spriteMenu'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20'---'%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'replaceColors'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'replace%20%5BCOLOR1%5D%20with%20%5BCOLOR2%5D%20in%20%5BSVG%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COLOR1%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.COLOR%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'%23FCB1E3'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COLOR2%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.COLOR%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'%238ECAFF'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SVG%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'%3Csvg%20%2F%3E'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'colorHex'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'hex%20of%20%5BCOLOR%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COLOR%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.COLOR%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'%23FFD983'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20menus%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20effectMenu%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20false%20for%20Scratch%20parity%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'color'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20'color'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'fisheye'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20'fisheye'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'whirl'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20'whirl'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'pixelate'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20'pixelate'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'mosaic'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20'mosaic'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'brightness'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20'brightness'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'ghost'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20'ghost'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20costumeAttribute%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'width'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20'width'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'height'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20'height'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'format'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20'format'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'rotation%20center%20x'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20'rotationCenterX'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'rotation%20center%20y'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20'rotationCenterY'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20contentType%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'content'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20'content'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'dataURI'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20'dataURI'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20SVGPNG%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'SVG'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20'SVG'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20spriteMenu%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20'getSprites'%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20showSprite(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20Scratch.vm.runtime.getSpriteTargetByName(args.TARGET)%3B%0A%20%20%20%20%20%20if%20(target)%20%7B%0A%20%20%20%20%20%20%20%20target.setVisible(true)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20hideSprite(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20Scratch.vm.runtime.getSpriteTargetByName(args.TARGET)%3B%0A%20%20%20%20%20%20if%20(target)%20%7B%0A%20%20%20%20%20%20%20%20target.setVisible(false)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20spriteVisible(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20Scratch.vm.runtime.getSpriteTargetByName(args.TARGET)%3B%0A%20%20%20%20%20%20if%20(!target)%20%7B%0A%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20Scratch.Cast.toBoolean(target.visible)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setLayerTo(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20Scratch.vm.runtime.getSpriteTargetByName(args.TARGET)%3B%0A%20%20%20%20%20%20if%20(!target)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20const%20drawableID%20%3D%20target.drawableID%3B%0A%20%20%20%20%20%20const%20layerOrder%20%3D%20target.getLayerOrder()%3B%0A%20%20%20%20%20%20const%20newLayer%20%3D%20(args.LAYER%20-%20layerOrder)%3B%0A%20%20%20%20%20%20target.renderer.setDrawableOrder(drawableID%2C%20newLayer%2C%20'sprite'%2C%20true)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20spriteLayerNumber(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20Scratch.vm.runtime.getSpriteTargetByName(args.TARGET)%3B%0A%20%20%20%20%20%20if%20(!target)%20%7B%0A%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20target.getLayerOrder()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20effectValue(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20Scratch.vm.runtime.getSpriteTargetByName(args.TARGET)%3B%0A%20%20%20%20%20%20if%20(!target)%20%7B%0A%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20const%20effects%20%3D%20target.effects%3B%0A%20%20%20%20%20%20const%20name%20%3D%20Scratch.Cast.toString(args.EFFECT)%3B%0A%20%20%20%20%20%20if%20(Object.prototype.hasOwnProperty.call(effects%2C%20name))%20%7B%0A%20%20%20%20%20%20%20%20return%20effects%5Bname%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F%2F%20should%20never%20happen%0A%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20costumeAttribute(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20costumeIndex%20%3D%20this.getCostumeInput(args.COSTUME%2C%20util.target)%3B%0A%20%20%20%20%20%20const%20costume%20%3D%20util.target.sprite.costumes%5BcostumeIndex%5D%3B%0A%20%20%20%20%20%20if%20(!costume)%20%7B%0A%20%20%20%20%20%20%20%20console.error('Costume%20doesn%5C't%20exist')%3B%0A%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20const%20attribute%20%3D%20args.ATTRIBUTE%3B%0A%20%20%20%20%20%20if%20(attribute%20%3D%3D%3D%20'width')%20%7B%0A%20%20%20%20%20%20%20%20return%20Math.ceil(Scratch.Cast.toNumber(costume.size%5B0%5D))%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(attribute%20%3D%3D%3D%20'height')%20%7B%0A%20%20%20%20%20%20%20%20return%20Math.ceil(Scratch.Cast.toNumber(costume.size%5B1%5D))%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(attribute%20%3D%3D%3D%20'format')%20%7B%0A%20%20%20%20%20%20%20%20if%20(!requireNonPackagedRuntime('costume%20format'))%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20'unknown'%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20costume.asset.assetType.runtimeFormat%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(attribute%20%3D%3D%3D%20'rotationCenterX')%20%7B%0A%20%20%20%20%20%20%20%20return%20costume.rotationCenterX%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(attribute%20%3D%3D%3D%20'rotationCenterY')%20%7B%0A%20%20%20%20%20%20%20%20return%20costume.rotationCenterY%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20return%20''%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20targetCostumeNumber(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20Scratch.vm.runtime.getSpriteTargetByName(args.TARGET)%3B%0A%20%20%20%20%20%20if%20(!target)%20%7B%0A%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20Scratch.Cast.toNumber(target.sprite.costumes.length)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20snapshotStage(args%2C%20util)%20%7B%0A%20%20%20%20%20%20return%20new%20Promise(resolve%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20Scratch.vm.runtime.renderer.requestSnapshot(uri%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20resolve(uri)%3B%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20replaceCostumeContent(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20costumeIndex%20%3D%20this.getCostumeInput(args.COSTUME%2C%20util.target)%3B%0A%20%20%20%20%20%20const%20costume%20%3D%20util.target.sprite.costumes%5BcostumeIndex%5D%3B%0A%20%20%20%20%20%20if%20(!costume)%20%7B%0A%20%20%20%20%20%20%20%20console.error('Costume%20doesn%5C't%20exist')%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FThis%20is%20here%20to%20ensure%20no%20changes%20are%20made%20to%20bitmap%20costumes%2C%20as%20changes%20are%20irreversible%0A%20%20%20%20%20%20%2F%2FCheck%20will%20be%20removed%20when%20it's%20possible%20to%20edit%20bitmap%20skins%0A%20%20%20%20%20%20const%20format%20%3D%20costume.asset.assetType.runtimeFormat%3B%0A%20%20%20%20%20%20if%20(format%20!%3D%3D%20'svg')%20%7B%0A%20%20%20%20%20%20%20%20console.error('Costume%20is%20not%20vector')%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20const%20contentType%20%3D%20args.TYPE%3B%0A%20%20%20%20%20%20const%20content%20%3D%20args.CONTENT%3B%0A%20%20%20%20%20%20if%20(contentType%20%3D%3D%3D%20'SVG')%20%7B%0A%20%20%20%20%20%20%20%20Scratch.vm.runtime.renderer.updateSVGSkin(costume.skinId%2C%20Scratch.Cast.toString(content))%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20console.error('Options%20other%20than%20SVG%20are%20currently%20unavailable')%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20Scratch.vm.emitTargetsUpdate()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20restoreCostumeContent(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20costumeIndex%20%3D%20this.getCostumeInput(args.COSTUME%2C%20util.target)%3B%0A%20%20%20%20%20%20const%20costume%20%3D%20util.target.sprite.costumes%5BcostumeIndex%5D%3B%0A%20%20%20%20%20%20if%20(!costume)%20%7B%0A%20%20%20%20%20%20%20%20console.error('Costume%20doesn%5C't%20exist')%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20(!requireNonPackagedRuntime('restore%20costume%20content'))%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2FThis%20is%20here%20to%20ensure%20no%20changes%20are%20made%20to%20bitmap%20costumes%2C%20as%20changes%20are%20irreversible%0A%20%20%20%20%20%20%2F%2FCheck%20will%20be%20removed%20when%20it's%20possible%20to%20edit%20bitmap%20skins%0A%20%20%20%20%20%20const%20format%20%3D%20costume.asset.assetType.runtimeFormat%3B%0A%20%20%20%20%20%20if%20(format%20!%3D%3D%20'svg')%20%7B%0A%20%20%20%20%20%20%20%20console.error('Costume%20is%20not%20vector')%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20const%20content%20%3D%20costume.asset.decodeText()%3B%0A%20%20%20%20%20%20const%20rotationCenterX%20%3D%20costume.rotationCenterX%3B%0A%20%20%20%20%20%20const%20rotationCenterY%20%3D%20costume.rotationCenterY%3B%0A%20%20%20%20%20%20util.target.renderer.updateSVGSkin(costume.skinId%2C%20content%2C%20%5BrotationCenterX%2C%20rotationCenterY%5D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20costumeContent(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20Scratch.vm.runtime.getSpriteTargetByName(args.TARGET)%3B%0A%20%20%20%20%20%20if%20(!target)%20%7B%0A%20%20%20%20%20%20%20%20console.error('Target%20does%20not%20exist')%3B%0A%20%20%20%20%20%20%20%20return%20''%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20(!requireNonPackagedRuntime('costume%20content'))%20%7B%0A%20%20%20%20%20%20%20%20return%20''%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20const%20costume%20%3D%20target.sprite.costumes%5B(args.COSTUME%20-%201)%5D%3B%0A%20%20%20%20%20%20if%20(!costume)%20%7B%0A%20%20%20%20%20%20%20%20console.error('Target%20costume%20does%20not%20exist')%3B%0A%20%20%20%20%20%20%20%20return%20''%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20const%20format%20%3D%20args.CONTENT%3B%0A%20%20%20%20%20%20if%20(format%20%3D%3D%3D%20'content')%20%7B%0A%20%20%20%20%20%20%20%20return%20costume.asset.decodeText()%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20return%20costume.asset.encodeDataURI()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20replaceColors(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20svg%20%3D%20Scratch.Cast.toString(args.SVG)%3B%0A%20%20%20%20%20%20const%20color1%20%3D%20args.COLOR1%3B%0A%20%20%20%20%20%20const%20color2%20%3D%20args.COLOR2%3B%0A%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20return%20svg.replace(new%20RegExp(color1%2C%20'gi')%2C%20color2)%3B%0A%20%20%20%20%20%20%7D%20catch%20(e)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20regex%20was%20invalid%2C%20don't%20replace%20anything%0A%20%20%20%20%20%20%20%20return%20svg%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20colorHex(args%2C%20util)%20%7B%0A%20%20%20%20%20%20return%20args.COLOR%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getCostumeInput(costume%2C%20target)%20%7B%0A%20%20%20%20%20%20if%20(typeof%20costume%20%3D%3D%3D%20'number')%20%7B%0A%20%20%20%20%20%20%20%20costume%20%3D%20Math.round(costume%20-%201)%3B%0A%20%20%20%20%20%20%20%20if%20(costume%20%3D%3D%3D%20Infinity%20%7C%7C%20costume%20%3D%3D%3D%20-Infinity%20%7C%7C%20!costume)%20%7B%0A%20%20%20%20%20%20%20%20%20%20costume%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20costume%20%3D%20this.wrapClamp(costume%2C%200%2C%20target.sprite.costumes.length%20-%201)%3B%0A%20%20%20%20%20%20%20%20return%20costume%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20return%20target.getCostumeIndexByName(Scratch.Cast.toString(costume))%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20wrapClamp(n%2C%20min%2C%20max)%20%7B%0A%20%20%20%20%20%20const%20range%20%3D%20(max%20-%20min)%20%2B%201%3B%0A%20%20%20%20%20%20return%20n%20-%20(Math.floor((n%20-%20min)%20%2F%20range)%20*%20range)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getSprites()%20%7B%0A%20%20%20%20%20%20const%20spriteNames%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20const%20targets%20%3D%20Scratch.vm.runtime.targets%3B%0A%20%20%20%20%20%20const%20myself%20%3D%20Scratch.vm.runtime.getEditingTarget().getName()%3B%0A%20%20%20%20%20%20for%20(let%20index%20%3D%201%3B%20index%20%3C%20targets.length%3B%20index%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20const%20targetName%20%3D%20targets%5Bindex%5D.getName()%3B%0A%20%20%20%20%20%20%20%20if%20(targetName%20%3D%3D%3D%20myself)%20%7B%0A%20%20%20%20%20%20%20%20%20%20spriteNames.unshift(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'this%20sprite'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20targetName%0A%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20spriteNames.push(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20targetName%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20targetName%0A%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(spriteNames.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20return%20spriteNames%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20return%20%5B%7Btext%3A%20%22%22%2C%20value%3A%200%7D%5D%3B%20%2F%2Fthis%20should%20never%20happen%20but%20it's%20a%20failsafe%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20Scratch.extensions.register(new%20LooksPlus())%3B%0A%7D)(Scratch)%3B%0A%20%7D)(Scratch)%3B","data:text/javascript;,(function(Scratch)%20%7B%20(function(Scratch)%20%7B%0D%0A%20%20'use%20strict'%3B%0D%0A%0D%0A%20%20const%20menuIconURI%20%3D%20''%3B%0D%0A%0D%0A%20%20%2F%2F%20Object.create(null)%20prevents%20%22variable%20%5BtoString%5D%22%20from%20returning%20a%20function%0D%0A%20%20let%20runtimeVariables%20%3D%20Object.create(null)%3B%0D%0A%0D%0A%20%20%2F%2F%20Credit%20to%20skyhigh173%20for%20the%20idea%20of%20this%0D%0A%20%20const%20label%20%3D%20(name%2C%20hidden)%20%3D%3E%20(%7B%0D%0A%20%20%20%20blockType%3A%20Scratch.BlockType.LABEL%2C%0D%0A%20%20%20%20text%3A%20name%2C%0D%0A%20%20%20%20hideFromPalette%3A%20hidden%0D%0A%20%20%7D)%3B%0D%0A%0D%0A%20%20function%20resetRuntimeVariables()%20%7B%0D%0A%20%20%20%20console.log('runtime%20variables%20cleared')%3B%0D%0A%20%20%20%20runtimeVariables%20%3D%20Object.create(null)%3B%0D%0A%20%20%7D%0D%0A%0D%0A%20%20class%20TempVars%20%7B%0D%0A%20%20%20%20constructor()%20%7B%0D%0A%20%20%20%20%20%20Scratch.vm.runtime.on('PROJECT_START'%2C%20()%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20resetRuntimeVariables()%3B%0D%0A%20%20%20%20%20%20%7D)%3B%0D%0A%0D%0A%20%20%20%20%20%20Scratch.vm.runtime.on('PROJECT_STOP_ALL'%2C%20()%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20resetRuntimeVariables()%3B%0D%0A%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20getInfo()%20%7B%0D%0A%20%20%20%20%20%20return%20%7B%0D%0A%20%20%20%20%20%20%20%20id%3A%20'lmsTempVars2'%2C%0D%0A%20%20%20%20%20%20%20%20name%3A%20'Temporary%20Variables'%2C%0D%0A%20%20%20%20%20%20%20%20color1%3A%20'%23FF791A'%2C%0D%0A%20%20%20%20%20%20%20%20color2%3A%20'%23E15D00'%2C%0D%0A%20%20%20%20%20%20%20%20menuIconURI%3A%20menuIconURI%2C%20%2F%2F%20I%20intend%20on%20making%20one%20later%0D%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0D%0A%0D%0A%20%20%20%20%20%20%20%20%20%20label('Thread%20Variables'%2C%20false)%2C%0D%0A%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'setThreadVariable'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'set%20thread%20var%20%5BVAR%5D%20to%20%5BSTRING%5D'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20VAR%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'variable'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'0'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'changeThreadVariable'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'change%20thread%20var%20%5BVAR%5D%20by%20%5BNUM%5D'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20VAR%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'variable'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'1'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%0D%0A%20%20%20%20%20%20%20%20%20%20'---'%2C%0D%0A%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'getThreadVariable'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'thread%20var%20%5BVAR%5D'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20VAR%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'variable'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'threadVariableExists'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'thread%20var%20%5BVAR%5D%20exists%3F'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20VAR%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'variable'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%0D%0A%20%20%20%20%20%20%20%20%20%20'---'%2C%0D%0A%0D%0A%20%20%20%20%20%20%20%20%20%20%2F*%20Add%20this%20when%20the%20compiler%20supports%20it%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'forEachThreadVariable'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.LOOP%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'for%20each%20%5BVAR%5D%20in%20%5BNUM%5D'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20VAR%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'thread%20variable'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'10'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20*%2F%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'listThreadVariables'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'list%20active%20thread%20variables'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%0D%0A%20%20%20%20%20%20%20%20%20%20'---'%2C%0D%0A%0D%0A%20%20%20%20%20%20%20%20%20%20label('Runtime%20Variables'%2C%20false)%2C%0D%0A%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'setRuntimeVariable'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'set%20runtime%20var%20%5BVAR%5D%20to%20%5BSTRING%5D'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20VAR%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'variable'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'0'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'changeRuntimeVariable'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'change%20runtime%20var%20%5BVAR%5D%20by%20%5BNUM%5D'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20VAR%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'variable'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'1'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%0D%0A%20%20%20%20%20%20%20%20%20%20'---'%2C%0D%0A%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'getRuntimeVariable'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'runtime%20var%20%5BVAR%5D'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20VAR%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'variable'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'runtimeVariableExists'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'runtime%20var%20%5BVAR%5D%20exists%3F'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20VAR%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'variable'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%0D%0A%20%20%20%20%20%20%20%20%20%20'---'%2C%0D%0A%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'deleteRuntimeVariable'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'delete%20runtime%20var%20%5BVAR%5D'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20VAR%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'variable'%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'deleteAllRuntimeVariables'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'delete%20all%20runtime%20variables'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'listRuntimeVariables'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'list%20active%20runtime%20variables'%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%5D%0D%0A%20%20%20%20%20%20%7D%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20%2F*%20THREAD%20VARIABLES%20*%2F%0D%0A%0D%0A%20%20%20%20setThreadVariable(args%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20const%20thread%20%3D%20util.thread%3B%0D%0A%20%20%20%20%20%20if%20(!thread.variables)%20thread.variables%20%3D%20Object.create(null)%3B%0D%0A%20%20%20%20%20%20const%20vars%20%3D%20thread.variables%3B%0D%0A%20%20%20%20%20%20vars%5Bargs.VAR%5D%20%3D%20args.STRING%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20changeThreadVariable(args%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20const%20thread%20%3D%20util.thread%3B%0D%0A%20%20%20%20%20%20if%20(!thread.variables)%20thread.variables%20%3D%20Object.create(null)%3B%0D%0A%20%20%20%20%20%20const%20vars%20%3D%20thread.variables%3B%0D%0A%20%20%20%20%20%20const%20prev%20%3D%20Scratch.Cast.toNumber(vars%5Bargs.VAR%5D)%3B%0D%0A%20%20%20%20%20%20const%20next%20%3D%20Scratch.Cast.toNumber(args.NUM)%3B%0D%0A%20%20%20%20%20%20vars%5Bargs.VAR%5D%20%3D%20prev%20%2B%20next%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20getThreadVariable%20(args%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20const%20thread%20%3D%20util.thread%3B%0D%0A%20%20%20%20%20%20if%20(!thread.variables)%20thread.variables%20%3D%20Object.create(null)%3B%0D%0A%20%20%20%20%20%20const%20vars%20%3D%20thread.variables%3B%0D%0A%20%20%20%20%20%20const%20varValue%20%3D%20vars%5Bargs.VAR%5D%3B%0D%0A%20%20%20%20%20%20if%20(typeof%20varValue%20%3D%3D%3D%20'undefined')%20return%20''%3B%0D%0A%20%20%20%20%20%20return%20varValue%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20threadVariableExists%20(args%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20const%20thread%20%3D%20util.thread%3B%0D%0A%20%20%20%20%20%20if%20(!thread.variables)%20thread.variables%20%3D%20Object.create(null)%3B%0D%0A%20%20%20%20%20%20const%20vars%20%3D%20thread.variables%3B%0D%0A%20%20%20%20%20%20const%20varValue%20%3D%20vars%5Bargs.VAR%5D%3B%0D%0A%20%20%20%20%20%20return%20!(typeof%20varValue%20%3D%3D%3D%20'undefined')%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20forEachThreadVariable(args%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20const%20thread%20%3D%20util.thread%3B%0D%0A%20%20%20%20%20%20if%20(!thread.variables)%20thread.variables%20%3D%20Object.create(null)%3B%0D%0A%20%20%20%20%20%20const%20vars%20%3D%20thread.variables%3B%0D%0A%20%20%20%20%20%20if%20(typeof%20util.stackFrame.index%20%3D%3D%3D%20'undefined')%20%7B%0D%0A%20%20%20%20%20%20%20%20util.stackFrame.index%20%3D%200%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20if%20(util.stackFrame.index%20%3C%20Number(args.NUM))%20%7B%0D%0A%20%20%20%20%20%20%20%20util.stackFrame.index%2B%2B%3B%0D%0A%20%20%20%20%20%20%20%20vars%5Bargs.VAR%5D%20%3D%20util.stackFrame.index%3B%0D%0A%20%20%20%20%20%20%20%20util.startBranch(1%2C%20true)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20listThreadVariables(args%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20const%20thread%20%3D%20util.thread%3B%0D%0A%20%20%20%20%20%20if%20(!thread.variables)%20thread.variables%20%3D%20Object.create(null)%3B%0D%0A%20%20%20%20%20%20const%20vars%20%3D%20thread.variables%3B%0D%0A%20%20%20%20%20%20return%20Object.keys(vars).join('%2C')%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20%2F*%20RUNTIME%20VARIABLES%20*%2F%0D%0A%0D%0A%20%20%20%20setRuntimeVariable%20(args)%20%7B%0D%0A%20%20%20%20%20%20runtimeVariables%5Bargs.VAR%5D%20%3D%20args.STRING%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20changeRuntimeVariable%20(args)%20%7B%0D%0A%20%20%20%20%20%20const%20prev%20%3D%20Scratch.Cast.toNumber(runtimeVariables%5Bargs.VAR%5D)%3B%0D%0A%20%20%20%20%20%20const%20next%20%3D%20Scratch.Cast.toNumber(args.NUM)%3B%0D%0A%20%20%20%20%20%20runtimeVariables%5Bargs.VAR%5D%20%3D%20prev%20%2B%20next%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20getRuntimeVariable%20(args)%20%7B%0D%0A%20%20%20%20%20%20if%20(!(args.VAR%20in%20runtimeVariables))%20return%20''%3B%0D%0A%20%20%20%20%20%20return%20runtimeVariables%5Bargs.VAR%5D%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20runtimeVariableExists%20(args)%20%7B%0D%0A%20%20%20%20%20%20return%20(args.VAR%20in%20runtimeVariables)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20listRuntimeVariables%20(args%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20return%20Object.keys(runtimeVariables).join('%2C')%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20deleteRuntimeVariable%20(args)%20%7B%0D%0A%20%20%20%20%20%20Reflect.deleteProperty(runtimeVariables%2C%20args.VAR)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20deleteAllRuntimeVariables%20()%20%7B%0D%0A%20%20%20%20%20%20runtimeVariables%20%3D%20Object.create(null)%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%7D%0D%0A%20%20Scratch.extensions.register(new%20TempVars())%3B%0D%0A%7D)(Scratch)%3B%0D%0A%20%7D)(Scratch)%3B","data:text/javascript;,(function(Scratch)%20%7B%20(function(Scratch)%20%7B%0A%20%20'use%20strict'%3B%0A%0A%20%20%2F%2F%20This%20extension%20was%20created%20by%20making%20projects%20with%20https%3A%2F%2Flab.scratch.mit.edu%2Ftext%2F%0A%20%20%2F%2F%20To%20determine%20block%20and%20argument%20IDs%2C%20we%20extracted%20project.json%20and%20examined%20the%20result.%0A%20%20%2F%2F%20To%20determine%20block%20behaviors%20we%20simply%20experiment%20with%20Scratch%20Labs%20and%20made%20sure%20our%0A%20%20%2F%2F%20blocks%20do%20the%20same%20things.%0A%20%20%2F%2F%20This%20extension's%20code%20is%20not%20based%20on%20the%20source%20code%20of%20Scratch%20Labs.%0A%0A%20%20%2F%2F%20by%20%40LukeManiaStudios%0A%20%20const%20blockIconURI%20%3D%20'data%3Aimage%2Fsvg%2Bxml%3B%2C%253Csvg%2520xmlns%253D%2522http%253A%252F%252Fwww.w3.org%252F2000%252Fsvg%2522%2520width%253D%2522284.242%2522%2520height%253D%2522284.242%2522%253E%253Cg%2520fill-rule%253D%2522evenodd%2522%2520stroke-miterlimit%253D%252210%2522%2520data-paper-data%253D%2522%257B%2526quot%253BisPaintingLayer%2526quot%253B%253Atrue%257D%2522%2520style%253D%2522mix-blend-mode%253Anormal%2522%253E%253Cpath%2520fill%253D%2522none%2522%2520d%253D%2522M188.894%2520119.459c-.706%25202.378-1.43%25204.69-2.172%25206.933-1.05%25203.15-2.21%25206.445-3.48%25209.888a1671.47%25201671.47%25200%25200%25200-4.174%252011.462l-5.73%252015.528h30.833l-5.73-15.528a522.83%2520522.83%25200%25200%25201-4.065-11.242%2520408.343%2520408.343%25200%25200%25201-3.37-10.108%2520350.767%2520350.767%25200%25200%25201-2.112-6.933zm18.519-56.092%252062.329%2520157.508H225.43l-9.636-26.111h-54.08l-9.636%252026.11h-43.432l62.768-157.507Z%2522%252F%253E%253Cpath%2520fill%253D%2522%252396f%2522%2520stroke%253D%2522%25237240d6%2522%2520stroke-linejoin%253D%2522round%2522%2520stroke-width%253D%252229%2522%2520d%253D%2522M188.894%2520119.459c-.706%25202.378-1.43%25204.69-2.172%25206.933-1.05%25203.15-2.21%25206.445-3.48%25209.888a1671.47%25201671.47%25200%25200%25200-4.174%252011.462l-5.73%252015.528h30.833l-5.73-15.528a522.83%2520522.83%25200%25200%25201-4.065-11.242%2520408.343%2520408.343%25200%25200%25201-3.37-10.108%2520350.767%2520350.767%25200%25200%25201-2.112-6.933zm18.519-56.092%252062.329%2520157.508H225.43l-9.636-26.111h-54.08l-9.636%252026.11h-43.432l62.768-157.507Z%2522%252F%253E%253Cpath%2520fill%253D%2522none%2522%2520d%253D%2522M188.894%2520119.459c-.706%25202.378-1.43%25204.69-2.172%25206.933-1.05%25203.15-2.21%25206.445-3.48%25209.888a1671.47%25201671.47%25200%25200%25200-4.174%252011.462l-5.73%252015.528h30.833l-5.73-15.528a522.827%2520522.827%25200%25200%25201-4.065-11.242%2520408.302%2520408.302%25200%25200%25201-3.37-10.108%2520350.767%2520350.767%25200%25200%25201-2.112-6.933zm18.519-56.092%252062.329%2520157.508H225.43l-9.636-26.111h-54.08l-9.636%252026.11h-43.432l62.768-157.507Z%2522%252F%253E%253Cpath%2520fill%253D%2522%2523ffa24d%2522%2520stroke%253D%2522%2523fff%2522%2520stroke-linejoin%253D%2522round%2522%2520stroke-width%253D%25229%2522%2520d%253D%2522M188.894%2520119.459c-.706%25202.378-1.43%25204.69-2.172%25206.933-1.05%25203.15-2.21%25206.445-3.48%25209.888a1671.47%25201671.47%25200%25200%25200-4.174%252011.462l-5.73%252015.528h30.833l-5.73-15.528a522.827%2520522.827%25200%25200%25201-4.065-11.242%2520408.302%2520408.302%25200%25200%25201-3.37-10.108%2520350.767%2520350.767%25200%25200%25201-2.112-6.933zm18.519-56.092%252062.329%2520157.508H225.43l-9.636-26.111h-54.08l-9.636%252026.11h-43.432l62.768-157.507Z%2522%252F%253E%253Cpath%2520fill%253D%2522none%2522%2520d%253D%2522M143.696%2520119.459c-.706%25202.378-1.43%25204.69-2.172%25206.933-1.05%25203.15-2.21%25206.445-3.479%25209.888a1671.47%25201671.47%25200%25200%25200-4.175%252011.462l-5.73%252015.528h30.833l-5.73-15.528a522.827%2520522.827%25200%25200%25201-4.065-11.242%2520408.343%2520408.343%25200%25200%25201-3.37-10.108%2520350.767%2520350.767%25200%25200%25201-2.112-6.933zm18.519-56.092%252062.33%2520157.508h-44.312l-9.637-26.111h-54.08l-9.636%252026.11H63.448l62.768-157.507Z%2522%252F%253E%253Cpath%2520fill%253D%2522%252396f%2522%2520stroke%253D%2522%25237240d6%2522%2520stroke-linejoin%253D%2522round%2522%2520stroke-width%253D%252229%2522%2520d%253D%2522M143.696%2520119.459c-.706%25202.378-1.43%25204.69-2.172%25206.933-1.05%25203.15-2.21%25206.445-3.479%25209.888a1671.47%25201671.47%25200%25200%25200-4.175%252011.462l-5.73%252015.528h30.833l-5.73-15.528a522.827%2520522.827%25200%25200%25201-4.065-11.242%2520408.343%2520408.343%25200%25200%25201-3.37-10.108%2520350.767%2520350.767%25200%25200%25201-2.112-6.933zm18.519-56.092%252062.33%2520157.508h-44.312l-9.637-26.111h-54.08l-9.636%252026.11H63.448l62.768-157.507Z%2522%252F%253E%253Cpath%2520fill%253D%2522none%2522%2520d%253D%2522M143.696%2520119.459c-.706%25202.378-1.43%25204.69-2.172%25206.933-1.05%25203.15-2.21%25206.445-3.479%25209.888a1671.47%25201671.47%25200%25200%25200-4.175%252011.462l-5.73%252015.528h30.833l-5.73-15.528a522.827%2520522.827%25200%25200%25201-4.065-11.242%2520408.343%2520408.343%25200%25200%25201-3.37-10.108%2520350.767%2520350.767%25200%25200%25201-2.112-6.933zm18.519-56.092%252062.33%2520157.508h-44.312l-9.637-26.111h-54.08l-9.636%252026.11H63.448l62.768-157.507Z%2522%252F%253E%253Cpath%2520fill%253D%2522%2523ff774d%2522%2520stroke%253D%2522%2523fff%2522%2520stroke-linejoin%253D%2522round%2522%2520stroke-width%253D%25229%2522%2520d%253D%2522M143.696%2520119.459c-.706%25202.378-1.43%25204.69-2.172%25206.933-1.05%25203.15-2.21%25206.445-3.479%25209.888a1671.47%25201671.47%25200%25200%25200-4.175%252011.462l-5.73%252015.528h30.833l-5.73-15.528a522.827%2520522.827%25200%25200%25201-4.065-11.242%2520408.343%2520408.343%25200%25200%25201-3.37-10.108%2520350.767%2520350.767%25200%25200%25201-2.112-6.933zm18.519-56.092%252062.33%2520157.508h-44.312l-9.637-26.111h-54.08l-9.636%252026.11H63.448l62.768-157.507Z%2522%252F%253E%253Cpath%2520fill%253D%2522none%2522%2520d%253D%2522M94.748%2520119.459c-.706%25202.378-1.43%25204.69-2.172%25206.933-1.05%25203.15-2.21%25206.445-3.479%25209.888-1.27%25203.442-2.66%25207.263-4.175%252011.462l-5.73%252015.528h30.833l-5.73-15.528a522.885%2520522.885%25200%25200%25201-4.065-11.242%2520408.343%2520408.343%25200%25200%25201-3.37-10.108%2520350.767%2520350.767%25200%25200%25201-2.112-6.933zm18.52-56.092%252062.328%2520157.508h-44.311l-9.637-26.111h-54.08l-9.635%252026.11H14.5L77.269%252063.368Z%2522%252F%253E%253Cpath%2520fill%253D%2522%252396f%2522%2520stroke%253D%2522%25237240d6%2522%2520stroke-linejoin%253D%2522round%2522%2520stroke-width%253D%252229%2522%2520d%253D%2522M94.748%2520119.459c-.706%25202.378-1.43%25204.69-2.172%25206.933-1.05%25203.15-2.21%25206.445-3.479%25209.888-1.27%25203.442-2.66%25207.263-4.175%252011.462l-5.73%252015.528h30.833l-5.73-15.528a522.885%2520522.885%25200%25200%25201-4.065-11.242%2520408.343%2520408.343%25200%25200%25201-3.37-10.108%2520350.767%2520350.767%25200%25200%25201-2.112-6.933zm18.52-56.092%252062.328%2520157.508h-44.311l-9.637-26.111h-54.08l-9.635%252026.11H14.5L77.269%252063.368Z%2522%252F%253E%253Cpath%2520fill%253D%2522none%2522%2520d%253D%2522M94.748%2520119.459c-.706%25202.378-1.43%25204.69-2.172%25206.933-1.05%25203.15-2.21%25206.445-3.479%25209.888-1.27%25203.442-2.66%25207.263-4.175%252011.462l-5.73%252015.528h30.833l-5.73-15.528a522.885%2520522.885%25200%25200%25201-4.065-11.242%2520408.302%2520408.302%25200%25200%25201-3.37-10.108%2520350.767%2520350.767%25200%25200%25201-2.112-6.933zm18.52-56.092%252062.328%2520157.508h-44.311l-9.637-26.111h-54.08l-9.635%252026.11H14.5L77.269%252063.368Z%2522%252F%253E%253Cpath%2520fill%253D%2522%2523ff4c4c%2522%2520stroke%253D%2522%2523fff%2522%2520stroke-linejoin%253D%2522round%2522%2520stroke-width%253D%25229%2522%2520d%253D%2522M94.748%2520119.459c-.706%25202.378-1.43%25204.69-2.172%25206.933-1.05%25203.15-2.21%25206.445-3.479%25209.888-1.27%25203.442-2.66%25207.263-4.175%252011.462l-5.73%252015.528h30.833l-5.73-15.528a522.885%2520522.885%25200%25200%25201-4.065-11.242%2520408.302%2520408.302%25200%25200%25201-3.37-10.108%2520350.767%2520350.767%25200%25200%25201-2.112-6.933zm18.52-56.092%252062.328%2520157.508h-44.311l-9.637-26.111h-54.08l-9.635%252026.11H14.5L77.269%252063.368Z%2522%252F%253E%253C%252Fg%253E%253C%252Fsvg%253E'%3B%0A%0A%20%20const%20CUSTOM_STATE_KEY%20%3D%20Symbol()%3B%0A%0A%20%20const%20ALIGN_LEFT%20%3D%200%3B%0A%20%20const%20ALIGN_RIGHT%20%3D%201%3B%0A%20%20const%20ALIGN_CENTER%20%3D%202%3B%0A%0A%20%20const%20vm%20%3D%20Scratch.vm%3B%0A%20%20const%20renderer%20%3D%20vm.renderer%3B%0A%20%20const%20gl%20%3D%20renderer.gl%3B%0A%0A%20%20const%20NATIVE_FONTS%20%3D%20%5B%0A%20%20%20%20'Sans%20Serif'%2C%0A%20%20%20%20'Serif'%2C%0A%20%20%20%20'Handwriting'%2C%0A%20%20%20%20'Marker'%2C%0A%20%20%20%20'Curly'%2C%0A%20%20%20%20'Pixel'%2C%0A%20%20%5D%3B%0A%0A%20%20const%20DEFAULT_COLOR%20%3D%20'%23575e75'%3B%0A%20%20const%20DEFAULT_FONT%20%3D%20'Handwriting'%3B%0A%20%20const%20DEFAULT_WIDTH%20%3D%20vm.runtime.stageWidth%3B%0A%20%20const%20DEFAULT_ALIGN%20%3D%20ALIGN_CENTER%3B%0A%20%20const%20DEFAULT_FONT_SIZE%20%3D%2024%3B%0A%0A%20%20const%20TYPE_DELAY%20%3D%201000%20%2F%2015%3B%0A%0A%20%20const%20RAINBOW_TIME_PER%20%3D%201000%3B%0A%20%20const%20RAINBOW_DURATION%20%3D%202000%3B%0A%0A%20%20const%20ZOOM_DURATION%20%3D%20500%3B%0A%0A%20%20let%20globalFrameTime%20%3D%200%3B%0A%0A%20%20%2F**%0A%20%20%20*%20%40typedef%20TextState%0A%20%20%20*%20%40property%20%7BTextCostumeSkin%7D%20skin%0A%20%20%20*%2F%0A%0A%20%20%2F%2F%20temporary%0A%20%20if%20(!renderer.exports%20%7C%7C%20!renderer.exports.Skin%20%7C%7C%20!vm.exports)%20%7B%0A%20%20%20%20alert('VM%20is%20too%20old%20for%20animated%20text%20extension')%3B%0A%20%20%20%20throw%20new%20Error('VM%20is%20too%20old')%3B%0A%20%20%7D%0A%0A%20%20const%20Skin%20%3D%20renderer.exports.Skin%3B%0A%20%20const%20CanvasMeasurementProvider%20%3D%20renderer.exports.CanvasMeasurementProvider%3B%0A%20%20const%20twgl%20%3D%20renderer.exports.twgl%3B%0A%20%20const%20RenderedTarget%20%3D%20vm.exports.RenderedTarget%3B%0A%0A%20%20%2F**%0A%20%20%20*%20%40param%20%7Bnumber%7D%20c%0A%20%20%20*%20%40returns%20%7Bstring%7D%0A%20%20%20*%2F%0A%20%20const%20formatComponent%20%3D%20(c)%20%3D%3E%20Math.round(c).toString(16).padStart(2%2C%20'0')%3B%0A%0A%20%20%2F**%0A%20%20%20*%20%40param%20%7B%5Bnumber%2C%20number%2C%20number%5D%7D%20color%0A%20%20%20*%20%40returns%20%7Bstring%7D%0A%20%20%20*%2F%0A%20%20const%20formatColor%20%3D%20(color)%20%3D%3E%20%60%23%24%7BformatComponent(color%5B0%5D)%7D%24%7BformatComponent(color%5B1%5D)%7D%24%7BformatComponent(color%5B2%5D)%7D%60%3B%0A%0A%20%20%2F**%0A%20%20%20*%20%40param%20%7Bnumber%7D%20h%20hue%20from%200-1%0A%20%20%20*%20%40param%20%7Bnumber%7D%20s%20saturation%20from%200-1%0A%20%20%20*%20%40param%20%7Bnumber%7D%20v%20value%20from%200-1%0A%20%20%20*%20%40returns%20%7B%5Bnumber%2C%20number%2C%20number%5D%7D%20RGB%20channels%20from%200-255%0A%20%20%20*%2F%0A%20%20const%20hsvToRGB%20%3D%20(h%2C%20s%2C%20v)%20%3D%3E%20%7B%0A%20%20%20%20%2F%2F%20https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FHSL_and_HSV%0A%20%20%20%20var%20r%2C%20g%2C%20b%3B%0A%20%20%20%20var%20i%20%3D%20Math.floor(h%20*%206)%3B%0A%20%20%20%20var%20f%20%3D%20h%20*%206%20-%20i%3B%0A%20%20%20%20var%20p%20%3D%20v%20*%20(1%20-%20s)%3B%0A%20%20%20%20var%20q%20%3D%20v%20*%20(1%20-%20f%20*%20s)%3B%0A%20%20%20%20var%20t%20%3D%20v%20*%20(1%20-%20(1%20-%20f)%20*%20s)%3B%0A%20%20%20%20switch%20(i%20%25%206)%20%7B%0A%20%20%20%20%20%20case%200%3A%20r%20%3D%20v%2C%20g%20%3D%20t%2C%20b%20%3D%20p%3B%20break%3B%0A%20%20%20%20%20%20case%201%3A%20r%20%3D%20q%2C%20g%20%3D%20v%2C%20b%20%3D%20p%3B%20break%3B%0A%20%20%20%20%20%20case%202%3A%20r%20%3D%20p%2C%20g%20%3D%20v%2C%20b%20%3D%20t%3B%20break%3B%0A%20%20%20%20%20%20case%203%3A%20r%20%3D%20p%2C%20g%20%3D%20q%2C%20b%20%3D%20v%3B%20break%3B%0A%20%20%20%20%20%20case%204%3A%20r%20%3D%20t%2C%20g%20%3D%20p%2C%20b%20%3D%20v%3B%20break%3B%0A%20%20%20%20%20%20case%205%3A%20r%20%3D%20v%2C%20g%20%3D%20p%2C%20b%20%3D%20q%3B%20break%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20%5Br%20*%20255%20%7C%200%2C%20g%20*%20255%20%7C%200%2C%20b%20*%20255%20%7C%200%5D%3B%0A%20%20%7D%3B%0A%0A%20%20%2F**%0A%20%20%20*%20%40param%20%7BCanvasGradient%7D%20gradient%0A%20%20%20*%20%40param%20%7Bnumber%7D%20offset%20number%20of%20cycles%20to%20offset%20by%0A%20%20%20*%2F%0A%20%20const%20addRainbowStops%20%3D%20(gradient%2C%20offset)%20%3D%3E%20%7B%0A%20%20%20%20const%20NUMBER_STOPS%20%3D%2020%3B%0A%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20NUMBER_STOPS%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20const%20exactPosition%20%3D%20i%20%2F%20NUMBER_STOPS%3B%0A%20%20%20%20%20%20let%20offsetPosition%20%3D%20(exactPosition%20-%20offset)%20%25%201%3B%0A%20%20%20%20%20%20if%20(offsetPosition%20%3C%200)%20%7B%0A%20%20%20%20%20%20%20%20offsetPosition%20%2B%3D%201%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20const%20rgb%20%3D%20hsvToRGB(offsetPosition%2C%201%2C%201)%3B%0A%20%20%20%20%20%20gradient.addColorStop(exactPosition%2C%20formatColor(rgb))%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%0A%20%20class%20TextCostumeSkin%20extends%20Skin%20%7B%0A%20%20%20%20constructor%20(id%2C%20drawable)%20%7B%0A%20%20%20%20%20%20super(id%2C%20renderer)%3B%0A%0A%20%20%20%20%20%20%2F**%20%40type%20%7BRenderWebGL.Drawable%7D%20*%2F%0A%20%20%20%20%20%20this.drawable%20%3D%20drawable%3B%0A%20%20%20%20%20%20%2F**%20%40type%20%7Bnumber%7D%20*%2F%0A%20%20%20%20%20%20this._previousDrawableXScale%20%3D%20100%3B%0A%0A%20%20%20%20%20%20this.canvas%20%3D%20document.createElement('canvas')%3B%0A%20%20%20%20%20%20this.canvas.width%20%3D%200%3B%0A%20%20%20%20%20%20this.canvas.height%20%3D%200%3B%0A%20%20%20%20%20%20this.ctx%20%3D%20this.canvas.getContext('2d')%3B%0A%0A%20%20%20%20%20%20this.text%20%3D%20''%3B%0A%20%20%20%20%20%20this.color%20%3D%20DEFAULT_COLOR%3B%0A%20%20%20%20%20%20this.textWidth%20%3D%20DEFAULT_WIDTH%3B%0A%20%20%20%20%20%20this.fontFamily%20%3D%20DEFAULT_FONT%3B%0A%20%20%20%20%20%20this.baseFontSize%20%3D%20DEFAULT_FONT_SIZE%3B%0A%20%20%20%20%20%20this.align%20%3D%20DEFAULT_ALIGN%3B%0A%0A%20%20%20%20%20%20%2F**%20%40type%20%7BArray%3C%7Btext%3A%20string%3B%20width%3A%20number%3B%7D%3E%7D%20*%2F%0A%20%20%20%20%20%20this.lines%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%2F**%20%40type%20%7B%5Bnumber%2C%20number%5D%7D%20*%2F%0A%20%20%20%20%20%20this._size%20%3D%20%5B0%2C%200%5D%3B%0A%20%20%20%20%20%20%2F**%20%40type%20%7B%5Bnumber%2C%20number%5D%7D%20*%2F%0A%20%20%20%20%20%20this._rotationCenter%20%3D%20%5B0%2C%200%5D%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Updated%20in%20_updateFontDimensions%0A%20%20%20%20%20%20this.calculatedFontSize%20%3D%200%3B%0A%20%20%20%20%20%20this.lineHeight%20%3D%200%3B%0A%20%20%20%20%20%20this.verticalPadding%20%3D%200%3B%0A%20%20%20%20%20%20this.wrapWidth%20%3D%200%3B%0A%0A%20%20%20%20%20%20this._textDirty%20%3D%20false%3B%0A%20%20%20%20%20%20this._textureDirty%20%3D%20false%3B%0A%20%20%20%20%20%20this._renderedAtScale%20%3D%201%3B%0A%20%20%20%20%20%20this._renderTime%20%3D%200%3B%0A%20%20%20%20%20%20this._reflowTime%20%3D%200%3B%0A%0A%20%20%20%20%20%20this.typeAnimationInterval%20%3D%20null%3B%0A%0A%20%20%20%20%20%20this.isRainbow%20%3D%20false%3B%0A%20%20%20%20%20%20this.rainbowStartTime%20%3D%200%3B%0A%20%20%20%20%20%20this.rainbowTimeout%20%3D%20null%3B%0A%0A%20%20%20%20%20%20this.isZooming%20%3D%20false%3B%0A%20%20%20%20%20%20this.zoomStartTime%20%3D%200%3B%0A%20%20%20%20%20%20this.zoomTimeout%20%3D%20null%3B%0A%0A%20%20%20%20%20%20%2F**%20%40type%20%7B(()%20%3D%3E%20void)%7Cnull%7D%20*%2F%0A%20%20%20%20%20%20this.resolveOngoingAnimation%20%3D%20null%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Part%20of%20Skin%20API%0A%20%20%20%20dispose%20()%20%7B%0A%20%20%20%20%20%20if%20(this._texture)%20%7B%0A%20%20%20%20%20%20%20%20gl.deleteTexture(this._texture)%3B%0A%20%20%20%20%20%20%20%20this._texture%20%3D%20null%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.canvas%20%3D%20null%3B%0A%20%20%20%20%20%20this.ctx%20%3D%20null%3B%0A%20%20%20%20%20%20super.dispose()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Part%20of%20Skin%20API%0A%20%20%20%20get%20size%20()%20%7B%0A%20%20%20%20%20%20if%20(this._needsReflow())%20%7B%0A%20%20%20%20%20%20%20%20this._reflowText()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20this._size%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Part%20of%20Skin%20API%0A%20%20%20%20useNearest%20()%20%7B%0A%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20_needsReflow%20()%20%7B%0A%20%20%20%20%20%20return%20(%0A%20%20%20%20%20%20%20%20this._textDirty%20%7C%7C%0A%20%20%20%20%20%20%20%20(this.isZooming%20%26%26%20this._reflowTime%20!%3D%3D%20globalFrameTime)%20%7C%7C%0A%20%20%20%20%20%20%20%20this._previousDrawableXScale%20!%3D%3D%20Math.abs(this.drawable.scale%5B0%5D)%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20_updateFontDimensions%20()%20%7B%0A%20%20%20%20%20%20this.calculatedFontSize%20%3D%20this.baseFontSize%3B%0A%20%20%20%20%20%20if%20(this.isZooming)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20TODO%3A%20it%20looks%20like%20Scratch's%20animation%20always%20starts%20at%20least%20a%20little%20visible%0A%20%20%20%20%20%20%20%20const%20time%20%3D%20globalFrameTime%20-%20this.zoomStartTime%3B%0A%20%20%20%20%20%20%20%20const%20progress%20%3D%20Math.max(0%2C%20Math.min(1%2C%20time%20%2F%20ZOOM_DURATION))%3B%0A%20%20%20%20%20%20%20%20this.calculatedFontSize%20*%3D%20progress%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.lineHeight%20%3D%20this.baseFontSize%20*%208%20%2F%207%3B%0A%20%20%20%20%20%20%2F%2F%20Always%20use%20the%20base%20size%20for%20padding.%20This%20makes%20the%20zoom%20animation%20look%20better.%0A%20%20%20%20%20%20this.verticalPadding%20%3D%20this.baseFontSize%20%2F%207%3B%0A%20%20%20%20%20%20%2F%2F%20Only%20use%20horizontal%20scale%20for%20wrap%20width%20for%20compatibility%20with%20stretch%20extension.%0A%20%20%20%20%20%20this.wrapWidth%20%3D%20this.textWidth%20%2F%20(Math.abs(this.drawable.scale%5B0%5D)%20%2F%20100)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20_getFontStyle%20()%20%7B%0A%20%20%20%20%20%20return%20%60%24%7Bthis.calculatedFontSize%7Dpx%20%22%24%7Bthis.fontFamily%7D%22%2C%20sans-serif%60%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20_reflowText%20()%20%7B%0A%20%20%20%20%20%20this._textDirty%20%3D%20false%3B%0A%20%20%20%20%20%20this._textureDirty%20%3D%20true%3B%0A%20%20%20%20%20%20this._reflowTime%20%3D%20globalFrameTime%3B%0A%20%20%20%20%20%20this._previousDrawableXScale%20%3D%20Math.abs(this.drawable.scale%5B0%5D)%3B%0A%0A%20%20%20%20%20%20this._updateFontDimensions()%3B%0A%20%20%20%20%20%20this.ctx.font%20%3D%20this._getFontStyle()%3B%0A%0A%20%20%20%20%20%20%2F%2F%20need%20to%20make%20new%20ones%20each%20time%20to%20avoid%20caching%20incorrectly%20across%20fonts%0A%20%20%20%20%20%20const%20measurementProvider%20%3D%20new%20CanvasMeasurementProvider(this.ctx)%3B%0A%20%20%20%20%20%20%2F**%20%40type%20%7BRenderWebGL.TextWrapper%7D%20*%2F%0A%20%20%20%20%20%20const%20textWrapper%20%3D%20renderer.createTextWrapper(measurementProvider)%3B%0A%0A%20%20%20%20%20%20const%20lines%20%3D%20textWrapper.wrapText(this.wrapWidth%2C%20this.text)%3B%0A%20%20%20%20%20%20this.lines%20%3D%20lines.map(line%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20const%20trimmed%20%3D%20line.trimEnd()%3B%0A%20%20%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20%20%20text%3A%20trimmed%2C%0A%20%20%20%20%20%20%20%20%20%20width%3A%20measurementProvider.measureText(trimmed)%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%20%20this._size%5B0%5D%20%3D%20this.wrapWidth%3B%0A%20%20%20%20%20%20this._size%5B1%5D%20%3D%20this.lines.length%20*%20this.lineHeight%20%2B%202%20*%20this.verticalPadding%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Centered%20horizontally%0A%20%20%20%20%20%20this._rotationCenter%5B0%5D%20%3D%20this._size%5B0%5D%20%2F%202%3B%0A%20%20%20%20%20%20%2F%2F%20Vertical%20center%20is%20roughly%20below%20the%20first%20line%20of%20text%0A%20%20%20%20%20%20this._rotationCenter%5B1%5D%20%3D%20this.calculatedFontSize%20*%200.9%20%2B%20this.verticalPadding%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20_renderAtScale%20(requestedScale)%20%7B%0A%20%20%20%20%20%20this._renderedAtScale%20%3D%20requestedScale%3B%0A%20%20%20%20%20%20this._textureDirty%20%3D%20false%3B%0A%20%20%20%20%20%20this._renderTime%20%3D%20globalFrameTime%3B%0A%0A%20%20%20%20%20%20const%20scratchWidth%20%3D%20this._size%5B0%5D%3B%0A%20%20%20%20%20%20const%20scratchHeight%20%3D%20this._size%5B1%5D%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Renderer's%20requested%20scale%20is%20accounted%20for%20at%20this%20point.%20Do%20not%20touch%20%60requestedScale%60%0A%20%20%20%20%20%20%2F%2F%20ever%20after%20this%20point.%0A%20%20%20%20%20%20this.canvas.width%20%3D%20Math.ceil(scratchWidth%20*%20requestedScale)%3B%0A%20%20%20%20%20%20this.canvas.height%20%3D%20Math.ceil(scratchHeight%20*%20requestedScale)%3B%0A%20%20%20%20%20%20this.ctx.scale(requestedScale%2C%20requestedScale)%3B%0A%0A%20%20%20%20%20%20const%20rainbowOffset%20%3D%20this.isRainbow%20%3F%20(globalFrameTime%20-%20this.rainbowStartTime)%20%2F%20RAINBOW_TIME_PER%20%3A%200%3B%0A%20%20%20%20%20%20this.ctx.fillStyle%20%3D%20this.color%3B%0A%20%20%20%20%20%20this.ctx.font%20%3D%20this._getFontStyle()%3B%0A%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20this.lines.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20const%20line%20%3D%20this.lines%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20const%20text%20%3D%20line.text%3B%0A%20%20%20%20%20%20%20%20const%20lineWidth%20%3D%20line.width%3B%0A%0A%20%20%20%20%20%20%20%20let%20xOffset%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20(this.align%20%3D%3D%3D%20ALIGN_LEFT)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20already%20correct%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(this.align%20%3D%3D%3D%20ALIGN_CENTER)%20%7B%0A%20%20%20%20%20%20%20%20%20%20xOffset%20%3D%20(this.wrapWidth%20-%20lineWidth)%20%2F%202%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20xOffset%20%3D%20this.wrapWidth%20-%20lineWidth%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(this.isRainbow)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20gradient%20%3D%20this.ctx.createLinearGradient(xOffset%2C%200%2C%20xOffset%20%2B%20lineWidth%2C%200)%3B%0A%20%20%20%20%20%20%20%20%20%20addRainbowStops(gradient%2C%20rainbowOffset)%3B%0A%20%20%20%20%20%20%20%20%20%20this.ctx.fillStyle%20%3D%20gradient%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20TODO%3A%20something%20here%20is%20wrong%0A%20%20%20%20%20%20%20%20this.ctx.fillText(%0A%20%20%20%20%20%20%20%20%20%20text%2C%0A%20%20%20%20%20%20%20%20%20%20xOffset%2C%0A%20%20%20%20%20%20%20%20%20%20this.verticalPadding%20%2B%20i%20*%20this.lineHeight%20%2B%20this.baseFontSize%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20(!this._texture)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20%40ts-expect-error%20-%20twgl%20not%20typed%20yet%0A%20%20%20%20%20%20%20%20this._texture%20%3D%20twgl.createTexture(gl%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20auto%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20wrap%3A%20gl.CLAMP_TO_EDGE%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this._setTexture(this.canvas)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20_invalidateTexture%20()%20%7B%0A%20%20%20%20%20%20this._textureDirty%20%3D%20true%3B%0A%20%20%20%20%20%20this._renderTime%20%3D%200%3B%0A%20%20%20%20%20%20this.emitWasAltered()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20_invalidateText%20()%20%7B%0A%20%20%20%20%20%20this._textDirty%20%3D%20true%3B%0A%20%20%20%20%20%20this._textureDirty%20%3D%20true%3B%0A%20%20%20%20%20%20this._reflowTime%20%3D%200%3B%0A%20%20%20%20%20%20this.emitWasAltered()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setText%20(text)%20%7B%0A%20%20%20%20%20%20if%20(text%20!%3D%3D%20this.text)%20%7B%0A%20%20%20%20%20%20%20%20this.text%20%3D%20text%3B%0A%20%20%20%20%20%20%20%20this._invalidateText()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20setColor%20(color)%20%7B%0A%20%20%20%20%20%20if%20(color%20!%3D%3D%20this.color)%20%7B%0A%20%20%20%20%20%20%20%20this.color%20%3D%20color%3B%0A%20%20%20%20%20%20%20%20this._invalidateTexture()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20setAlign%20(align)%20%7B%0A%20%20%20%20%20%20if%20(align%20!%3D%3D%20this.align)%20%7B%0A%20%20%20%20%20%20%20%20this.align%20%3D%20align%3B%0A%20%20%20%20%20%20%20%20this._invalidateTexture()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20setWidth%20(width)%20%7B%0A%20%20%20%20%20%20if%20(width%20!%3D%3D%20this.textWidth)%20%7B%0A%20%20%20%20%20%20%20%20this.textWidth%20%3D%20width%3B%0A%20%20%20%20%20%20%20%20this._invalidateText()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20setFontFamily%20(font)%20%7B%0A%20%20%20%20%20%20if%20(font%20!%3D%3D%20this.fontFamily)%20%7B%0A%20%20%20%20%20%20%20%20this.fontFamily%20%3D%20font%3B%0A%20%20%20%20%20%20%20%20this._invalidateText()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20getFontFamily%20()%20%7B%0A%20%20%20%20%20%20return%20this.fontFamily%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getColor%20()%20%7B%0A%20%20%20%20%20%20return%20this.color%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getWidth%20()%20%7B%0A%20%20%20%20%20%20return%20this.textWidth%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20_oneAnimationAtATime%20(newCallback)%20%7B%0A%20%20%20%20%20%20this.cancelAnimation()%3B%0A%20%20%20%20%20%20return%20new%20Promise(resolve%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20this.resolveOngoingAnimation%20%3D%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.resolveOngoingAnimation%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%20%20resolve()%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20newCallback(this.resolveOngoingAnimation)%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20startTypeAnimation%20()%20%7B%0A%20%20%20%20%20%20return%20this._oneAnimationAtATime(resolve%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20const%20originalText%20%3D%20this.text%3B%0A%20%20%20%20%20%20%20%20let%20i%20%3D%201%3B%0A%20%20%20%20%20%20%20%20const%20update%20%3D%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.setText(originalText.substring(0%2C%20i))%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20update()%3B%0A%0A%20%20%20%20%20%20%20%20this.typeAnimationInterval%20%3D%20setInterval(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20i%2B%2B%3B%0A%20%20%20%20%20%20%20%20%20%20update()%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(i%20%3E%3D%20originalText.length)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clearInterval(this.typeAnimationInterval)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20resolve()%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%2C%20TYPE_DELAY)%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20startRainbowAnimation%20()%20%7B%0A%20%20%20%20%20%20return%20this._oneAnimationAtATime(resolve%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20this.isRainbow%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20this.rainbowStartTime%20%3D%20Date.now()%3B%0A%20%20%20%20%20%20%20%20this._invalidateTexture()%3B%0A%20%20%20%20%20%20%20%20this.rainbowTimeout%20%3D%20setTimeout(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.isRainbow%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20resolve()%3B%0A%20%20%20%20%20%20%20%20%20%20this._invalidateTexture()%3B%0A%20%20%20%20%20%20%20%20%7D%2C%20RAINBOW_DURATION)%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20startZoomAnimation%20()%20%7B%0A%20%20%20%20%20%20return%20this._oneAnimationAtATime(resolve%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20this.isZooming%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20this.zoomStartTime%20%3D%20Date.now()%3B%0A%20%20%20%20%20%20%20%20this._invalidateText()%3B%0A%20%20%20%20%20%20%20%20this.zoomTimeout%20%3D%20setTimeout(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.isZooming%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20resolve()%3B%0A%20%20%20%20%20%20%20%20%20%20this._invalidateText()%3B%0A%20%20%20%20%20%20%20%20%7D%2C%20ZOOM_DURATION)%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20cancelAnimation%20()%20%7B%0A%20%20%20%20%20%20if%20(this.resolveOngoingAnimation)%20%7B%0A%20%20%20%20%20%20%20%20this.resolveOngoingAnimation()%3B%0A%20%20%20%20%20%20%20%20this.resolveOngoingAnimation%20%3D%20null%3B%0A%0A%20%20%20%20%20%20%20%20clearInterval(this.typeAnimationInterval)%3B%0A%0A%20%20%20%20%20%20%20%20this.isRainbow%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20clearTimeout(this.rainbowTimeout)%3B%0A%0A%20%20%20%20%20%20%20%20this.isZooming%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20clearTimeout(this.zoomTimeout)%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20TODO%3A%20sometimes%20we%20only%20need%20to%20invalidate%20the%20texture%20at%20this%20point%0A%20%20%20%20%20%20%20%20this._invalidateText()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Part%20of%20Skin%20API%0A%20%20%20%20updateSilhouette%20(scale)%20%7B%0A%20%20%20%20%20%20this.getTexture(scale)%3B%0A%20%20%20%20%20%20this._silhouette.unlazy()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Part%20of%20Skin%20API%0A%20%20%20%20getTexture%20(scale)%20%7B%0A%20%20%20%20%20%20const%20MAX_SCALE%20%3D%2010%3B%0A%20%20%20%20%20%20const%20upperScale%20%3D%20scale%20%3F%20Math.max(Math.abs(scale%5B0%5D)%2C%20Math.abs(scale%5B1%5D))%20%3A%20100%3B%0A%20%20%20%20%20%20const%20calculatedScale%20%3D%20Math.min(MAX_SCALE%2C%20upperScale%20%2F%20100)%3B%0A%0A%20%20%20%20%20%20if%20(this._needsReflow())%20%7B%0A%20%20%20%20%20%20%20%20this._reflowText()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20this._textureDirty%20%7C%7C%0A%20%20%20%20%20%20%20%20(this.isRainbow%20%26%26%20this._renderTime%20!%3D%3D%20globalFrameTime)%20%7C%7C%0A%20%20%20%20%20%20%20%20calculatedScale%20!%3D%3D%20this._renderedAtScale%0A%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20this._renderAtScale(calculatedScale)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20this._texture%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20%2F**%0A%20%20%20*%20Note%20that%20the%20returned%20skin%20is%20only%20usable%20by%20the%20given%20target.%20Things%20will%20break%20if%20another%0A%20%20%20*%20target%20tries%20to%20use%20it.%0A%20%20%20*%20%40param%20%7BVM.Target%7D%20target%0A%20%20%20*%20%40returns%20%7BTextCostumeSkin%7D%0A%20%20%20*%2F%0A%20%20const%20createTextCostumeSkin%20%3D%20(target)%20%3D%3E%20%7B%0A%20%20%20%20const%20drawable%20%3D%20renderer._allDrawables%5Btarget.drawableID%5D%3B%0A%20%20%20%20const%20id%20%3D%20renderer._nextSkinId%2B%2B%3B%0A%20%20%20%20const%20skin%20%3D%20new%20TextCostumeSkin(id%2C%20drawable)%3B%0A%20%20%20%20renderer._allSkins%5Bid%5D%20%3D%20skin%3B%0A%20%20%20%20return%20skin%3B%0A%20%20%7D%3B%0A%0A%20%20vm.runtime.on('BEFORE_EXECUTE'%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20globalFrameTime%20%3D%20Date.now()%3B%0A%0A%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20renderer._allSkins.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20const%20skin%20%3D%20renderer._allSkins%5Bi%5D%3B%0A%20%20%20%20%20%20if%20(skin%20instanceof%20TextCostumeSkin%20%26%26%20(skin.isRainbow%20%7C%7C%20skin.isZooming))%20%7B%0A%20%20%20%20%20%20%20%20skin.emitWasAltered()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D)%3B%0A%0A%20%20class%20AnimatedText%20%7B%0A%20%20%20%20constructor%20()%20%7B%0A%20%20%20%20%20%20vm.runtime.on('PROJECT_START'%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20this._hideAllText()%3B%0A%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%20%20vm.runtime.on('PROJECT_STOP_ALL'%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20this._hideAllText()%3B%0A%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%20%20%2F%2F%20targetWasCreated%20does%20not%20work%20because%20it%20runs%20before%20the%20Drawable%20is%20set%20up%0A%20%20%20%20%20%20const%20extension%20%3D%20this%3B%0A%20%20%20%20%20%20const%20originalMakeClone%20%3D%20RenderedTarget.prototype.makeClone%3B%0A%20%20%20%20%20%20RenderedTarget.prototype.makeClone%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20%20%20const%20newClone%20%3D%20originalMakeClone.call(this)%3B%0A%20%20%20%20%20%20%20%20if%20(extension._hasState(this))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20TODO%3A%20creates%20much%20unneeded%20state%0A%20%20%20%20%20%20%20%20%20%20const%20originalSkin%20%3D%20extension._getState(this).skin%3B%0A%20%20%20%20%20%20%20%20%20%20const%20newSkin%20%3D%20extension._getState(newClone).skin%3B%0A%20%20%20%20%20%20%20%20%20%20newSkin.setAlign(originalSkin.align)%3B%0A%20%20%20%20%20%20%20%20%20%20newSkin.setColor(originalSkin.color)%3B%0A%20%20%20%20%20%20%20%20%20%20newSkin.setFontFamily(originalSkin.fontFamily)%3B%0A%20%20%20%20%20%20%20%20%20%20newSkin.setWidth(originalSkin.textWidth)%3B%0A%20%20%20%20%20%20%20%20%20%20newSkin.setText(originalSkin.text)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(renderer._allDrawables%5Bthis.drawableID%5D.skin%20instanceof%20TextCostumeSkin)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20renderer.updateDrawableSkinId(newClone.drawableID%2C%20newSkin.id)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20newClone%3B%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20vm.runtime.on('targetWasRemoved'%2C%20(target)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20if%20(this._hasState(target))%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20state%20%3D%20this._getState(target)%3B%0A%20%20%20%20%20%20%20%20%20%20renderer.destroySkin(state.skin.id)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getInfo()%20%7B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20id%3A%20'text'%2C%0A%20%20%20%20%20%20%20%20name%3A%20'Animated%20Text'%2C%0A%20%20%20%20%20%20%20%20blockIconURI%3A%20blockIconURI%2C%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'setText'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'show%20text%20%5BTEXT%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TEXT%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'Welcome%20to%20my%20project!'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'animateText'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'%5BANIMATE%5D%20text%20%5BTEXT%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ANIMATE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20'animate'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'rainbow'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TEXT%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'Here%20we%20go!'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'clearText'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'show%20sprite'%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20'---'%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'setFont'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'set%20font%20to%20%5BFONT%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20FONT%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20'font'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'setColor'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'set%20text%20color%20to%20%5BCOLOR%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COLOR%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.COLOR%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'setWidth'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'set%20width%20to%20%5BWIDTH%5D%20aligned%20%5BALIGN%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20WIDTH%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'200'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ALIGN%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20'align'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'labelNewBlocks'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.LABEL%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'Incompatible%20with%20Scratch%20Lab%3A'%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'textActive'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'is%20showing%20text%3F'%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'getTextAttribute'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'text%20%5BATTRIBUTE%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ATTRIBUTE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20'attribute'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20menus%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20These%20all%20need%20acceptReporters%3A%20false%20for%20parity%20with%20the%20Scratch%20Labs%20version.%0A%20%20%20%20%20%20%20%20%20%20animate%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B'type'%2C%20'rainbow'%2C%20'zoom'%5D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20font%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20...NATIVE_FONTS%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'random%20font'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20'Random'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20align%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20'left'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20'center'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20'right'%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20attribute%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20'font'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20'color'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20'width'%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40param%20%7BVM.Target%7D%20target%0A%20%20%20%20%20*%20%40returns%20%7BTextState%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20_getState%20(target)%20%7B%0A%20%20%20%20%20%20const%20state%20%3D%20target%5BCUSTOM_STATE_KEY%5D%3B%0A%20%20%20%20%20%20if%20(!state)%20%7B%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BTextState%7D%20*%2F%0A%20%20%20%20%20%20%20%20const%20newState%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20skin%3A%20createTextCostumeSkin(target)%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20target%5BCUSTOM_STATE_KEY%5D%20%3D%20newState%3B%0A%20%20%20%20%20%20%20%20return%20newState%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20state%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40param%20%7BVM.Target%7D%20target%0A%20%20%20%20%20*%20%40returns%20%7Bboolean%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20_hasState%20(target)%20%7B%0A%20%20%20%20%20%20return%20!!target%5BCUSTOM_STATE_KEY%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20_hideAllText%20()%20%7B%0A%20%20%20%20%20%20for%20(const%20target%20of%20vm.runtime.targets)%20%7B%0A%20%20%20%20%20%20%20%20if%20(this._hasState(target))%20%7B%0A%20%20%20%20%20%20%20%20%20%20this._hideText(target%2C%20this._getState(target))%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40param%20%7BVM.Target%7D%20target%0A%20%20%20%20%20*%20%40param%20%7BTextState%7D%20state%0A%20%20%20%20%20*%2F%0A%20%20%20%20_renderText%20(target%2C%20state)%20%7B%0A%20%20%20%20%20%20state.skin.cancelAnimation()%3B%0A%20%20%20%20%20%20renderer.updateDrawableSkinId(target.drawableID%2C%20state.skin.id)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40param%20%7BVM.Target%7D%20target%0A%20%20%20%20%20*%20%40param%20%7BTextState%7D%20state%0A%20%20%20%20%20*%2F%0A%20%20%20%20_hideText%20(target%2C%20state)%20%7B%0A%20%20%20%20%20%20state.skin.cancelAnimation()%3B%0A%20%20%20%20%20%20target.setCostume(target.currentCostume)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setText%20(%7B%20TEXT%20%7D%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%20%20%20%20%20%20this._renderText(util.target%2C%20state)%3B%0A%20%20%20%20%20%20state.skin.setText(Scratch.Cast.toString(TEXT))%3B%0A%20%20%20%20%20%20%2F%2F%20Scratch%20forces%201%20frame%20delay%20by%20returning%20promise.%20I%20think%20that's%20silly.%0A%20%20%20%20%20%20util.runtime.requestRedraw()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20animateText%20(%7B%20ANIMATE%2C%20TEXT%20%7D%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%20%20%20%20%20%20this._renderText(util.target%2C%20state)%3B%0A%0A%20%20%20%20%20%20state.skin.setText(Scratch.Cast.toString(TEXT))%3B%0A%20%20%20%20%20%20state.skin.cancelAnimation()%3B%0A%0A%20%20%20%20%20%20if%20(ANIMATE%20%3D%3D%3D%20'type')%20%7B%0A%20%20%20%20%20%20%20%20return%20state.skin.startTypeAnimation()%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(ANIMATE%20%3D%3D%3D%20'rainbow')%20%7B%0A%20%20%20%20%20%20%20%20return%20state.skin.startRainbowAnimation()%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(ANIMATE%20%3D%3D%3D%20'zoom')%20%7B%0A%20%20%20%20%20%20%20%20return%20state.skin.startZoomAnimation()%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Scratch%20does%20nothing%20here%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20clearText%20(args%2C%20util)%20%7B%0A%20%20%20%20%20%20if%20(this._hasState(util.target))%20%7B%0A%20%20%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%20%20%20%20%20%20%20%20this._hideText(util.target%2C%20state)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F%2F%20Scratch%20forces%201%20frame%20delay%20by%20returning%20promise.%20I%20think%20that's%20silly.%0A%20%20%20%20%20%20util.runtime.requestRedraw()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setFont%20(%7B%20FONT%20%7D%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%20%20%20%20%20%20if%20(FONT%20%3D%3D%3D%20'Random')%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Random%20font%20always%20switches%20to%20a%20new%20font%2C%20never%20the%20same%20one%0A%20%20%20%20%20%20%20%20const%20possibleFonts%20%3D%20NATIVE_FONTS.filter(i%20%3D%3E%20i%20!%3D%3D%20state.skin.fontFamily)%3B%0A%20%20%20%20%20%20%20%20state.skin.setFontFamily(possibleFonts%5BMath.floor(Math.random()%20*%20possibleFonts.length)%5D)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20state.skin.setFontFamily(Scratch.Cast.toString(FONT))%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20setColor%20(%7B%20COLOR%20%7D%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%20%20%20%20%20%20state.skin.setColor(Scratch.Cast.toString(COLOR))%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setWidth%20(%7B%20WIDTH%2C%20ALIGN%20%7D%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%0A%20%20%20%20%20%20if%20(ALIGN%20%3D%3D%3D%20'center')%20%7B%0A%20%20%20%20%20%20%20%20state.skin.setAlign(ALIGN_CENTER)%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(ALIGN%20%3D%3D%3D%20'right')%20%7B%0A%20%20%20%20%20%20%20%20state.skin.setAlign(ALIGN_RIGHT)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Scratch%20treats%20unknown%20values%20as%20left%20alignment.%0A%20%20%20%20%20%20%20%20state.skin.setAlign(ALIGN_LEFT)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20state.skin.setWidth(Scratch.Cast.toNumber(WIDTH))%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20textActive%20(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20drawableID%20%3D%20util.target.drawableID%3B%0A%20%20%20%20%20%20const%20skin%20%3D%20renderer._allDrawables%5BdrawableID%5D.skin%3B%0A%20%20%20%20%20%20return%20skin%20instanceof%20TextCostumeSkin%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getTextAttribute%20(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%20%20%20%20%20%20const%20attrib%20%3D%20args.ATTRIBUTE%3B%0A%20%20%20%20%20%20if%20(attrib%20%3D%3D%3D%20'font')%20%7B%0A%20%20%20%20%20%20%20%20return%20state.skin.getFontFamily()%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(attrib%20%3D%3D%3D%20'color')%20%7B%0A%20%20%20%20%20%20%20%20return%20state.skin.getColor()%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(attrib%20%3D%3D%3D%20'width')%20%7B%0A%20%20%20%20%20%20%20%20return%20state.skin.getWidth()%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20should%20never%20happen%0A%20%20%20%20%20%20%20%20return%20''%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20Scratch.extensions.register(new%20AnimatedText())%3B%0A%7D)(Scratch)%3B%0A%20%7D)(Scratch)%3B","data:text/javascript;,(function(Scratch)%20%7B%20(function(Scratch)%20%7B%0A%20%20'use%20strict'%3B%0A%0A%20%20if%20(!Scratch.extensions.unsandboxed)%20%7B%0A%20%20%20%20throw%20new%20Error('files%20extension%20must%20be%20run%20unsandboxed')%3B%0A%20%20%7D%0A%0A%20%20const%20MODE_MODAL%20%3D%20'modal'%3B%0A%20%20const%20MODE_IMMEDIATELY_SHOW_SELECTOR%20%3D%20'selector'%3B%0A%20%20const%20MODE_ONLY_SELECTOR%20%3D%20'only-selector'%3B%0A%20%20const%20ALL_MODES%20%3D%20%5BMODE_MODAL%2C%20MODE_IMMEDIATELY_SHOW_SELECTOR%2C%20MODE_ONLY_SELECTOR%5D%3B%0A%20%20let%20openFileSelectorMode%20%3D%20MODE_MODAL%3B%0A%0A%20%20const%20AS_TEXT%20%3D%20'text'%3B%0A%20%20const%20AS_DATA_URL%20%3D%20'url'%3B%0A%0A%20%20%2F**%0A%20%20%20*%20%40param%20%7Bstring%7D%20accept%20See%20MODE_%20constants%20above%0A%20%20%20*%20%40param%20%7Bstring%7D%20as%20See%20AS_%20constants%20above%0A%20%20%20*%20%40returns%20%7BPromise%3Cstring%3E%7D%20format%20given%20by%20as%20parameter%0A%20%20%20*%2F%0A%20%20const%20showFilePrompt%20%3D%20(accept%2C%20as)%20%3D%3E%20new%20Promise((_resolve)%20%3D%3E%20%7B%0A%20%20%20%20%2F%2F%20We%20can't%20reliably%20show%20an%20%3Cinput%3E%20picker%20without%20%22user%20interaction%22%20in%20all%20environments%2C%0A%20%20%20%20%2F%2F%20so%20we%20have%20to%20show%20our%20own%20UI%20anyways.%20We%20may%20as%20well%20use%20this%20to%20implement%20some%20nice%20features%0A%20%20%20%20%2F%2F%20that%20native%20file%20pickers%20don't%20have%3A%0A%20%20%20%20%2F%2F%20%20-%20Easy%20drag%2Bdrop%0A%20%20%20%20%2F%2F%20%20-%20Reliable%20cancel%20button%20(input%20cancel%20event%20is%20still%20basically%20nonexistent)%0A%20%20%20%20%2F%2F%20%20%20%20This%20is%20important%20so%20we%20can%20make%20this%20just%20a%20reporter%20instead%20of%20a%20command%2Bhat%20block.%0A%20%20%20%20%2F%2F%20%20%20%20Without%20an%20interface%2C%20the%20script%20would%20be%20stalled%20if%20the%20prompt%20was%20just%20cancelled.%0A%0A%20%20%20%20%2F**%20%40param%20%7Bstring%7D%20text%20*%2F%0A%20%20%20%20const%20callback%20%3D%20(text)%20%3D%3E%20%7B%0A%20%20%20%20%20%20_resolve(text)%3B%0A%20%20%20%20%20%20outer.remove()%3B%0A%20%20%20%20%20%20document.body.removeEventListener('keydown'%2C%20handleKeyDown)%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20let%20isReadingFile%20%3D%20false%3B%0A%0A%20%20%20%20%2F**%20%40param%20%7BFile%7D%20file%20*%2F%0A%20%20%20%20const%20readFile%20%3D%20(file)%20%3D%3E%20%7B%0A%20%20%20%20%20%20if%20(isReadingFile)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20isReadingFile%20%3D%20true%3B%0A%0A%20%20%20%20%20%20const%20reader%20%3D%20new%20FileReader()%3B%0A%20%20%20%20%20%20reader.onload%20%3D%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20callback(%2F**%20%40type%20%7Bstring%7D%20*%2F%20(reader.result))%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20reader.onerror%20%3D%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20console.error('Failed%20to%20read%20file%20as%20text'%2C%20reader.error)%3B%0A%20%20%20%20%20%20%20%20callback('')%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20if%20(as%20%3D%3D%3D%20AS_TEXT)%20%7B%0A%20%20%20%20%20%20%20%20reader.readAsText(file)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20reader.readAsDataURL(file)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F**%20%40param%20%7BKeyboardEvent%7D%20e%20*%2F%0A%20%20%20%20const%20handleKeyDown%20%3D%20(e)%20%3D%3E%20%7B%0A%20%20%20%20%20%20if%20(e.key%20%3D%3D%3D%20'Escape')%20%7B%0A%20%20%20%20%20%20%20%20e.stopPropagation()%3B%0A%20%20%20%20%20%20%20%20e.preventDefault()%3B%0A%20%20%20%20%20%20%20%20callback('')%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20document.body.addEventListener('keydown'%2C%20handleKeyDown%2C%20%7B%0A%20%20%20%20%20%20capture%3A%20true%0A%20%20%20%20%7D)%3B%0A%0A%20%20%20%20const%20INITIAL_BORDER_COLOR%20%3D%20'%23888'%3B%0A%20%20%20%20const%20DROPPING_BORDER_COLOR%20%3D%20'%2303a9fc'%3B%0A%0A%20%20%20%20const%20outer%20%3D%20document.createElement('div')%3B%0A%20%20%20%20outer.className%20%3D%20'extension-content'%3B%0A%20%20%20%20outer.style.position%20%3D%20'fixed'%3B%0A%20%20%20%20outer.style.top%20%3D%20'0'%3B%0A%20%20%20%20outer.style.left%20%3D%20'0'%3B%0A%20%20%20%20outer.style.width%20%3D%20'100%25'%3B%0A%20%20%20%20outer.style.height%20%3D%20'100%25'%3B%0A%20%20%20%20outer.style.display%20%3D%20'flex'%3B%0A%20%20%20%20outer.style.alignItems%20%3D%20'center'%3B%0A%20%20%20%20outer.style.justifyContent%20%3D%20'center'%3B%0A%20%20%20%20outer.style.background%20%3D%20'rgba(0%2C%200%2C%200%2C%200.5)'%3B%0A%20%20%20%20outer.style.zIndex%20%3D%20'20000'%3B%0A%20%20%20%20outer.style.color%20%3D%20'black'%3B%0A%20%20%20%20outer.style.colorScheme%20%3D%20'light'%3B%0A%20%20%20%20outer.addEventListener('dragover'%2C%20(e)%20%3D%3E%20%7B%0A%20%20%20%20%20%20if%20(e.dataTransfer.types.includes('Files'))%20%7B%0A%20%20%20%20%20%20%20%20e.preventDefault()%3B%0A%20%20%20%20%20%20%20%20e.dataTransfer.dropEffect%20%3D%20'copy'%3B%0A%20%20%20%20%20%20%20%20modal.style.borderColor%20%3D%20DROPPING_BORDER_COLOR%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%3B%0A%20%20%20%20outer.addEventListener('dragleave'%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20modal.style.borderColor%20%3D%20INITIAL_BORDER_COLOR%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20outer.addEventListener('drop'%2C%20(e)%20%3D%3E%20%7B%0A%20%20%20%20%20%20const%20file%20%3D%20e.dataTransfer.files%5B0%5D%3B%0A%20%20%20%20%20%20if%20(file)%20%7B%0A%20%20%20%20%20%20%20%20e.preventDefault()%3B%0A%20%20%20%20%20%20%20%20readFile(file)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%3B%0A%20%20%20%20outer.addEventListener('click'%2C%20(e)%20%3D%3E%20%7B%0A%20%20%20%20%20%20if%20(e.target%20%3D%3D%3D%20outer)%20%7B%0A%20%20%20%20%20%20%20%20callback('')%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%3B%0A%0A%20%20%20%20const%20modal%20%3D%20document.createElement('button')%3B%0A%20%20%20%20modal.style.boxShadow%20%3D%20'0%200%2010px%20-5px%20currentColor'%3B%0A%20%20%20%20modal.style.cursor%20%3D%20'pointer'%3B%0A%20%20%20%20modal.style.font%20%3D%20'inherit'%3B%0A%20%20%20%20modal.style.background%20%3D%20'white'%3B%0A%20%20%20%20modal.style.padding%20%3D%20'16px'%3B%0A%20%20%20%20modal.style.borderRadius%20%3D%20'16px'%3B%0A%20%20%20%20modal.style.border%20%3D%20%608px%20dashed%20%24%7BINITIAL_BORDER_COLOR%7D%60%3B%0A%20%20%20%20modal.style.position%20%3D%20'relative'%3B%0A%20%20%20%20modal.style.textAlign%20%3D%20'center'%3B%0A%20%20%20%20modal.addEventListener('click'%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20input.click()%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20modal.focus()%3B%0A%20%20%20%20outer.appendChild(modal)%3B%0A%0A%20%20%20%20const%20input%20%3D%20document.createElement('input')%3B%0A%20%20%20%20input.type%20%3D%20'file'%3B%0A%20%20%20%20input.accept%20%3D%20accept%3B%0A%20%20%20%20input.addEventListener('change'%2C%20(e)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%2F%2F%20%40ts-expect-error%0A%20%20%20%20%20%20const%20file%20%3D%20e.target.files%5B0%5D%3B%0A%20%20%20%20%20%20if%20(file)%20%7B%0A%20%20%20%20%20%20%20%20readFile(file)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%3B%0A%0A%20%20%20%20const%20title%20%3D%20document.createElement('div')%3B%0A%20%20%20%20title.textContent%20%3D%20'Select%20or%20drop%20file'%3B%0A%20%20%20%20title.style.fontSize%20%3D%20'1.5em'%3B%0A%20%20%20%20title.style.marginBottom%20%3D%20'8px'%3B%0A%20%20%20%20modal.appendChild(title)%3B%0A%0A%20%20%20%20const%20subtitle%20%3D%20document.createElement('div')%3B%0A%20%20%20%20const%20formattedAccept%20%3D%20accept%20%7C%7C%20'any'%3B%0A%20%20%20%20subtitle.textContent%20%3D%20%60Accepted%20formats%3A%20%24%7BformattedAccept%7D%60%3B%0A%20%20%20%20modal.appendChild(subtitle)%3B%0A%0A%20%20%20%20document.body.appendChild(outer)%3B%0A%0A%20%20%20%20if%20(openFileSelectorMode%20%3D%3D%3D%20MODE_IMMEDIATELY_SHOW_SELECTOR%20%7C%7C%20openFileSelectorMode%20%3D%3D%3D%20MODE_ONLY_SELECTOR)%20%7B%0A%20%20%20%20%20%20input.click()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20(openFileSelectorMode%20%3D%3D%3D%20MODE_ONLY_SELECTOR)%20%7B%0A%20%20%20%20%20%20%2F%2F%20Note%20that%20browser%20support%20for%20cancel%20is%20currently%20quite%20bad%0A%20%20%20%20%20%20input.addEventListener('cancel'%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20callback('')%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20outer.remove()%3B%0A%20%20%20%20%7D%0A%20%20%7D)%3B%0A%0A%20%20%2F**%0A%20%20%20*%20%40param%20%7Bstring%7D%20text%20Text%20to%20download%0A%20%20%20*%20%40param%20%7Bstring%7D%20file%20Name%20of%20the%20file%0A%20%20%20*%2F%0A%20%20const%20download%20%3D%20(text%2C%20file)%20%3D%3E%20%7B%0A%20%20%20%20const%20blob%20%3D%20new%20Blob(%5Btext%5D)%3B%0A%20%20%20%20const%20url%20%3D%20URL.createObjectURL(blob)%3B%0A%20%20%20%20const%20link%20%3D%20document.createElement('a')%3B%0A%20%20%20%20link.href%20%3D%20url%3B%0A%20%20%20%20link.download%20%3D%20file%3B%0A%20%20%20%20document.body.appendChild(link)%3B%0A%20%20%20%20link.click()%3B%0A%20%20%20%20link.remove()%3B%0A%20%20%20%20URL.revokeObjectURL(url)%3B%0A%20%20%7D%3B%0A%0A%20%20class%20Files%20%7B%0A%20%20%20%20getInfo%20()%20%7B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20id%3A%20'files'%2C%0A%20%20%20%20%20%20%20%20name%3A%20'Files'%2C%0A%20%20%20%20%20%20%20%20color1%3A%20'%23fcb103'%2C%0A%20%20%20%20%20%20%20%20color2%3A%20'%23db9a37'%2C%0A%20%20%20%20%20%20%20%20color3%3A%20'%23db8937'%2C%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'showPicker'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'open%20a%20file'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20true%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'showPickerExtensions'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'open%20a%20%5Bextension%5D%20file'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20extension%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'.txt'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20true%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'showPickerAs'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'open%20a%20file%20as%20%5Bas%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20as%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20'encoding'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'showPickerExtensionsAs'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'open%20a%20%5Bextension%5D%20file%20as%20%5Bas%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20extension%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'.txt'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20as%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20'encoding'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20'---'%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'download'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'download%20%5Btext%5D%20as%20%5Bfile%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'Hello%2C%20world!'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20file%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'save.txt'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'setOpenMode'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'set%20open%20file%20selector%20mode%20to%20%5Bmode%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20mode%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20MODE_MODAL%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20'automaticallyOpen'%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20menus%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20encoding%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'text'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20AS_TEXT%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'data%3A%20URL'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20AS_DATA_URL%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20automaticallyOpen%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'show%20modal'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20MODE_MODAL%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'open%20selector%20immediately'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20MODE_IMMEDIATELY_SHOW_SELECTOR%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20showPicker%20()%20%7B%0A%20%20%20%20%20%20return%20showFilePrompt(''%2C%20AS_TEXT)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20showPickerExtensions%20(args)%20%7B%0A%20%20%20%20%20%20return%20showFilePrompt(args.extension%2C%20AS_TEXT)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20showPickerAs%20(args)%20%7B%0A%20%20%20%20%20%20return%20showFilePrompt(''%2C%20args.as)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20showPickerExtensionsAs%20(args)%20%7B%0A%20%20%20%20%20%20return%20showFilePrompt(args.extension%2C%20args.as)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20download%20(args)%20%7B%0A%20%20%20%20%20%20download(args.text%2C%20args.file)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setOpenMode%20(args)%20%7B%0A%20%20%20%20%20%20if%20(ALL_MODES.includes(args.mode))%20%7B%0A%20%20%20%20%20%20%20%20openFileSelectorMode%20%3D%20args.mode%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20console.warn(%60unknown%20mode%60%2C%20args.mode)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20Scratch.extensions.register(new%20Files())%3B%0A%7D)(Scratch)%3B%0A%20%7D)(Scratch)%3B","data:text/javascript;,(function(Scratch)%20%7B%20%2F*%20eslint-disable%20no-empty-pattern%20*%2F%0A%2F*%20eslint-disable%20no-prototype-builtins%20*%2F%0A%2F*%0APen%2B%20Version%205%0AAuthor%20ObviousAlexC%0A%0ASpecial%20Thanks%20to%20Garbo%20for%20helping%20me%20with%20this%20new%20version.%0A%0AChangelog%3A%0AAdded%20Line%20blocks%0AFixed%20Color%20Blocks%0ASeperated%20Blocks%20into%20catagories%20just%20so%20I%20could%20edit%20them%20in%20the%20future%20without%20having%20to%20dig%20through%20a%20large%20blocks%20array!%0AFixed%20support%20for%20the%20Plugin%20Loader%0AMade%20cross%20platform%20with%20the%20same%20file%20by%20using%20conditional%20assignments!%0AConfirmed%20some%20doubts%20(see%20line%2052)%20%0ALearned%20that%20javascript%20had%20C%2B%2B%20like%20conditional%20assignments%0ADepracated%20spacial%20transformation%20block%0AAdded%20spacial%20changing%20block%0AOther%20various%20small%20fixes%0A*%2F%0A(function%20(Scratch)%20%7B%0A%20%20'use%20strict'%3B%0A%0A%20%20%2F%2F%20This%20is%20for%20compatibility%20with%20plugin%20loaders%20that%20don't%20implement%20window.Scratch.%0A%20%20%2F%2F%20This%20is%20a%20one-time%20exception.%20Similar%20code%20like%20this%20WILL%20NOT%20be%20accepted%20in%20new%20extensions%20without%0A%20%20%2F%2F%20significant%20justification.%0A%20%20if%20(!Scratch)%20%7B%0A%20%20%20%20Scratch%20%3D%20%7B%0A%20%20%20%20%20%20%2F%2F%20%40ts-expect-error%0A%20%20%20%20%20%20BlockType%3A%20%7B%0A%20%20%20%20%20%20%20%20COMMAND%3A%20'command'%2C%0A%20%20%20%20%20%20%20%20REPORTER%3A%20'reporter'%2C%0A%20%20%20%20%20%20%20%20BOOLEAN%3A%20'Boolean'%2C%0A%20%20%20%20%20%20%20%20HAT%3A%20'hat'%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%2F%2F%20%40ts-expect-error%0A%20%20%20%20%20%20ArgumentType%3A%20%7B%0A%20%20%20%20%20%20%20%20STRING%3A%20'string'%2C%0A%20%20%20%20%20%20%20%20NUMBER%3A%20'number'%2C%0A%20%20%20%20%20%20%20%20COLOR%3A%20'color'%2C%0A%20%20%20%20%20%20%20%20ANGLE%3A%20'angle'%2C%0A%20%20%20%20%20%20%20%20BOOLEAN%3A%20'Boolean'%2C%0A%20%20%20%20%20%20%20%20MATRIX%3A%20'matrix'%2C%0A%20%20%20%20%20%20%20%20NOTE%3A%20'note'%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%2F%2F%20%40ts-expect-error%0A%20%20%20%20%20%20vm%3A%20window.vm%2C%0A%20%20%20%20%20%20extensions%3A%20%7B%0A%20%20%20%20%20%20%20%20unsandboxed%3A%20true%2C%0A%20%20%20%20%20%20%20%20register%3A%20(object)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%40ts-expect-error%0A%20%20%20%20%20%20%20%20%20%20const%20serviceName%20%3D%20vm.extensionManager._registerInternalExtension(object)%3B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%40ts-expect-error%0A%20%20%20%20%20%20%20%20%20%20vm.extensionManager._loadedExtensions.set(object.getInfo().id%2C%20serviceName)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20if%20(!Scratch.vm)%20%7B%0A%20%20%20%20%20%20throw%20new%20Error('The%20VM%20does%20not%20exist')%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20if%20(!Scratch.extensions.unsandboxed)%20%7B%0A%20%20%20%20throw%20new%20Error('Pen%2B%20must%20be%20run%20unsandboxed')%3B%0A%20%20%7D%0A%0A%20%20const%20vm%20%3D%20Scratch.vm%3B%0A%20%20const%20runtime%20%3D%20vm.runtime%3B%0A%20%20const%20canvas%20%3D%20runtime.renderer.canvas%3B%0A%20%20const%20gl%20%3D%20runtime.renderer._gl%3B%0A%0A%20%20const%20EXAMPLE_IMAGE%20%3D%20'https%3A%2F%2Fextensions.turbowarp.org%2Fdango.png'%3B%0A%0A%20%20const%20blankImage%20%3D%20%22data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAAAIAAAACCAYAAABytg0kAAAAAXNSR0IArs4c6QAAABRJREFUGFdj%2FP%2F%2F%2F38GBgYGRhgDAFfVB%2FvDfnUlAAAAAElFTkSuQmCC%22%3B%0A%0A%20%20%2F%2F%20TODO%3A%20see%20how%20these%20differ%20from%20Scratch%2C%20if%20at%20all%0A%20%20%2F%2F%20Note%20to%20Garbo%20or%20any%20code%20checker%20it%20does%20it%20uses%20bilinear%20filtering!%0A%20%20gl.enable(gl.BLEND)%3B%0A%20%20gl.blendEquation(gl.FUNC_ADD)%3B%0A%20%20gl.blendFunc(gl.ONE_MINUS_CONSTANT_ALPHA%2C%20gl.ONE_MINUS_SRC_ALPHA)%3B%0A%0A%20%20var%20stampWidth%20%3D%2064%3B%0A%20%20var%20stampHeight%20%3D%2064%3B%0A%0A%20%20var%20lineWidth%20%3D%20%5B1%2C%201%5D%3B%0A%20%20var%20lineColor%20%3D%20%7B%0A%20%20%20%20r%3A%201%2C%0A%20%20%20%20g%3A%201%2C%0A%20%20%20%20b%3A%201%2C%0A%20%20%20%20a%3A%201%0A%20%20%7D%3B%0A%0A%20%20var%20screenWidth%20%3D%20480%3B%0A%20%20var%20screenHeight%20%3D%20360%3B%0A%20%20var%20coordinateSpace%20%3D%20%22Canvas%22%3B%0A%0A%20%20var%20stampRotation%20%3D%2090%3B%0A%20%20var%20stampOffset%20%3D%20%5B0%2C%200%5D%3B%0A%0A%20%20const%20m4%20%3D%20(function%20()%20%7B%0A%20%20%20%20%2F*!%0A%20%20%20%20%20*%204x4%20matrix%20operation%20code%20is%20from%20https%3A%2F%2Fwebglfundamentals.org%2Fwebgl%2Fresources%2Fm4.js%0A%20%20%20%20%20*%20We%20have%20made%20some%20changes%3A%0A%20%20%20%20%20*%20%20-%20Fixed%20type%20errors%0A%20%20%20%20%20*%20%20-%20Changed%20code%20formatting%0A%20%20%20%20%20*%20%20-%20Removed%20unused%20functions%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20Copyright%202021%20GFXFundamentals.%0A%20%20%20%20%20*%20All%20rights%20reserved.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20Redistribution%20and%20use%20in%20source%20and%20binary%20forms%2C%20with%20or%20without%0A%20%20%20%20%20*%20modification%2C%20are%20permitted%20provided%20that%20the%20following%20conditions%20are%0A%20%20%20%20%20*%20met%3A%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%20%20%20%20*%20Redistributions%20of%20source%20code%20must%20retain%20the%20above%20copyright%0A%20%20%20%20%20*%20notice%2C%20this%20list%20of%20conditions%20and%20the%20following%20disclaimer.%0A%20%20%20%20%20*%20%20%20%20%20*%20Redistributions%20in%20binary%20form%20must%20reproduce%20the%20above%0A%20%20%20%20%20*%20copyright%20notice%2C%20this%20list%20of%20conditions%20and%20the%20following%20disclaimer%0A%20%20%20%20%20*%20in%20the%20documentation%20and%2For%20other%20materials%20provided%20with%20the%0A%20%20%20%20%20*%20distribution.%0A%20%20%20%20%20*%20%20%20%20%20*%20Neither%20the%20name%20of%20GFXFundamentals.%20nor%20the%20names%20of%20his%0A%20%20%20%20%20*%20contributors%20may%20be%20used%20to%20endorse%20or%20promote%20products%20derived%20from%0A%20%20%20%20%20*%20this%20software%20without%20specific%20prior%20written%20permission.%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20THIS%20SOFTWARE%20IS%20PROVIDED%20BY%20THE%20COPYRIGHT%20HOLDERS%20AND%20CONTRIBUTORS%0A%20%20%20%20%20*%20%22AS%20IS%22%20AND%20ANY%20EXPRESS%20OR%20IMPLIED%20WARRANTIES%2C%20INCLUDING%2C%20BUT%20NOT%0A%20%20%20%20%20*%20LIMITED%20TO%2C%20THE%20IMPLIED%20WARRANTIES%20OF%20MERCHANTABILITY%20AND%20FITNESS%20FOR%0A%20%20%20%20%20*%20A%20PARTICULAR%20PURPOSE%20ARE%20DISCLAIMED.%20IN%20NO%20EVENT%20SHALL%20THE%20COPYRIGHT%0A%20%20%20%20%20*%20OWNER%20OR%20CONTRIBUTORS%20BE%20LIABLE%20FOR%20ANY%20DIRECT%2C%20INDIRECT%2C%20INCIDENTAL%2C%0A%20%20%20%20%20*%20SPECIAL%2C%20EXEMPLARY%2C%20OR%20CONSEQUENTIAL%20DAMAGES%20(INCLUDING%2C%20BUT%20NOT%0A%20%20%20%20%20*%20LIMITED%20TO%2C%20PROCUREMENT%20OF%20SUBSTITUTE%20GOODS%20OR%20SERVICES%3B%20LOSS%20OF%20USE%2C%0A%20%20%20%20%20*%20DATA%2C%20OR%20PROFITS%3B%20OR%20BUSINESS%20INTERRUPTION)%20HOWEVER%20CAUSED%20AND%20ON%20ANY%0A%20%20%20%20%20*%20THEORY%20OF%20LIABILITY%2C%20WHETHER%20IN%20CONTRACT%2C%20STRICT%20LIABILITY%2C%20OR%20TORT%0A%20%20%20%20%20*%20(INCLUDING%20NEGLIGENCE%20OR%20OTHERWISE)%20ARISING%20IN%20ANY%20WAY%20OUT%20OF%20THE%20USE%0A%20%20%20%20%20*%20OF%20THIS%20SOFTWARE%2C%20EVEN%20IF%20ADVISED%20OF%20THE%20POSSIBILITY%20OF%20SUCH%20DAMAGE.%0A%20%20%20%20%20*%2F%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20An%20array%20or%20typed%20array%20with%203%20values.%0A%20%20%20%20%20*%20%40typedef%20%7Bnumber%5B%5D%7CFloat32Array%7D%20Vector3%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20An%20array%20or%20typed%20array%20with%204%20values.%0A%20%20%20%20%20*%20%40typedef%20%7Bnumber%5B%5D%7CFloat32Array%7D%20Vector4%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20An%20array%20or%20typed%20array%20with%2016%20values.%0A%20%20%20%20%20*%20%40typedef%20%7Bnumber%5B%5D%7CFloat32Array%7D%20Matrix4%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%0A%0A%20%20%20%20let%20MatType%20%3D%20Float32Array%3B%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Sets%20the%20type%20this%20library%20creates%20for%20a%20Mat4%0A%20%20%20%20%20*%20%40param%20%7BFloat32ArrayConstructor%7D%20Ctor%20the%20constructor%20for%20the%20type.%20Either%20%60Float32Array%60%20or%20%60Array%60%0A%20%20%20%20%20*%20%40return%20%7BFloat32ArrayConstructor%7D%20previous%20constructor%20for%20Mat4%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20setDefaultType(Ctor)%20%7B%0A%20%20%20%20%20%20const%20OldType%20%3D%20MatType%3B%0A%20%20%20%20%20%20MatType%20%3D%20Ctor%3B%0A%20%20%20%20%20%20return%20OldType%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Takes%20two%204-by-4%20matrices%2C%20a%20and%20b%2C%20and%20computes%20the%20product%20in%20the%20order%0A%20%20%20%20%20*%20that%20pre-composes%20b%20with%20a.%20%20In%20other%20words%2C%20the%20matrix%20returned%20will%0A%20%20%20%20%20*%20transform%20by%20b%20first%20and%20then%20a.%20%20Note%20this%20is%20subtly%20different%20from%20just%0A%20%20%20%20%20*%20multiplying%20the%20matrices%20together.%20%20For%20given%20a%20and%20b%2C%20this%20function%20returns%0A%20%20%20%20%20*%20the%20same%20object%20in%20both%20row-major%20and%20column-major%20mode.%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20a%20A%20matrix.%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20b%20A%20matrix.%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20%5Bdst%5D%20optional%20matrix%20to%20store%20result%0A%20%20%20%20%20*%20%40return%20%7BMatrix4%7D%20dst%20or%20a%20new%20matrix%20if%20none%20provided%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20multiply(a%2C%20b%2C%20dst)%20%7B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(16)%3B%0A%20%20%20%20%20%20var%20b00%20%3D%20b%5B0%20*%204%20%2B%200%5D%3B%0A%20%20%20%20%20%20var%20b01%20%3D%20b%5B0%20*%204%20%2B%201%5D%3B%0A%20%20%20%20%20%20var%20b02%20%3D%20b%5B0%20*%204%20%2B%202%5D%3B%0A%20%20%20%20%20%20var%20b03%20%3D%20b%5B0%20*%204%20%2B%203%5D%3B%0A%20%20%20%20%20%20var%20b10%20%3D%20b%5B1%20*%204%20%2B%200%5D%3B%0A%20%20%20%20%20%20var%20b11%20%3D%20b%5B1%20*%204%20%2B%201%5D%3B%0A%20%20%20%20%20%20var%20b12%20%3D%20b%5B1%20*%204%20%2B%202%5D%3B%0A%20%20%20%20%20%20var%20b13%20%3D%20b%5B1%20*%204%20%2B%203%5D%3B%0A%20%20%20%20%20%20var%20b20%20%3D%20b%5B2%20*%204%20%2B%200%5D%3B%0A%20%20%20%20%20%20var%20b21%20%3D%20b%5B2%20*%204%20%2B%201%5D%3B%0A%20%20%20%20%20%20var%20b22%20%3D%20b%5B2%20*%204%20%2B%202%5D%3B%0A%20%20%20%20%20%20var%20b23%20%3D%20b%5B2%20*%204%20%2B%203%5D%3B%0A%20%20%20%20%20%20var%20b30%20%3D%20b%5B3%20*%204%20%2B%200%5D%3B%0A%20%20%20%20%20%20var%20b31%20%3D%20b%5B3%20*%204%20%2B%201%5D%3B%0A%20%20%20%20%20%20var%20b32%20%3D%20b%5B3%20*%204%20%2B%202%5D%3B%0A%20%20%20%20%20%20var%20b33%20%3D%20b%5B3%20*%204%20%2B%203%5D%3B%0A%20%20%20%20%20%20var%20a00%20%3D%20a%5B0%20*%204%20%2B%200%5D%3B%0A%20%20%20%20%20%20var%20a01%20%3D%20a%5B0%20*%204%20%2B%201%5D%3B%0A%20%20%20%20%20%20var%20a02%20%3D%20a%5B0%20*%204%20%2B%202%5D%3B%0A%20%20%20%20%20%20var%20a03%20%3D%20a%5B0%20*%204%20%2B%203%5D%3B%0A%20%20%20%20%20%20var%20a10%20%3D%20a%5B1%20*%204%20%2B%200%5D%3B%0A%20%20%20%20%20%20var%20a11%20%3D%20a%5B1%20*%204%20%2B%201%5D%3B%0A%20%20%20%20%20%20var%20a12%20%3D%20a%5B1%20*%204%20%2B%202%5D%3B%0A%20%20%20%20%20%20var%20a13%20%3D%20a%5B1%20*%204%20%2B%203%5D%3B%0A%20%20%20%20%20%20var%20a20%20%3D%20a%5B2%20*%204%20%2B%200%5D%3B%0A%20%20%20%20%20%20var%20a21%20%3D%20a%5B2%20*%204%20%2B%201%5D%3B%0A%20%20%20%20%20%20var%20a22%20%3D%20a%5B2%20*%204%20%2B%202%5D%3B%0A%20%20%20%20%20%20var%20a23%20%3D%20a%5B2%20*%204%20%2B%203%5D%3B%0A%20%20%20%20%20%20var%20a30%20%3D%20a%5B3%20*%204%20%2B%200%5D%3B%0A%20%20%20%20%20%20var%20a31%20%3D%20a%5B3%20*%204%20%2B%201%5D%3B%0A%20%20%20%20%20%20var%20a32%20%3D%20a%5B3%20*%204%20%2B%202%5D%3B%0A%20%20%20%20%20%20var%20a33%20%3D%20a%5B3%20*%204%20%2B%203%5D%3B%0A%20%20%20%20%20%20dst%5B0%5D%20%3D%20b00%20*%20a00%20%2B%20b01%20*%20a10%20%2B%20b02%20*%20a20%20%2B%20b03%20*%20a30%3B%0A%20%20%20%20%20%20dst%5B1%5D%20%3D%20b00%20*%20a01%20%2B%20b01%20*%20a11%20%2B%20b02%20*%20a21%20%2B%20b03%20*%20a31%3B%0A%20%20%20%20%20%20dst%5B2%5D%20%3D%20b00%20*%20a02%20%2B%20b01%20*%20a12%20%2B%20b02%20*%20a22%20%2B%20b03%20*%20a32%3B%0A%20%20%20%20%20%20dst%5B3%5D%20%3D%20b00%20*%20a03%20%2B%20b01%20*%20a13%20%2B%20b02%20*%20a23%20%2B%20b03%20*%20a33%3B%0A%20%20%20%20%20%20dst%5B4%5D%20%3D%20b10%20*%20a00%20%2B%20b11%20*%20a10%20%2B%20b12%20*%20a20%20%2B%20b13%20*%20a30%3B%0A%20%20%20%20%20%20dst%5B5%5D%20%3D%20b10%20*%20a01%20%2B%20b11%20*%20a11%20%2B%20b12%20*%20a21%20%2B%20b13%20*%20a31%3B%0A%20%20%20%20%20%20dst%5B6%5D%20%3D%20b10%20*%20a02%20%2B%20b11%20*%20a12%20%2B%20b12%20*%20a22%20%2B%20b13%20*%20a32%3B%0A%20%20%20%20%20%20dst%5B7%5D%20%3D%20b10%20*%20a03%20%2B%20b11%20*%20a13%20%2B%20b12%20*%20a23%20%2B%20b13%20*%20a33%3B%0A%20%20%20%20%20%20dst%5B8%5D%20%3D%20b20%20*%20a00%20%2B%20b21%20*%20a10%20%2B%20b22%20*%20a20%20%2B%20b23%20*%20a30%3B%0A%20%20%20%20%20%20dst%5B9%5D%20%3D%20b20%20*%20a01%20%2B%20b21%20*%20a11%20%2B%20b22%20*%20a21%20%2B%20b23%20*%20a31%3B%0A%20%20%20%20%20%20dst%5B10%5D%20%3D%20b20%20*%20a02%20%2B%20b21%20*%20a12%20%2B%20b22%20*%20a22%20%2B%20b23%20*%20a32%3B%0A%20%20%20%20%20%20dst%5B11%5D%20%3D%20b20%20*%20a03%20%2B%20b21%20*%20a13%20%2B%20b22%20*%20a23%20%2B%20b23%20*%20a33%3B%0A%20%20%20%20%20%20dst%5B12%5D%20%3D%20b30%20*%20a00%20%2B%20b31%20*%20a10%20%2B%20b32%20*%20a20%20%2B%20b33%20*%20a30%3B%0A%20%20%20%20%20%20dst%5B13%5D%20%3D%20b30%20*%20a01%20%2B%20b31%20*%20a11%20%2B%20b32%20*%20a21%20%2B%20b33%20*%20a31%3B%0A%20%20%20%20%20%20dst%5B14%5D%20%3D%20b30%20*%20a02%20%2B%20b31%20*%20a12%20%2B%20b32%20*%20a22%20%2B%20b33%20*%20a32%3B%0A%20%20%20%20%20%20dst%5B15%5D%20%3D%20b30%20*%20a03%20%2B%20b31%20*%20a13%20%2B%20b32%20*%20a23%20%2B%20b33%20*%20a33%3B%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20adds%202%20vectors3s%0A%20%20%20%20%20*%20%40param%20%7BVector3%7D%20a%20a%0A%20%20%20%20%20*%20%40param%20%7BVector3%7D%20b%20b%0A%20%20%20%20%20*%20%40param%20%7BVector3%7D%20%5Bdst%5D%20optional%20vector3%20to%20store%20result%0A%20%20%20%20%20*%20%40return%20%7BVector3%7D%20dst%20or%20new%20Vector3%20if%20not%20provided%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20addVectors(a%2C%20b%2C%20dst)%20%7B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(3)%3B%0A%20%20%20%20%20%20dst%5B0%5D%20%3D%20a%5B0%5D%20%2B%20b%5B0%5D%3B%0A%20%20%20%20%20%20dst%5B1%5D%20%3D%20a%5B1%5D%20%2B%20b%5B1%5D%3B%0A%20%20%20%20%20%20dst%5B2%5D%20%3D%20a%5B2%5D%20%2B%20b%5B2%5D%3B%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20subtracts%202%20vectors3s%0A%20%20%20%20%20*%20%40param%20%7BVector3%7D%20a%20a%0A%20%20%20%20%20*%20%40param%20%7BVector3%7D%20b%20b%0A%20%20%20%20%20*%20%40param%20%7BVector3%7D%20%5Bdst%5D%20optional%20vector3%20to%20store%20result%0A%20%20%20%20%20*%20%40return%20%7BVector3%7D%20dst%20or%20new%20Vector3%20if%20not%20provided%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20subtractVectors(a%2C%20b%2C%20dst)%20%7B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(3)%3B%0A%20%20%20%20%20%20dst%5B0%5D%20%3D%20a%5B0%5D%20-%20b%5B0%5D%3B%0A%20%20%20%20%20%20dst%5B1%5D%20%3D%20a%5B1%5D%20-%20b%5B1%5D%3B%0A%20%20%20%20%20%20dst%5B2%5D%20%3D%20a%5B2%5D%20-%20b%5B2%5D%3B%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20scale%20vectors3%0A%20%20%20%20%20*%20%40param%20%7BVector3%7D%20v%20vector%0A%20%20%20%20%20*%20%40param%20%7BNumber%7D%20s%20scale%0A%20%20%20%20%20*%20%40param%20%7BVector3%7D%20%5Bdst%5D%20optional%20vector3%20to%20store%20result%0A%20%20%20%20%20*%20%40return%20%7BVector3%7D%20dst%20or%20new%20Vector3%20if%20not%20provided%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20scaleVector(v%2C%20s%2C%20dst)%20%7B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(3)%3B%0A%20%20%20%20%20%20dst%5B0%5D%20%3D%20v%5B0%5D%20*%20s%3B%0A%20%20%20%20%20%20dst%5B1%5D%20%3D%20v%5B1%5D%20*%20s%3B%0A%20%20%20%20%20%20dst%5B2%5D%20%3D%20v%5B2%5D%20*%20s%3B%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20normalizes%20a%20vector.%0A%20%20%20%20%20*%20%40param%20%7BVector3%7D%20v%20vector%20to%20normalize%0A%20%20%20%20%20*%20%40param%20%7BVector3%7D%20%5Bdst%5D%20optional%20vector3%20to%20store%20result%0A%20%20%20%20%20*%20%40return%20%7BVector3%7D%20dst%20or%20new%20Vector3%20if%20not%20provided%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20normalize(v%2C%20dst)%20%7B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(3)%3B%0A%20%20%20%20%20%20var%20length%20%3D%20Math.sqrt(v%5B0%5D%20*%20v%5B0%5D%20%2B%20v%5B1%5D%20*%20v%5B1%5D%20%2B%20v%5B2%5D%20*%20v%5B2%5D)%3B%0A%20%20%20%20%20%20%2F%2F%20make%20sure%20we%20don't%20divide%20by%200.%0A%20%20%20%20%20%20if%20(length%20%3E%200.00001)%20%7B%0A%20%20%20%20%20%20%20%20dst%5B0%5D%20%3D%20v%5B0%5D%20%2F%20length%3B%0A%20%20%20%20%20%20%20%20dst%5B1%5D%20%3D%20v%5B1%5D%20%2F%20length%3B%0A%20%20%20%20%20%20%20%20dst%5B2%5D%20%3D%20v%5B2%5D%20%2F%20length%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Computes%20the%20length%20of%20a%20vector%0A%20%20%20%20%20*%20%40param%20%7BVector3%7D%20v%20vector%20to%20take%20length%20of%0A%20%20%20%20%20*%20%40return%20%7Bnumber%7D%20length%20of%20vector%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20length(v)%20%7B%0A%20%20%20%20%20%20return%20Math.sqrt(v%5B0%5D%20*%20v%5B0%5D%20%2B%20v%5B1%5D%20*%20v%5B1%5D%20%2B%20v%5B2%5D%20*%20v%5B2%5D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Computes%20the%20length%20squared%20of%20a%20vector%0A%20%20%20%20%20*%20%40param%20%7BVector3%7D%20v%20vector%20to%20take%20length%20of%0A%20%20%20%20%20*%20%40return%20%7Bnumber%7D%20length%20sqaured%20of%20vector%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20lengthSq(v)%20%7B%0A%20%20%20%20%20%20return%20v%5B0%5D%20*%20v%5B0%5D%20%2B%20v%5B1%5D%20*%20v%5B1%5D%20%2B%20v%5B2%5D%20*%20v%5B2%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Computes%20the%20cross%20product%20of%202%20vectors3s%0A%20%20%20%20%20*%20%40param%20%7BVector3%7D%20a%20a%0A%20%20%20%20%20*%20%40param%20%7BVector3%7D%20b%20b%0A%20%20%20%20%20*%20%40param%20%7BVector3%7D%20%5Bdst%5D%20optional%20vector3%20to%20store%20result%0A%20%20%20%20%20*%20%40return%20%7BVector3%7D%20dst%20or%20new%20Vector3%20if%20not%20provided%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20cross(a%2C%20b%2C%20dst)%20%7B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(3)%3B%0A%20%20%20%20%20%20dst%5B0%5D%20%3D%20a%5B1%5D%20*%20b%5B2%5D%20-%20a%5B2%5D%20*%20b%5B1%5D%3B%0A%20%20%20%20%20%20dst%5B1%5D%20%3D%20a%5B2%5D%20*%20b%5B0%5D%20-%20a%5B0%5D%20*%20b%5B2%5D%3B%0A%20%20%20%20%20%20dst%5B2%5D%20%3D%20a%5B0%5D%20*%20b%5B1%5D%20-%20a%5B1%5D%20*%20b%5B0%5D%3B%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Computes%20the%20dot%20product%20of%20two%20vectors%3B%20assumes%20both%20vectors%20have%0A%20%20%20%20%20*%20three%20entries.%0A%20%20%20%20%20*%20%40param%20%7BVector3%7D%20a%20Operand%20vector.%0A%20%20%20%20%20*%20%40param%20%7BVector3%7D%20b%20Operand%20vector.%0A%20%20%20%20%20*%20%40return%20%7Bnumber%7D%20dot%20product%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20dot(a%2C%20b)%20%7B%0A%20%20%20%20%20%20return%20(a%5B0%5D%20*%20b%5B0%5D)%20%2B%20(a%5B1%5D%20*%20b%5B1%5D)%20%2B%20(a%5B2%5D%20*%20b%5B2%5D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Computes%20the%20distance%20squared%20between%202%20points%0A%20%20%20%20%20*%20%40param%20%7BVector3%7D%20a%0A%20%20%20%20%20*%20%40param%20%7BVector3%7D%20b%0A%20%20%20%20%20*%20%40return%20%7Bnumber%7D%20distance%20squared%20between%20a%20and%20b%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20distanceSq(a%2C%20b)%20%7B%0A%20%20%20%20%20%20const%20dx%20%3D%20a%5B0%5D%20-%20b%5B0%5D%3B%0A%20%20%20%20%20%20const%20dy%20%3D%20a%5B1%5D%20-%20b%5B1%5D%3B%0A%20%20%20%20%20%20const%20dz%20%3D%20a%5B2%5D%20-%20b%5B2%5D%3B%0A%20%20%20%20%20%20return%20dx%20*%20dx%20%2B%20dy%20*%20dy%20%2B%20dz%20*%20dz%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Computes%20the%20distance%20between%202%20points%0A%20%20%20%20%20*%20%40param%20%7BVector3%7D%20a%0A%20%20%20%20%20*%20%40param%20%7BVector3%7D%20b%0A%20%20%20%20%20*%20%40return%20%7Bnumber%7D%20distance%20between%20a%20and%20b%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20distance(a%2C%20b)%20%7B%0A%20%20%20%20%20%20return%20Math.sqrt(distanceSq(a%2C%20b))%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Makes%20an%20identity%20matrix.%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20%5Bdst%5D%20optional%20matrix%20to%20store%20result%0A%20%20%20%20%20*%20%40return%20%7BMatrix4%7D%20dst%20or%20a%20new%20matrix%20if%20none%20provided%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20identity(dst)%20%7B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(16)%3B%0A%0A%20%20%20%20%20%20dst%5B0%5D%20%3D%201%3B%0A%20%20%20%20%20%20dst%5B1%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B2%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B3%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B4%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B5%5D%20%3D%201%3B%0A%20%20%20%20%20%20dst%5B6%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B7%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B8%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B9%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B10%5D%20%3D%201%3B%0A%20%20%20%20%20%20dst%5B11%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B12%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B13%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B14%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B15%5D%20%3D%201%3B%0A%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Transposes%20a%20matrix.%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20m%20matrix%20to%20transpose.%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20%5Bdst%5D%20optional%20matrix%20to%20store%20result%0A%20%20%20%20%20*%20%40return%20%7BMatrix4%7D%20dst%20or%20a%20new%20matrix%20if%20none%20provided%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20transpose(m%2C%20dst)%20%7B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(16)%3B%0A%0A%20%20%20%20%20%20dst%5B0%5D%20%3D%20m%5B0%5D%3B%0A%20%20%20%20%20%20dst%5B1%5D%20%3D%20m%5B4%5D%3B%0A%20%20%20%20%20%20dst%5B2%5D%20%3D%20m%5B8%5D%3B%0A%20%20%20%20%20%20dst%5B3%5D%20%3D%20m%5B12%5D%3B%0A%20%20%20%20%20%20dst%5B4%5D%20%3D%20m%5B1%5D%3B%0A%20%20%20%20%20%20dst%5B5%5D%20%3D%20m%5B5%5D%3B%0A%20%20%20%20%20%20dst%5B6%5D%20%3D%20m%5B9%5D%3B%0A%20%20%20%20%20%20dst%5B7%5D%20%3D%20m%5B13%5D%3B%0A%20%20%20%20%20%20dst%5B8%5D%20%3D%20m%5B2%5D%3B%0A%20%20%20%20%20%20dst%5B9%5D%20%3D%20m%5B6%5D%3B%0A%20%20%20%20%20%20dst%5B10%5D%20%3D%20m%5B10%5D%3B%0A%20%20%20%20%20%20dst%5B11%5D%20%3D%20m%5B14%5D%3B%0A%20%20%20%20%20%20dst%5B12%5D%20%3D%20m%5B3%5D%3B%0A%20%20%20%20%20%20dst%5B13%5D%20%3D%20m%5B7%5D%3B%0A%20%20%20%20%20%20dst%5B14%5D%20%3D%20m%5B11%5D%3B%0A%20%20%20%20%20%20dst%5B15%5D%20%3D%20m%5B15%5D%3B%0A%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Creates%20a%20lookAt%20matrix.%0A%20%20%20%20%20*%20This%20is%20a%20world%20matrix%20for%20a%20camera.%20In%20other%20words%20it%20will%20transform%0A%20%20%20%20%20*%20from%20the%20origin%20to%20a%20place%20and%20orientation%20in%20the%20world.%20For%20a%20view%0A%20%20%20%20%20*%20matrix%20take%20the%20inverse%20of%20this.%0A%20%20%20%20%20*%20%40param%20%7BVector3%7D%20cameraPosition%20position%20of%20the%20camera%0A%20%20%20%20%20*%20%40param%20%7BVector3%7D%20target%20position%20of%20the%20target%0A%20%20%20%20%20*%20%40param%20%7BVector3%7D%20up%20direction%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20%5Bdst%5D%20optional%20matrix%20to%20store%20result%0A%20%20%20%20%20*%20%40return%20%7BMatrix4%7D%20dst%20or%20a%20new%20matrix%20if%20none%20provided%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20lookAt(cameraPosition%2C%20target%2C%20up%2C%20dst)%20%7B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(16)%3B%0A%20%20%20%20%20%20var%20zAxis%20%3D%20normalize(subtractVectors(cameraPosition%2C%20target))%3B%0A%20%20%20%20%20%20var%20xAxis%20%3D%20normalize(cross(up%2C%20zAxis))%3B%0A%20%20%20%20%20%20var%20yAxis%20%3D%20normalize(cross(zAxis%2C%20xAxis))%3B%0A%0A%20%20%20%20%20%20dst%5B0%5D%20%3D%20xAxis%5B0%5D%3B%0A%20%20%20%20%20%20dst%5B1%5D%20%3D%20xAxis%5B1%5D%3B%0A%20%20%20%20%20%20dst%5B2%5D%20%3D%20xAxis%5B2%5D%3B%0A%20%20%20%20%20%20dst%5B3%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B4%5D%20%3D%20yAxis%5B0%5D%3B%0A%20%20%20%20%20%20dst%5B5%5D%20%3D%20yAxis%5B1%5D%3B%0A%20%20%20%20%20%20dst%5B6%5D%20%3D%20yAxis%5B2%5D%3B%0A%20%20%20%20%20%20dst%5B7%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B8%5D%20%3D%20zAxis%5B0%5D%3B%0A%20%20%20%20%20%20dst%5B9%5D%20%3D%20zAxis%5B1%5D%3B%0A%20%20%20%20%20%20dst%5B10%5D%20%3D%20zAxis%5B2%5D%3B%0A%20%20%20%20%20%20dst%5B11%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B12%5D%20%3D%20cameraPosition%5B0%5D%3B%0A%20%20%20%20%20%20dst%5B13%5D%20%3D%20cameraPosition%5B1%5D%3B%0A%20%20%20%20%20%20dst%5B14%5D%20%3D%20cameraPosition%5B2%5D%3B%0A%20%20%20%20%20%20dst%5B15%5D%20%3D%201%3B%0A%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Computes%20a%204-by-4%20perspective%20transformation%20matrix%20given%20the%20angular%20height%0A%20%20%20%20%20*%20of%20the%20frustum%2C%20the%20aspect%20ratio%2C%20and%20the%20near%20and%20far%20clipping%20planes.%20%20The%0A%20%20%20%20%20*%20arguments%20define%20a%20frustum%20extending%20in%20the%20negative%20z%20direction.%20%20The%20given%0A%20%20%20%20%20*%20angle%20is%20the%20vertical%20angle%20of%20the%20frustum%2C%20and%20the%20horizontal%20angle%20is%0A%20%20%20%20%20*%20determined%20to%20produce%20the%20given%20aspect%20ratio.%20%20The%20arguments%20near%20and%20far%20are%0A%20%20%20%20%20*%20the%20distances%20to%20the%20near%20and%20far%20clipping%20planes.%20%20Note%20that%20near%20and%20far%0A%20%20%20%20%20*%20are%20not%20z%20coordinates%2C%20but%20rather%20they%20are%20distances%20along%20the%20negative%0A%20%20%20%20%20*%20z-axis.%20%20The%20matrix%20generated%20sends%20the%20viewing%20frustum%20to%20the%20unit%20box.%0A%20%20%20%20%20*%20We%20assume%20a%20unit%20box%20extending%20from%20-1%20to%201%20in%20the%20x%20and%20y%20dimensions%20and%0A%20%20%20%20%20*%20from%20-1%20to%201%20in%20the%20z%20dimension.%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20fieldOfViewInRadians%20field%20of%20view%20in%20y%20axis.%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20aspect%20aspect%20of%20viewport%20(width%20%2F%20height)%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20near%20near%20Z%20clipping%20plane%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20far%20far%20Z%20clipping%20plane%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20%5Bdst%5D%20optional%20matrix%20to%20store%20result%0A%20%20%20%20%20*%20%40return%20%7BMatrix4%7D%20dst%20or%20a%20new%20matrix%20if%20none%20provided%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20perspective(fieldOfViewInRadians%2C%20aspect%2C%20near%2C%20far%2C%20dst)%20%7B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(16)%3B%0A%20%20%20%20%20%20var%20f%20%3D%20Math.tan(Math.PI%20*%200.5%20-%200.5%20*%20fieldOfViewInRadians)%3B%0A%20%20%20%20%20%20var%20rangeInv%20%3D%201.0%20%2F%20(near%20-%20far)%3B%0A%0A%20%20%20%20%20%20dst%5B0%5D%20%3D%20f%20%2F%20aspect%3B%0A%20%20%20%20%20%20dst%5B1%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B2%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B3%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B4%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B5%5D%20%3D%20f%3B%0A%20%20%20%20%20%20dst%5B6%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B7%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B8%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B9%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B10%5D%20%3D%20(near%20%2B%20far)%20*%20rangeInv%3B%0A%20%20%20%20%20%20dst%5B11%5D%20%3D%20-1%3B%0A%20%20%20%20%20%20dst%5B12%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B13%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B14%5D%20%3D%20near%20*%20far%20*%20rangeInv%20*%202%3B%0A%20%20%20%20%20%20dst%5B15%5D%20%3D%200%3B%0A%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Computes%20a%204-by-4%20orthographic%20projection%20matrix%20given%20the%20coordinates%20of%20the%0A%20%20%20%20%20*%20planes%20defining%20the%20axis-aligned%2C%20box-shaped%20viewing%20volume.%20%20The%20matrix%0A%20%20%20%20%20*%20generated%20sends%20that%20box%20to%20the%20unit%20box.%20%20Note%20that%20although%20left%20and%20right%0A%20%20%20%20%20*%20are%20x%20coordinates%20and%20bottom%20and%20top%20are%20y%20coordinates%2C%20near%20and%20far%0A%20%20%20%20%20*%20are%20not%20z%20coordinates%2C%20but%20rather%20they%20are%20distances%20along%20the%20negative%0A%20%20%20%20%20*%20z-axis.%20%20We%20assume%20a%20unit%20box%20extending%20from%20-1%20to%201%20in%20the%20x%20and%20y%0A%20%20%20%20%20*%20dimensions%20and%20from%20-1%20to%201%20in%20the%20z%20dimension.%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20left%20The%20x%20coordinate%20of%20the%20left%20plane%20of%20the%20box.%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20right%20The%20x%20coordinate%20of%20the%20right%20plane%20of%20the%20box.%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20bottom%20The%20y%20coordinate%20of%20the%20bottom%20plane%20of%20the%20box.%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20top%20The%20y%20coordinate%20of%20the%20right%20plane%20of%20the%20box.%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20near%20The%20negative%20z%20coordinate%20of%20the%20near%20plane%20of%20the%20box.%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20far%20The%20negative%20z%20coordinate%20of%20the%20far%20plane%20of%20the%20box.%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20%5Bdst%5D%20optional%20matrix%20to%20store%20result%0A%20%20%20%20%20*%20%40return%20%7BMatrix4%7D%20dst%20or%20a%20new%20matrix%20if%20none%20provided%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20orthographic(left%2C%20right%2C%20bottom%2C%20top%2C%20near%2C%20far%2C%20dst)%20%7B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(16)%3B%0A%0A%20%20%20%20%20%20dst%5B0%5D%20%3D%202%20%2F%20(right%20-%20left)%3B%0A%20%20%20%20%20%20dst%5B1%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B2%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B3%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B4%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B5%5D%20%3D%202%20%2F%20(top%20-%20bottom)%3B%0A%20%20%20%20%20%20dst%5B6%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B7%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B8%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B9%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B10%5D%20%3D%202%20%2F%20(near%20-%20far)%3B%0A%20%20%20%20%20%20dst%5B11%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B12%5D%20%3D%20(left%20%2B%20right)%20%2F%20(left%20-%20right)%3B%0A%20%20%20%20%20%20dst%5B13%5D%20%3D%20(bottom%20%2B%20top)%20%2F%20(bottom%20-%20top)%3B%0A%20%20%20%20%20%20dst%5B14%5D%20%3D%20(near%20%2B%20far)%20%2F%20(near%20-%20far)%3B%0A%20%20%20%20%20%20dst%5B15%5D%20%3D%201%3B%0A%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Computes%20a%204-by-4%20perspective%20transformation%20matrix%20given%20the%20left%2C%20right%2C%0A%20%20%20%20%20*%20top%2C%20bottom%2C%20near%20and%20far%20clipping%20planes.%20The%20arguments%20define%20a%20frustum%0A%20%20%20%20%20*%20extending%20in%20the%20negative%20z%20direction.%20The%20arguments%20near%20and%20far%20are%20the%0A%20%20%20%20%20*%20distances%20to%20the%20near%20and%20far%20clipping%20planes.%20Note%20that%20near%20and%20far%20are%20not%0A%20%20%20%20%20*%20z%20coordinates%2C%20but%20rather%20they%20are%20distances%20along%20the%20negative%20z-axis.%20The%0A%20%20%20%20%20*%20matrix%20generated%20sends%20the%20viewing%20frustum%20to%20the%20unit%20box.%20We%20assume%20a%20unit%0A%20%20%20%20%20*%20box%20extending%20from%20-1%20to%201%20in%20the%20x%20and%20y%20dimensions%20and%20from%20-1%20to%201%20in%20the%20z%0A%20%20%20%20%20*%20dimension.%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20left%20The%20x%20coordinate%20of%20the%20left%20plane%20of%20the%20box.%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20right%20The%20x%20coordinate%20of%20the%20right%20plane%20of%20the%20box.%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20bottom%20The%20y%20coordinate%20of%20the%20bottom%20plane%20of%20the%20box.%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20top%20The%20y%20coordinate%20of%20the%20right%20plane%20of%20the%20box.%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20near%20The%20negative%20z%20coordinate%20of%20the%20near%20plane%20of%20the%20box.%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20far%20The%20negative%20z%20coordinate%20of%20the%20far%20plane%20of%20the%20box.%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20%5Bdst%5D%20optional%20matrix%20to%20store%20result%0A%20%20%20%20%20*%20%40return%20%7BMatrix4%7D%20dst%20or%20a%20new%20matrix%20if%20none%20provided%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20frustum(left%2C%20right%2C%20bottom%2C%20top%2C%20near%2C%20far%2C%20dst)%20%7B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(16)%3B%0A%0A%20%20%20%20%20%20var%20dx%20%3D%20right%20-%20left%3B%0A%20%20%20%20%20%20var%20dy%20%3D%20top%20-%20bottom%3B%0A%20%20%20%20%20%20var%20dz%20%3D%20far%20-%20near%3B%0A%0A%20%20%20%20%20%20dst%5B0%5D%20%3D%202%20*%20near%20%2F%20dx%3B%0A%20%20%20%20%20%20dst%5B1%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B2%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B3%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B4%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B5%5D%20%3D%202%20*%20near%20%2F%20dy%3B%0A%20%20%20%20%20%20dst%5B6%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B7%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B8%5D%20%3D%20(left%20%2B%20right)%20%2F%20dx%3B%0A%20%20%20%20%20%20dst%5B9%5D%20%3D%20(top%20%2B%20bottom)%20%2F%20dy%3B%0A%20%20%20%20%20%20dst%5B10%5D%20%3D%20-(far%20%2B%20near)%20%2F%20dz%3B%0A%20%20%20%20%20%20dst%5B11%5D%20%3D%20-1%3B%0A%20%20%20%20%20%20dst%5B12%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B13%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B14%5D%20%3D%20-2%20*%20near%20*%20far%20%2F%20dz%3B%0A%20%20%20%20%20%20dst%5B15%5D%20%3D%200%3B%0A%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Makes%20a%20translation%20matrix%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20tx%20x%20translation.%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20ty%20y%20translation.%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20tz%20z%20translation.%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20%5Bdst%5D%20optional%20matrix%20to%20store%20result%0A%20%20%20%20%20*%20%40return%20%7BMatrix4%7D%20dst%20or%20a%20new%20matrix%20if%20none%20provided%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20translation(tx%2C%20ty%2C%20tz%2C%20dst)%20%7B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(16)%3B%0A%0A%20%20%20%20%20%20dst%5B0%5D%20%3D%201%3B%0A%20%20%20%20%20%20dst%5B1%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B2%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B3%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B4%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B5%5D%20%3D%201%3B%0A%20%20%20%20%20%20dst%5B6%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B7%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B8%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B9%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B10%5D%20%3D%201%3B%0A%20%20%20%20%20%20dst%5B11%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B12%5D%20%3D%20tx%3B%0A%20%20%20%20%20%20dst%5B13%5D%20%3D%20ty%3B%0A%20%20%20%20%20%20dst%5B14%5D%20%3D%20tz%3B%0A%20%20%20%20%20%20dst%5B15%5D%20%3D%201%3B%0A%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Multiply%20by%20translation%20matrix.%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20m%20matrix%20to%20multiply%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20tx%20x%20translation.%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20ty%20y%20translation.%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20tz%20z%20translation.%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20%5Bdst%5D%20optional%20matrix%20to%20store%20result%0A%20%20%20%20%20*%20%40return%20%7BMatrix4%7D%20dst%20or%20a%20new%20matrix%20if%20none%20provided%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20translate(m%2C%20tx%2C%20ty%2C%20tz%2C%20dst)%20%7B%0A%20%20%20%20%20%20%2F%2F%20This%20is%20the%20optimized%20version%20of%0A%20%20%20%20%20%20%2F%2F%20return%20multiply(m%2C%20translation(tx%2C%20ty%2C%20tz)%2C%20dst)%3B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(16)%3B%0A%0A%20%20%20%20%20%20var%20m00%20%3D%20m%5B0%5D%3B%0A%20%20%20%20%20%20var%20m01%20%3D%20m%5B1%5D%3B%0A%20%20%20%20%20%20var%20m02%20%3D%20m%5B2%5D%3B%0A%20%20%20%20%20%20var%20m03%20%3D%20m%5B3%5D%3B%0A%20%20%20%20%20%20var%20m10%20%3D%20m%5B1%20*%204%20%2B%200%5D%3B%0A%20%20%20%20%20%20var%20m11%20%3D%20m%5B1%20*%204%20%2B%201%5D%3B%0A%20%20%20%20%20%20var%20m12%20%3D%20m%5B1%20*%204%20%2B%202%5D%3B%0A%20%20%20%20%20%20var%20m13%20%3D%20m%5B1%20*%204%20%2B%203%5D%3B%0A%20%20%20%20%20%20var%20m20%20%3D%20m%5B2%20*%204%20%2B%200%5D%3B%0A%20%20%20%20%20%20var%20m21%20%3D%20m%5B2%20*%204%20%2B%201%5D%3B%0A%20%20%20%20%20%20var%20m22%20%3D%20m%5B2%20*%204%20%2B%202%5D%3B%0A%20%20%20%20%20%20var%20m23%20%3D%20m%5B2%20*%204%20%2B%203%5D%3B%0A%20%20%20%20%20%20var%20m30%20%3D%20m%5B3%20*%204%20%2B%200%5D%3B%0A%20%20%20%20%20%20var%20m31%20%3D%20m%5B3%20*%204%20%2B%201%5D%3B%0A%20%20%20%20%20%20var%20m32%20%3D%20m%5B3%20*%204%20%2B%202%5D%3B%0A%20%20%20%20%20%20var%20m33%20%3D%20m%5B3%20*%204%20%2B%203%5D%3B%0A%0A%20%20%20%20%20%20if%20(m%20!%3D%3D%20dst)%20%7B%0A%20%20%20%20%20%20%20%20dst%5B0%5D%20%3D%20m00%3B%0A%20%20%20%20%20%20%20%20dst%5B1%5D%20%3D%20m01%3B%0A%20%20%20%20%20%20%20%20dst%5B2%5D%20%3D%20m02%3B%0A%20%20%20%20%20%20%20%20dst%5B3%5D%20%3D%20m03%3B%0A%20%20%20%20%20%20%20%20dst%5B4%5D%20%3D%20m10%3B%0A%20%20%20%20%20%20%20%20dst%5B5%5D%20%3D%20m11%3B%0A%20%20%20%20%20%20%20%20dst%5B6%5D%20%3D%20m12%3B%0A%20%20%20%20%20%20%20%20dst%5B7%5D%20%3D%20m13%3B%0A%20%20%20%20%20%20%20%20dst%5B8%5D%20%3D%20m20%3B%0A%20%20%20%20%20%20%20%20dst%5B9%5D%20%3D%20m21%3B%0A%20%20%20%20%20%20%20%20dst%5B10%5D%20%3D%20m22%3B%0A%20%20%20%20%20%20%20%20dst%5B11%5D%20%3D%20m23%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20dst%5B12%5D%20%3D%20m00%20*%20tx%20%2B%20m10%20*%20ty%20%2B%20m20%20*%20tz%20%2B%20m30%3B%0A%20%20%20%20%20%20dst%5B13%5D%20%3D%20m01%20*%20tx%20%2B%20m11%20*%20ty%20%2B%20m21%20*%20tz%20%2B%20m31%3B%0A%20%20%20%20%20%20dst%5B14%5D%20%3D%20m02%20*%20tx%20%2B%20m12%20*%20ty%20%2B%20m22%20*%20tz%20%2B%20m32%3B%0A%20%20%20%20%20%20dst%5B15%5D%20%3D%20m03%20*%20tx%20%2B%20m13%20*%20ty%20%2B%20m23%20*%20tz%20%2B%20m33%3B%0A%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Makes%20an%20x%20rotation%20matrix%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20angleInRadians%20amount%20to%20rotate%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20%5Bdst%5D%20optional%20matrix%20to%20store%20result%0A%20%20%20%20%20*%20%40return%20%7BMatrix4%7D%20dst%20or%20a%20new%20matrix%20if%20none%20provided%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20xRotation(angleInRadians%2C%20dst)%20%7B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(16)%3B%0A%20%20%20%20%20%20var%20c%20%3D%20Math.cos(angleInRadians)%3B%0A%20%20%20%20%20%20var%20s%20%3D%20Math.sin(angleInRadians)%3B%0A%0A%20%20%20%20%20%20dst%5B0%5D%20%3D%201%3B%0A%20%20%20%20%20%20dst%5B1%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B2%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B3%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B4%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B5%5D%20%3D%20c%3B%0A%20%20%20%20%20%20dst%5B6%5D%20%3D%20s%3B%0A%20%20%20%20%20%20dst%5B7%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B8%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B9%5D%20%3D%20-s%3B%0A%20%20%20%20%20%20dst%5B10%5D%20%3D%20c%3B%0A%20%20%20%20%20%20dst%5B11%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B12%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B13%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B14%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B15%5D%20%3D%201%3B%0A%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Multiply%20by%20an%20x%20rotation%20matrix%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20m%20matrix%20to%20multiply%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20angleInRadians%20amount%20to%20rotate%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20%5Bdst%5D%20optional%20matrix%20to%20store%20result%0A%20%20%20%20%20*%20%40return%20%7BMatrix4%7D%20dst%20or%20a%20new%20matrix%20if%20none%20provided%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20xRotate(m%2C%20angleInRadians%2C%20dst)%20%7B%0A%20%20%20%20%20%20%2F%2F%20this%20is%20the%20optimized%20version%20of%0A%20%20%20%20%20%20%2F%2F%20return%20multiply(m%2C%20xRotation(angleInRadians)%2C%20dst)%3B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(16)%3B%0A%0A%20%20%20%20%20%20var%20m10%20%3D%20m%5B4%5D%3B%0A%20%20%20%20%20%20var%20m11%20%3D%20m%5B5%5D%3B%0A%20%20%20%20%20%20var%20m12%20%3D%20m%5B6%5D%3B%0A%20%20%20%20%20%20var%20m13%20%3D%20m%5B7%5D%3B%0A%20%20%20%20%20%20var%20m20%20%3D%20m%5B8%5D%3B%0A%20%20%20%20%20%20var%20m21%20%3D%20m%5B9%5D%3B%0A%20%20%20%20%20%20var%20m22%20%3D%20m%5B10%5D%3B%0A%20%20%20%20%20%20var%20m23%20%3D%20m%5B11%5D%3B%0A%20%20%20%20%20%20var%20c%20%3D%20Math.cos(angleInRadians)%3B%0A%20%20%20%20%20%20var%20s%20%3D%20Math.sin(angleInRadians)%3B%0A%0A%20%20%20%20%20%20dst%5B4%5D%20%3D%20c%20*%20m10%20%2B%20s%20*%20m20%3B%0A%20%20%20%20%20%20dst%5B5%5D%20%3D%20c%20*%20m11%20%2B%20s%20*%20m21%3B%0A%20%20%20%20%20%20dst%5B6%5D%20%3D%20c%20*%20m12%20%2B%20s%20*%20m22%3B%0A%20%20%20%20%20%20dst%5B7%5D%20%3D%20c%20*%20m13%20%2B%20s%20*%20m23%3B%0A%20%20%20%20%20%20dst%5B8%5D%20%3D%20c%20*%20m20%20-%20s%20*%20m10%3B%0A%20%20%20%20%20%20dst%5B9%5D%20%3D%20c%20*%20m21%20-%20s%20*%20m11%3B%0A%20%20%20%20%20%20dst%5B10%5D%20%3D%20c%20*%20m22%20-%20s%20*%20m12%3B%0A%20%20%20%20%20%20dst%5B11%5D%20%3D%20c%20*%20m23%20-%20s%20*%20m13%3B%0A%0A%20%20%20%20%20%20if%20(m%20!%3D%3D%20dst)%20%7B%0A%20%20%20%20%20%20%20%20dst%5B0%5D%20%3D%20m%5B0%5D%3B%0A%20%20%20%20%20%20%20%20dst%5B1%5D%20%3D%20m%5B1%5D%3B%0A%20%20%20%20%20%20%20%20dst%5B2%5D%20%3D%20m%5B2%5D%3B%0A%20%20%20%20%20%20%20%20dst%5B3%5D%20%3D%20m%5B3%5D%3B%0A%20%20%20%20%20%20%20%20dst%5B12%5D%20%3D%20m%5B12%5D%3B%0A%20%20%20%20%20%20%20%20dst%5B13%5D%20%3D%20m%5B13%5D%3B%0A%20%20%20%20%20%20%20%20dst%5B14%5D%20%3D%20m%5B14%5D%3B%0A%20%20%20%20%20%20%20%20dst%5B15%5D%20%3D%20m%5B15%5D%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Makes%20an%20y%20rotation%20matrix%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20angleInRadians%20amount%20to%20rotate%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20%5Bdst%5D%20optional%20matrix%20to%20store%20result%0A%20%20%20%20%20*%20%40return%20%7BMatrix4%7D%20dst%20or%20a%20new%20matrix%20if%20none%20provided%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20yRotation(angleInRadians%2C%20dst)%20%7B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(16)%3B%0A%20%20%20%20%20%20var%20c%20%3D%20Math.cos(angleInRadians)%3B%0A%20%20%20%20%20%20var%20s%20%3D%20Math.sin(angleInRadians)%3B%0A%0A%20%20%20%20%20%20dst%5B0%5D%20%3D%20c%3B%0A%20%20%20%20%20%20dst%5B1%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B2%5D%20%3D%20-s%3B%0A%20%20%20%20%20%20dst%5B3%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B4%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B5%5D%20%3D%201%3B%0A%20%20%20%20%20%20dst%5B6%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B7%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B8%5D%20%3D%20s%3B%0A%20%20%20%20%20%20dst%5B9%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B10%5D%20%3D%20c%3B%0A%20%20%20%20%20%20dst%5B11%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B12%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B13%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B14%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B15%5D%20%3D%201%3B%0A%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Multiply%20by%20an%20y%20rotation%20matrix%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20m%20matrix%20to%20multiply%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20angleInRadians%20amount%20to%20rotate%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20%5Bdst%5D%20optional%20matrix%20to%20store%20result%0A%20%20%20%20%20*%20%40return%20%7BMatrix4%7D%20dst%20or%20a%20new%20matrix%20if%20none%20provided%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20yRotate(m%2C%20angleInRadians%2C%20dst)%20%7B%0A%20%20%20%20%20%20%2F%2F%20this%20is%20the%20optimized%20version%20of%0A%20%20%20%20%20%20%2F%2F%20return%20multiply(m%2C%20yRotation(angleInRadians)%2C%20dst)%3B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(16)%3B%0A%0A%20%20%20%20%20%20var%20m00%20%3D%20m%5B0%20*%204%20%2B%200%5D%3B%0A%20%20%20%20%20%20var%20m01%20%3D%20m%5B0%20*%204%20%2B%201%5D%3B%0A%20%20%20%20%20%20var%20m02%20%3D%20m%5B0%20*%204%20%2B%202%5D%3B%0A%20%20%20%20%20%20var%20m03%20%3D%20m%5B0%20*%204%20%2B%203%5D%3B%0A%20%20%20%20%20%20var%20m20%20%3D%20m%5B2%20*%204%20%2B%200%5D%3B%0A%20%20%20%20%20%20var%20m21%20%3D%20m%5B2%20*%204%20%2B%201%5D%3B%0A%20%20%20%20%20%20var%20m22%20%3D%20m%5B2%20*%204%20%2B%202%5D%3B%0A%20%20%20%20%20%20var%20m23%20%3D%20m%5B2%20*%204%20%2B%203%5D%3B%0A%20%20%20%20%20%20var%20c%20%3D%20Math.cos(angleInRadians)%3B%0A%20%20%20%20%20%20var%20s%20%3D%20Math.sin(angleInRadians)%3B%0A%0A%20%20%20%20%20%20dst%5B0%5D%20%3D%20c%20*%20m00%20-%20s%20*%20m20%3B%0A%20%20%20%20%20%20dst%5B1%5D%20%3D%20c%20*%20m01%20-%20s%20*%20m21%3B%0A%20%20%20%20%20%20dst%5B2%5D%20%3D%20c%20*%20m02%20-%20s%20*%20m22%3B%0A%20%20%20%20%20%20dst%5B3%5D%20%3D%20c%20*%20m03%20-%20s%20*%20m23%3B%0A%20%20%20%20%20%20dst%5B8%5D%20%3D%20c%20*%20m20%20%2B%20s%20*%20m00%3B%0A%20%20%20%20%20%20dst%5B9%5D%20%3D%20c%20*%20m21%20%2B%20s%20*%20m01%3B%0A%20%20%20%20%20%20dst%5B10%5D%20%3D%20c%20*%20m22%20%2B%20s%20*%20m02%3B%0A%20%20%20%20%20%20dst%5B11%5D%20%3D%20c%20*%20m23%20%2B%20s%20*%20m03%3B%0A%0A%20%20%20%20%20%20if%20(m%20!%3D%3D%20dst)%20%7B%0A%20%20%20%20%20%20%20%20dst%5B4%5D%20%3D%20m%5B4%5D%3B%0A%20%20%20%20%20%20%20%20dst%5B5%5D%20%3D%20m%5B5%5D%3B%0A%20%20%20%20%20%20%20%20dst%5B6%5D%20%3D%20m%5B6%5D%3B%0A%20%20%20%20%20%20%20%20dst%5B7%5D%20%3D%20m%5B7%5D%3B%0A%20%20%20%20%20%20%20%20dst%5B12%5D%20%3D%20m%5B12%5D%3B%0A%20%20%20%20%20%20%20%20dst%5B13%5D%20%3D%20m%5B13%5D%3B%0A%20%20%20%20%20%20%20%20dst%5B14%5D%20%3D%20m%5B14%5D%3B%0A%20%20%20%20%20%20%20%20dst%5B15%5D%20%3D%20m%5B15%5D%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Makes%20an%20z%20rotation%20matrix%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20angleInRadians%20amount%20to%20rotate%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20%5Bdst%5D%20optional%20matrix%20to%20store%20result%0A%20%20%20%20%20*%20%40return%20%7BMatrix4%7D%20dst%20or%20a%20new%20matrix%20if%20none%20provided%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20zRotation(angleInRadians%2C%20dst)%20%7B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(16)%3B%0A%20%20%20%20%20%20var%20c%20%3D%20Math.cos(angleInRadians)%3B%0A%20%20%20%20%20%20var%20s%20%3D%20Math.sin(angleInRadians)%3B%0A%0A%20%20%20%20%20%20dst%5B0%5D%20%3D%20c%3B%0A%20%20%20%20%20%20dst%5B1%5D%20%3D%20s%3B%0A%20%20%20%20%20%20dst%5B2%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B3%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B4%5D%20%3D%20-s%3B%0A%20%20%20%20%20%20dst%5B5%5D%20%3D%20c%3B%0A%20%20%20%20%20%20dst%5B6%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B7%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B8%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B9%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B10%5D%20%3D%201%3B%0A%20%20%20%20%20%20dst%5B11%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B12%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B13%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B14%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B15%5D%20%3D%201%3B%0A%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Multiply%20by%20an%20z%20rotation%20matrix%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20m%20matrix%20to%20multiply%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20angleInRadians%20amount%20to%20rotate%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20%5Bdst%5D%20optional%20matrix%20to%20store%20result%0A%20%20%20%20%20*%20%40return%20%7BMatrix4%7D%20dst%20or%20a%20new%20matrix%20if%20none%20provided%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20zRotate(m%2C%20angleInRadians%2C%20dst)%20%7B%0A%20%20%20%20%20%20%2F%2F%20This%20is%20the%20optimized%20version%20of%0A%20%20%20%20%20%20%2F%2F%20return%20multiply(m%2C%20zRotation(angleInRadians)%2C%20dst)%3B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(16)%3B%0A%0A%20%20%20%20%20%20var%20m00%20%3D%20m%5B0%20*%204%20%2B%200%5D%3B%0A%20%20%20%20%20%20var%20m01%20%3D%20m%5B0%20*%204%20%2B%201%5D%3B%0A%20%20%20%20%20%20var%20m02%20%3D%20m%5B0%20*%204%20%2B%202%5D%3B%0A%20%20%20%20%20%20var%20m03%20%3D%20m%5B0%20*%204%20%2B%203%5D%3B%0A%20%20%20%20%20%20var%20m10%20%3D%20m%5B1%20*%204%20%2B%200%5D%3B%0A%20%20%20%20%20%20var%20m11%20%3D%20m%5B1%20*%204%20%2B%201%5D%3B%0A%20%20%20%20%20%20var%20m12%20%3D%20m%5B1%20*%204%20%2B%202%5D%3B%0A%20%20%20%20%20%20var%20m13%20%3D%20m%5B1%20*%204%20%2B%203%5D%3B%0A%20%20%20%20%20%20var%20c%20%3D%20Math.cos(angleInRadians)%3B%0A%20%20%20%20%20%20var%20s%20%3D%20Math.sin(angleInRadians)%3B%0A%0A%20%20%20%20%20%20dst%5B0%5D%20%3D%20c%20*%20m00%20%2B%20s%20*%20m10%3B%0A%20%20%20%20%20%20dst%5B1%5D%20%3D%20c%20*%20m01%20%2B%20s%20*%20m11%3B%0A%20%20%20%20%20%20dst%5B2%5D%20%3D%20c%20*%20m02%20%2B%20s%20*%20m12%3B%0A%20%20%20%20%20%20dst%5B3%5D%20%3D%20c%20*%20m03%20%2B%20s%20*%20m13%3B%0A%20%20%20%20%20%20dst%5B4%5D%20%3D%20c%20*%20m10%20-%20s%20*%20m00%3B%0A%20%20%20%20%20%20dst%5B5%5D%20%3D%20c%20*%20m11%20-%20s%20*%20m01%3B%0A%20%20%20%20%20%20dst%5B6%5D%20%3D%20c%20*%20m12%20-%20s%20*%20m02%3B%0A%20%20%20%20%20%20dst%5B7%5D%20%3D%20c%20*%20m13%20-%20s%20*%20m03%3B%0A%0A%20%20%20%20%20%20if%20(m%20!%3D%3D%20dst)%20%7B%0A%20%20%20%20%20%20%20%20dst%5B8%5D%20%3D%20m%5B8%5D%3B%0A%20%20%20%20%20%20%20%20dst%5B9%5D%20%3D%20m%5B9%5D%3B%0A%20%20%20%20%20%20%20%20dst%5B10%5D%20%3D%20m%5B10%5D%3B%0A%20%20%20%20%20%20%20%20dst%5B11%5D%20%3D%20m%5B11%5D%3B%0A%20%20%20%20%20%20%20%20dst%5B12%5D%20%3D%20m%5B12%5D%3B%0A%20%20%20%20%20%20%20%20dst%5B13%5D%20%3D%20m%5B13%5D%3B%0A%20%20%20%20%20%20%20%20dst%5B14%5D%20%3D%20m%5B14%5D%3B%0A%20%20%20%20%20%20%20%20dst%5B15%5D%20%3D%20m%5B15%5D%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Makes%20an%20rotation%20matrix%20around%20an%20arbitrary%20axis%0A%20%20%20%20%20*%20%40param%20%7BVector3%7D%20axis%20axis%20to%20rotate%20around%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20angleInRadians%20amount%20to%20rotate%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20%5Bdst%5D%20optional%20matrix%20to%20store%20result%0A%20%20%20%20%20*%20%40return%20%7BMatrix4%7D%20dst%20or%20a%20new%20matrix%20if%20none%20provided%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20axisRotation(axis%2C%20angleInRadians%2C%20dst)%20%7B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(16)%3B%0A%0A%20%20%20%20%20%20var%20x%20%3D%20axis%5B0%5D%3B%0A%20%20%20%20%20%20var%20y%20%3D%20axis%5B1%5D%3B%0A%20%20%20%20%20%20var%20z%20%3D%20axis%5B2%5D%3B%0A%20%20%20%20%20%20var%20n%20%3D%20Math.sqrt(x%20*%20x%20%2B%20y%20*%20y%20%2B%20z%20*%20z)%3B%0A%20%20%20%20%20%20x%20%2F%3D%20n%3B%0A%20%20%20%20%20%20y%20%2F%3D%20n%3B%0A%20%20%20%20%20%20z%20%2F%3D%20n%3B%0A%20%20%20%20%20%20var%20xx%20%3D%20x%20*%20x%3B%0A%20%20%20%20%20%20var%20yy%20%3D%20y%20*%20y%3B%0A%20%20%20%20%20%20var%20zz%20%3D%20z%20*%20z%3B%0A%20%20%20%20%20%20var%20c%20%3D%20Math.cos(angleInRadians)%3B%0A%20%20%20%20%20%20var%20s%20%3D%20Math.sin(angleInRadians)%3B%0A%20%20%20%20%20%20var%20oneMinusCosine%20%3D%201%20-%20c%3B%0A%0A%20%20%20%20%20%20dst%5B0%5D%20%3D%20xx%20%2B%20(1%20-%20xx)%20*%20c%3B%0A%20%20%20%20%20%20dst%5B1%5D%20%3D%20x%20*%20y%20*%20oneMinusCosine%20%2B%20z%20*%20s%3B%0A%20%20%20%20%20%20dst%5B2%5D%20%3D%20x%20*%20z%20*%20oneMinusCosine%20-%20y%20*%20s%3B%0A%20%20%20%20%20%20dst%5B3%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B4%5D%20%3D%20x%20*%20y%20*%20oneMinusCosine%20-%20z%20*%20s%3B%0A%20%20%20%20%20%20dst%5B5%5D%20%3D%20yy%20%2B%20(1%20-%20yy)%20*%20c%3B%0A%20%20%20%20%20%20dst%5B6%5D%20%3D%20y%20*%20z%20*%20oneMinusCosine%20%2B%20x%20*%20s%3B%0A%20%20%20%20%20%20dst%5B7%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B8%5D%20%3D%20x%20*%20z%20*%20oneMinusCosine%20%2B%20y%20*%20s%3B%0A%20%20%20%20%20%20dst%5B9%5D%20%3D%20y%20*%20z%20*%20oneMinusCosine%20-%20x%20*%20s%3B%0A%20%20%20%20%20%20dst%5B10%5D%20%3D%20zz%20%2B%20(1%20-%20zz)%20*%20c%3B%0A%20%20%20%20%20%20dst%5B11%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B12%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B13%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B14%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B15%5D%20%3D%201%3B%0A%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Multiply%20by%20an%20axis%20rotation%20matrix%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20m%20matrix%20to%20multiply%0A%20%20%20%20%20*%20%40param%20%7BVector3%7D%20axis%20axis%20to%20rotate%20around%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20angleInRadians%20amount%20to%20rotate%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20%5Bdst%5D%20optional%20matrix%20to%20store%20result%0A%20%20%20%20%20*%20%40return%20%7BMatrix4%7D%20dst%20or%20a%20new%20matrix%20if%20none%20provided%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20axisRotate(m%2C%20axis%2C%20angleInRadians%2C%20dst)%20%7B%0A%20%20%20%20%20%20%2F%2F%20This%20is%20the%20optimized%20version%20of%0A%20%20%20%20%20%20%2F%2F%20return%20multiply(m%2C%20axisRotation(axis%2C%20angleInRadians)%2C%20dst)%3B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(16)%3B%0A%0A%20%20%20%20%20%20var%20x%20%3D%20axis%5B0%5D%3B%0A%20%20%20%20%20%20var%20y%20%3D%20axis%5B1%5D%3B%0A%20%20%20%20%20%20var%20z%20%3D%20axis%5B2%5D%3B%0A%20%20%20%20%20%20var%20n%20%3D%20Math.sqrt(x%20*%20x%20%2B%20y%20*%20y%20%2B%20z%20*%20z)%3B%0A%20%20%20%20%20%20x%20%2F%3D%20n%3B%0A%20%20%20%20%20%20y%20%2F%3D%20n%3B%0A%20%20%20%20%20%20z%20%2F%3D%20n%3B%0A%20%20%20%20%20%20var%20xx%20%3D%20x%20*%20x%3B%0A%20%20%20%20%20%20var%20yy%20%3D%20y%20*%20y%3B%0A%20%20%20%20%20%20var%20zz%20%3D%20z%20*%20z%3B%0A%20%20%20%20%20%20var%20c%20%3D%20Math.cos(angleInRadians)%3B%0A%20%20%20%20%20%20var%20s%20%3D%20Math.sin(angleInRadians)%3B%0A%20%20%20%20%20%20var%20oneMinusCosine%20%3D%201%20-%20c%3B%0A%0A%20%20%20%20%20%20var%20r00%20%3D%20xx%20%2B%20(1%20-%20xx)%20*%20c%3B%0A%20%20%20%20%20%20var%20r01%20%3D%20x%20*%20y%20*%20oneMinusCosine%20%2B%20z%20*%20s%3B%0A%20%20%20%20%20%20var%20r02%20%3D%20x%20*%20z%20*%20oneMinusCosine%20-%20y%20*%20s%3B%0A%20%20%20%20%20%20var%20r10%20%3D%20x%20*%20y%20*%20oneMinusCosine%20-%20z%20*%20s%3B%0A%20%20%20%20%20%20var%20r11%20%3D%20yy%20%2B%20(1%20-%20yy)%20*%20c%3B%0A%20%20%20%20%20%20var%20r12%20%3D%20y%20*%20z%20*%20oneMinusCosine%20%2B%20x%20*%20s%3B%0A%20%20%20%20%20%20var%20r20%20%3D%20x%20*%20z%20*%20oneMinusCosine%20%2B%20y%20*%20s%3B%0A%20%20%20%20%20%20var%20r21%20%3D%20y%20*%20z%20*%20oneMinusCosine%20-%20x%20*%20s%3B%0A%20%20%20%20%20%20var%20r22%20%3D%20zz%20%2B%20(1%20-%20zz)%20*%20c%3B%0A%0A%20%20%20%20%20%20var%20m00%20%3D%20m%5B0%5D%3B%0A%20%20%20%20%20%20var%20m01%20%3D%20m%5B1%5D%3B%0A%20%20%20%20%20%20var%20m02%20%3D%20m%5B2%5D%3B%0A%20%20%20%20%20%20var%20m03%20%3D%20m%5B3%5D%3B%0A%20%20%20%20%20%20var%20m10%20%3D%20m%5B4%5D%3B%0A%20%20%20%20%20%20var%20m11%20%3D%20m%5B5%5D%3B%0A%20%20%20%20%20%20var%20m12%20%3D%20m%5B6%5D%3B%0A%20%20%20%20%20%20var%20m13%20%3D%20m%5B7%5D%3B%0A%20%20%20%20%20%20var%20m20%20%3D%20m%5B8%5D%3B%0A%20%20%20%20%20%20var%20m21%20%3D%20m%5B9%5D%3B%0A%20%20%20%20%20%20var%20m22%20%3D%20m%5B10%5D%3B%0A%20%20%20%20%20%20var%20m23%20%3D%20m%5B11%5D%3B%0A%0A%20%20%20%20%20%20dst%5B0%5D%20%3D%20r00%20*%20m00%20%2B%20r01%20*%20m10%20%2B%20r02%20*%20m20%3B%0A%20%20%20%20%20%20dst%5B1%5D%20%3D%20r00%20*%20m01%20%2B%20r01%20*%20m11%20%2B%20r02%20*%20m21%3B%0A%20%20%20%20%20%20dst%5B2%5D%20%3D%20r00%20*%20m02%20%2B%20r01%20*%20m12%20%2B%20r02%20*%20m22%3B%0A%20%20%20%20%20%20dst%5B3%5D%20%3D%20r00%20*%20m03%20%2B%20r01%20*%20m13%20%2B%20r02%20*%20m23%3B%0A%20%20%20%20%20%20dst%5B4%5D%20%3D%20r10%20*%20m00%20%2B%20r11%20*%20m10%20%2B%20r12%20*%20m20%3B%0A%20%20%20%20%20%20dst%5B5%5D%20%3D%20r10%20*%20m01%20%2B%20r11%20*%20m11%20%2B%20r12%20*%20m21%3B%0A%20%20%20%20%20%20dst%5B6%5D%20%3D%20r10%20*%20m02%20%2B%20r11%20*%20m12%20%2B%20r12%20*%20m22%3B%0A%20%20%20%20%20%20dst%5B7%5D%20%3D%20r10%20*%20m03%20%2B%20r11%20*%20m13%20%2B%20r12%20*%20m23%3B%0A%20%20%20%20%20%20dst%5B8%5D%20%3D%20r20%20*%20m00%20%2B%20r21%20*%20m10%20%2B%20r22%20*%20m20%3B%0A%20%20%20%20%20%20dst%5B9%5D%20%3D%20r20%20*%20m01%20%2B%20r21%20*%20m11%20%2B%20r22%20*%20m21%3B%0A%20%20%20%20%20%20dst%5B10%5D%20%3D%20r20%20*%20m02%20%2B%20r21%20*%20m12%20%2B%20r22%20*%20m22%3B%0A%20%20%20%20%20%20dst%5B11%5D%20%3D%20r20%20*%20m03%20%2B%20r21%20*%20m13%20%2B%20r22%20*%20m23%3B%0A%0A%20%20%20%20%20%20if%20(m%20!%3D%3D%20dst)%20%7B%0A%20%20%20%20%20%20%20%20dst%5B12%5D%20%3D%20m%5B12%5D%3B%0A%20%20%20%20%20%20%20%20dst%5B13%5D%20%3D%20m%5B13%5D%3B%0A%20%20%20%20%20%20%20%20dst%5B14%5D%20%3D%20m%5B14%5D%3B%0A%20%20%20%20%20%20%20%20dst%5B15%5D%20%3D%20m%5B15%5D%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Makes%20a%20scale%20matrix%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20sx%20x%20scale.%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20sy%20y%20scale.%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20sz%20z%20scale.%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20%5Bdst%5D%20optional%20matrix%20to%20store%20result%0A%20%20%20%20%20*%20%40return%20%7BMatrix4%7D%20dst%20or%20a%20new%20matrix%20if%20none%20provided%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20scaling(sx%2C%20sy%2C%20sz%2C%20dst)%20%7B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(16)%3B%0A%0A%20%20%20%20%20%20dst%5B0%5D%20%3D%20sx%3B%0A%20%20%20%20%20%20dst%5B1%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B2%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B3%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B4%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B5%5D%20%3D%20sy%3B%0A%20%20%20%20%20%20dst%5B6%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B7%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B8%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B9%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B10%5D%20%3D%20sz%3B%0A%20%20%20%20%20%20dst%5B11%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B12%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B13%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B14%5D%20%3D%200%3B%0A%20%20%20%20%20%20dst%5B15%5D%20%3D%201%3B%0A%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Multiply%20by%20a%20scaling%20matrix%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20m%20matrix%20to%20multiply%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20sx%20x%20scale.%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20sy%20y%20scale.%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20sz%20z%20scale.%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20%5Bdst%5D%20optional%20matrix%20to%20store%20result%0A%20%20%20%20%20*%20%40return%20%7BMatrix4%7D%20dst%20or%20a%20new%20matrix%20if%20none%20provided%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20scale(m%2C%20sx%2C%20sy%2C%20sz%2C%20dst)%20%7B%0A%20%20%20%20%20%20%2F%2F%20This%20is%20the%20optimized%20version%20of%0A%20%20%20%20%20%20%2F%2F%20return%20multiply(m%2C%20scaling(sx%2C%20sy%2C%20sz)%2C%20dst)%3B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(16)%3B%0A%0A%20%20%20%20%20%20dst%5B0%5D%20%3D%20sx%20*%20m%5B0%20*%204%20%2B%200%5D%3B%0A%20%20%20%20%20%20dst%5B1%5D%20%3D%20sx%20*%20m%5B0%20*%204%20%2B%201%5D%3B%0A%20%20%20%20%20%20dst%5B2%5D%20%3D%20sx%20*%20m%5B0%20*%204%20%2B%202%5D%3B%0A%20%20%20%20%20%20dst%5B3%5D%20%3D%20sx%20*%20m%5B0%20*%204%20%2B%203%5D%3B%0A%20%20%20%20%20%20dst%5B4%5D%20%3D%20sy%20*%20m%5B1%20*%204%20%2B%200%5D%3B%0A%20%20%20%20%20%20dst%5B5%5D%20%3D%20sy%20*%20m%5B1%20*%204%20%2B%201%5D%3B%0A%20%20%20%20%20%20dst%5B6%5D%20%3D%20sy%20*%20m%5B1%20*%204%20%2B%202%5D%3B%0A%20%20%20%20%20%20dst%5B7%5D%20%3D%20sy%20*%20m%5B1%20*%204%20%2B%203%5D%3B%0A%20%20%20%20%20%20dst%5B8%5D%20%3D%20sz%20*%20m%5B2%20*%204%20%2B%200%5D%3B%0A%20%20%20%20%20%20dst%5B9%5D%20%3D%20sz%20*%20m%5B2%20*%204%20%2B%201%5D%3B%0A%20%20%20%20%20%20dst%5B10%5D%20%3D%20sz%20*%20m%5B2%20*%204%20%2B%202%5D%3B%0A%20%20%20%20%20%20dst%5B11%5D%20%3D%20sz%20*%20m%5B2%20*%204%20%2B%203%5D%3B%0A%0A%20%20%20%20%20%20if%20(m%20!%3D%3D%20dst)%20%7B%0A%20%20%20%20%20%20%20%20dst%5B12%5D%20%3D%20m%5B12%5D%3B%0A%20%20%20%20%20%20%20%20dst%5B13%5D%20%3D%20m%5B13%5D%3B%0A%20%20%20%20%20%20%20%20dst%5B14%5D%20%3D%20m%5B14%5D%3B%0A%20%20%20%20%20%20%20%20dst%5B15%5D%20%3D%20m%5B15%5D%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20creates%20a%20matrix%20from%20translation%2C%20quaternion%2C%20scale%0A%20%20%20%20%20*%20%40param%20%7BNumber%5B%5D%7D%20translation%20%5Bx%2C%20y%2C%20z%5D%20translation%0A%20%20%20%20%20*%20%40param%20%7BNumber%5B%5D%7D%20quaternion%20%5Bx%2C%20y%2C%20z%2C%20z%5D%20quaternion%20rotation%0A%20%20%20%20%20*%20%40param%20%7BNumber%5B%5D%7D%20scale%20%5Bx%2C%20y%2C%20z%5D%20scale%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20%5Bdst%5D%20optional%20matrix%20to%20store%20result%0A%20%20%20%20%20*%20%40return%20%7BMatrix4%7D%20dst%20or%20a%20new%20matrix%20if%20none%20provided%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20compose(translation%2C%20quaternion%2C%20scale%2C%20dst)%20%7B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(16)%3B%0A%0A%20%20%20%20%20%20const%20x%20%3D%20quaternion%5B0%5D%3B%0A%20%20%20%20%20%20const%20y%20%3D%20quaternion%5B1%5D%3B%0A%20%20%20%20%20%20const%20z%20%3D%20quaternion%5B2%5D%3B%0A%20%20%20%20%20%20const%20w%20%3D%20quaternion%5B3%5D%3B%0A%0A%20%20%20%20%20%20const%20x2%20%3D%20x%20%2B%20x%3B%0A%20%20%20%20%20%20const%20y2%20%3D%20y%20%2B%20y%3B%0A%20%20%20%20%20%20const%20z2%20%3D%20z%20%2B%20z%3B%0A%0A%20%20%20%20%20%20const%20xx%20%3D%20x%20*%20x2%3B%0A%20%20%20%20%20%20const%20xy%20%3D%20x%20*%20y2%3B%0A%20%20%20%20%20%20const%20xz%20%3D%20x%20*%20z2%3B%0A%0A%20%20%20%20%20%20const%20yy%20%3D%20y%20*%20y2%3B%0A%20%20%20%20%20%20const%20yz%20%3D%20y%20*%20z2%3B%0A%20%20%20%20%20%20const%20zz%20%3D%20z%20*%20z2%3B%0A%0A%20%20%20%20%20%20const%20wx%20%3D%20w%20*%20x2%3B%0A%20%20%20%20%20%20const%20wy%20%3D%20w%20*%20y2%3B%0A%20%20%20%20%20%20const%20wz%20%3D%20w%20*%20z2%3B%0A%0A%20%20%20%20%20%20const%20sx%20%3D%20scale%5B0%5D%3B%0A%20%20%20%20%20%20const%20sy%20%3D%20scale%5B1%5D%3B%0A%20%20%20%20%20%20const%20sz%20%3D%20scale%5B2%5D%3B%0A%0A%20%20%20%20%20%20dst%5B0%5D%20%3D%20(1%20-%20(yy%20%2B%20zz))%20*%20sx%3B%0A%20%20%20%20%20%20dst%5B1%5D%20%3D%20(xy%20%2B%20wz)%20*%20sx%3B%0A%20%20%20%20%20%20dst%5B2%5D%20%3D%20(xz%20-%20wy)%20*%20sx%3B%0A%20%20%20%20%20%20dst%5B3%5D%20%3D%200%3B%0A%0A%20%20%20%20%20%20dst%5B4%5D%20%3D%20(xy%20-%20wz)%20*%20sy%3B%0A%20%20%20%20%20%20dst%5B5%5D%20%3D%20(1%20-%20(xx%20%2B%20zz))%20*%20sy%3B%0A%20%20%20%20%20%20dst%5B6%5D%20%3D%20(yz%20%2B%20wx)%20*%20sy%3B%0A%20%20%20%20%20%20dst%5B7%5D%20%3D%200%3B%0A%0A%20%20%20%20%20%20dst%5B8%5D%20%3D%20(xz%20%2B%20wy)%20*%20sz%3B%0A%20%20%20%20%20%20dst%5B9%5D%20%3D%20(yz%20-%20wx)%20*%20sz%3B%0A%20%20%20%20%20%20dst%5B10%5D%20%3D%20(1%20-%20(xx%20%2B%20yy))%20*%20sz%3B%0A%20%20%20%20%20%20dst%5B11%5D%20%3D%200%3B%0A%0A%20%20%20%20%20%20dst%5B12%5D%20%3D%20translation%5B0%5D%3B%0A%20%20%20%20%20%20dst%5B13%5D%20%3D%20translation%5B1%5D%3B%0A%20%20%20%20%20%20dst%5B14%5D%20%3D%20translation%5B2%5D%3B%0A%20%20%20%20%20%20dst%5B15%5D%20%3D%201%3B%0A%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20function%20quatFromRotationMatrix(m%2C%20dst)%20%7B%0A%20%20%20%20%20%20%2F%2F%20http%3A%2F%2Fwww.euclideanspace.com%2Fmaths%2Fgeometry%2Frotations%2Fconversions%2FmatrixToQuaternion%2Findex.htm%0A%0A%20%20%20%20%20%20%2F%2F%20assumes%20the%20upper%203x3%20of%20m%20is%20a%20pure%20rotation%20matrix%20(i.e%2C%20unscaled)%0A%20%20%20%20%20%20const%20m11%20%3D%20m%5B0%5D%3B%0A%20%20%20%20%20%20const%20m12%20%3D%20m%5B4%5D%3B%0A%20%20%20%20%20%20const%20m13%20%3D%20m%5B8%5D%3B%0A%20%20%20%20%20%20const%20m21%20%3D%20m%5B1%5D%3B%0A%20%20%20%20%20%20const%20m22%20%3D%20m%5B5%5D%3B%0A%20%20%20%20%20%20const%20m23%20%3D%20m%5B9%5D%3B%0A%20%20%20%20%20%20const%20m31%20%3D%20m%5B2%5D%3B%0A%20%20%20%20%20%20const%20m32%20%3D%20m%5B6%5D%3B%0A%20%20%20%20%20%20const%20m33%20%3D%20m%5B10%5D%3B%0A%0A%20%20%20%20%20%20const%20trace%20%3D%20m11%20%2B%20m22%20%2B%20m33%3B%0A%0A%20%20%20%20%20%20if%20(trace%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20const%20s%20%3D%200.5%20%2F%20Math.sqrt(trace%20%2B%201)%3B%0A%20%20%20%20%20%20%20%20dst%5B3%5D%20%3D%200.25%20%2F%20s%3B%0A%20%20%20%20%20%20%20%20dst%5B0%5D%20%3D%20(m32%20-%20m23)%20*%20s%3B%0A%20%20%20%20%20%20%20%20dst%5B1%5D%20%3D%20(m13%20-%20m31)%20*%20s%3B%0A%20%20%20%20%20%20%20%20dst%5B2%5D%20%3D%20(m21%20-%20m12)%20*%20s%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(m11%20%3E%20m22%20%26%26%20m11%20%3E%20m33)%20%7B%0A%20%20%20%20%20%20%20%20const%20s%20%3D%202%20*%20Math.sqrt(1%20%2B%20m11%20-%20m22%20-%20m33)%3B%0A%20%20%20%20%20%20%20%20dst%5B3%5D%20%3D%20(m32%20-%20m23)%20%2F%20s%3B%0A%20%20%20%20%20%20%20%20dst%5B0%5D%20%3D%200.25%20*%20s%3B%0A%20%20%20%20%20%20%20%20dst%5B1%5D%20%3D%20(m12%20%2B%20m21)%20%2F%20s%3B%0A%20%20%20%20%20%20%20%20dst%5B2%5D%20%3D%20(m13%20%2B%20m31)%20%2F%20s%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(m22%20%3E%20m33)%20%7B%0A%20%20%20%20%20%20%20%20const%20s%20%3D%202%20*%20Math.sqrt(1%20%2B%20m22%20-%20m11%20-%20m33)%3B%0A%20%20%20%20%20%20%20%20dst%5B3%5D%20%3D%20(m13%20-%20m31)%20%2F%20s%3B%0A%20%20%20%20%20%20%20%20dst%5B0%5D%20%3D%20(m12%20%2B%20m21)%20%2F%20s%3B%0A%20%20%20%20%20%20%20%20dst%5B1%5D%20%3D%200.25%20*%20s%3B%0A%20%20%20%20%20%20%20%20dst%5B2%5D%20%3D%20(m23%20%2B%20m32)%20%2F%20s%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20const%20s%20%3D%202%20*%20Math.sqrt(1%20%2B%20m33%20-%20m11%20-%20m22)%3B%0A%20%20%20%20%20%20%20%20dst%5B3%5D%20%3D%20(m21%20-%20m12)%20%2F%20s%3B%0A%20%20%20%20%20%20%20%20dst%5B0%5D%20%3D%20(m13%20%2B%20m31)%20%2F%20s%3B%0A%20%20%20%20%20%20%20%20dst%5B1%5D%20%3D%20(m23%20%2B%20m32)%20%2F%20s%3B%0A%20%20%20%20%20%20%20%20dst%5B2%5D%20%3D%200.25%20*%20s%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20function%20decompose(mat%2C%20translation%2C%20quaternion%2C%20scale)%20%7B%0A%20%20%20%20%20%20let%20sx%20%3D%20length(mat.slice(0%2C%203))%3B%0A%20%20%20%20%20%20const%20sy%20%3D%20length(mat.slice(4%2C%207))%3B%0A%20%20%20%20%20%20const%20sz%20%3D%20length(mat.slice(8%2C%2011))%3B%0A%0A%20%20%20%20%20%20%2F%2F%20if%20determinate%20is%20negative%2C%20we%20need%20to%20invert%20one%20scale%0A%20%20%20%20%20%20const%20det%20%3D%20determinate(mat)%3B%0A%20%20%20%20%20%20if%20(det%20%3C%200)%20%7B%0A%20%20%20%20%20%20%20%20sx%20%3D%20-sx%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20translation%5B0%5D%20%3D%20mat%5B12%5D%3B%0A%20%20%20%20%20%20translation%5B1%5D%20%3D%20mat%5B13%5D%3B%0A%20%20%20%20%20%20translation%5B2%5D%20%3D%20mat%5B14%5D%3B%0A%0A%20%20%20%20%20%20%2F%2F%20scale%20the%20rotation%20part%0A%20%20%20%20%20%20const%20matrix%20%3D%20copy(mat)%3B%0A%0A%20%20%20%20%20%20const%20invSX%20%3D%201%20%2F%20sx%3B%0A%20%20%20%20%20%20const%20invSY%20%3D%201%20%2F%20sy%3B%0A%20%20%20%20%20%20const%20invSZ%20%3D%201%20%2F%20sz%3B%0A%0A%20%20%20%20%20%20matrix%5B0%5D%20*%3D%20invSX%3B%0A%20%20%20%20%20%20matrix%5B1%5D%20*%3D%20invSX%3B%0A%20%20%20%20%20%20matrix%5B2%5D%20*%3D%20invSX%3B%0A%0A%20%20%20%20%20%20matrix%5B4%5D%20*%3D%20invSY%3B%0A%20%20%20%20%20%20matrix%5B5%5D%20*%3D%20invSY%3B%0A%20%20%20%20%20%20matrix%5B6%5D%20*%3D%20invSY%3B%0A%0A%20%20%20%20%20%20matrix%5B8%5D%20*%3D%20invSZ%3B%0A%20%20%20%20%20%20matrix%5B9%5D%20*%3D%20invSZ%3B%0A%20%20%20%20%20%20matrix%5B10%5D%20*%3D%20invSZ%3B%0A%0A%20%20%20%20%20%20quatFromRotationMatrix(matrix%2C%20quaternion)%3B%0A%0A%20%20%20%20%20%20scale%5B0%5D%20%3D%20sx%3B%0A%20%20%20%20%20%20scale%5B1%5D%20%3D%20sy%3B%0A%20%20%20%20%20%20scale%5B2%5D%20%3D%20sz%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20function%20determinate(m)%20%7B%0A%20%20%20%20%20%20var%20m00%20%3D%20m%5B0%20*%204%20%2B%200%5D%3B%0A%20%20%20%20%20%20var%20m01%20%3D%20m%5B0%20*%204%20%2B%201%5D%3B%0A%20%20%20%20%20%20var%20m02%20%3D%20m%5B0%20*%204%20%2B%202%5D%3B%0A%20%20%20%20%20%20var%20m03%20%3D%20m%5B0%20*%204%20%2B%203%5D%3B%0A%20%20%20%20%20%20var%20m10%20%3D%20m%5B1%20*%204%20%2B%200%5D%3B%0A%20%20%20%20%20%20var%20m11%20%3D%20m%5B1%20*%204%20%2B%201%5D%3B%0A%20%20%20%20%20%20var%20m12%20%3D%20m%5B1%20*%204%20%2B%202%5D%3B%0A%20%20%20%20%20%20var%20m13%20%3D%20m%5B1%20*%204%20%2B%203%5D%3B%0A%20%20%20%20%20%20var%20m20%20%3D%20m%5B2%20*%204%20%2B%200%5D%3B%0A%20%20%20%20%20%20var%20m21%20%3D%20m%5B2%20*%204%20%2B%201%5D%3B%0A%20%20%20%20%20%20var%20m22%20%3D%20m%5B2%20*%204%20%2B%202%5D%3B%0A%20%20%20%20%20%20var%20m23%20%3D%20m%5B2%20*%204%20%2B%203%5D%3B%0A%20%20%20%20%20%20var%20m30%20%3D%20m%5B3%20*%204%20%2B%200%5D%3B%0A%20%20%20%20%20%20var%20m31%20%3D%20m%5B3%20*%204%20%2B%201%5D%3B%0A%20%20%20%20%20%20var%20m32%20%3D%20m%5B3%20*%204%20%2B%202%5D%3B%0A%20%20%20%20%20%20var%20m33%20%3D%20m%5B3%20*%204%20%2B%203%5D%3B%0A%20%20%20%20%20%20var%20tmp_0%20%3D%20m22%20*%20m33%3B%0A%20%20%20%20%20%20var%20tmp_1%20%3D%20m32%20*%20m23%3B%0A%20%20%20%20%20%20var%20tmp_2%20%3D%20m12%20*%20m33%3B%0A%20%20%20%20%20%20var%20tmp_3%20%3D%20m32%20*%20m13%3B%0A%20%20%20%20%20%20var%20tmp_4%20%3D%20m12%20*%20m23%3B%0A%20%20%20%20%20%20var%20tmp_5%20%3D%20m22%20*%20m13%3B%0A%20%20%20%20%20%20var%20tmp_6%20%3D%20m02%20*%20m33%3B%0A%20%20%20%20%20%20var%20tmp_7%20%3D%20m32%20*%20m03%3B%0A%20%20%20%20%20%20var%20tmp_8%20%3D%20m02%20*%20m23%3B%0A%20%20%20%20%20%20var%20tmp_9%20%3D%20m22%20*%20m03%3B%0A%20%20%20%20%20%20var%20tmp_10%20%3D%20m02%20*%20m13%3B%0A%20%20%20%20%20%20var%20tmp_11%20%3D%20m12%20*%20m03%3B%0A%0A%20%20%20%20%20%20var%20t0%20%3D%20(tmp_0%20*%20m11%20%2B%20tmp_3%20*%20m21%20%2B%20tmp_4%20*%20m31)%20-%0A%20%20%20%20%20%20%20%20(tmp_1%20*%20m11%20%2B%20tmp_2%20*%20m21%20%2B%20tmp_5%20*%20m31)%3B%0A%20%20%20%20%20%20var%20t1%20%3D%20(tmp_1%20*%20m01%20%2B%20tmp_6%20*%20m21%20%2B%20tmp_9%20*%20m31)%20-%0A%20%20%20%20%20%20%20%20(tmp_0%20*%20m01%20%2B%20tmp_7%20*%20m21%20%2B%20tmp_8%20*%20m31)%3B%0A%20%20%20%20%20%20var%20t2%20%3D%20(tmp_2%20*%20m01%20%2B%20tmp_7%20*%20m11%20%2B%20tmp_10%20*%20m31)%20-%0A%20%20%20%20%20%20%20%20(tmp_3%20*%20m01%20%2B%20tmp_6%20*%20m11%20%2B%20tmp_11%20*%20m31)%3B%0A%20%20%20%20%20%20var%20t3%20%3D%20(tmp_5%20*%20m01%20%2B%20tmp_8%20*%20m11%20%2B%20tmp_11%20*%20m21)%20-%0A%20%20%20%20%20%20%20%20(tmp_4%20*%20m01%20%2B%20tmp_9%20*%20m11%20%2B%20tmp_10%20*%20m21)%3B%0A%0A%20%20%20%20%20%20return%201.0%20%2F%20(m00%20*%20t0%20%2B%20m10%20*%20t1%20%2B%20m20%20*%20t2%20%2B%20m30%20*%20t3)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Computes%20the%20inverse%20of%20a%20matrix.%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20m%20matrix%20to%20compute%20inverse%20of%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20%5Bdst%5D%20optional%20matrix%20to%20store%20result%0A%20%20%20%20%20*%20%40return%20%7BMatrix4%7D%20dst%20or%20a%20new%20matrix%20if%20none%20provided%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20inverse(m%2C%20dst)%20%7B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(16)%3B%0A%20%20%20%20%20%20var%20m00%20%3D%20m%5B0%20*%204%20%2B%200%5D%3B%0A%20%20%20%20%20%20var%20m01%20%3D%20m%5B0%20*%204%20%2B%201%5D%3B%0A%20%20%20%20%20%20var%20m02%20%3D%20m%5B0%20*%204%20%2B%202%5D%3B%0A%20%20%20%20%20%20var%20m03%20%3D%20m%5B0%20*%204%20%2B%203%5D%3B%0A%20%20%20%20%20%20var%20m10%20%3D%20m%5B1%20*%204%20%2B%200%5D%3B%0A%20%20%20%20%20%20var%20m11%20%3D%20m%5B1%20*%204%20%2B%201%5D%3B%0A%20%20%20%20%20%20var%20m12%20%3D%20m%5B1%20*%204%20%2B%202%5D%3B%0A%20%20%20%20%20%20var%20m13%20%3D%20m%5B1%20*%204%20%2B%203%5D%3B%0A%20%20%20%20%20%20var%20m20%20%3D%20m%5B2%20*%204%20%2B%200%5D%3B%0A%20%20%20%20%20%20var%20m21%20%3D%20m%5B2%20*%204%20%2B%201%5D%3B%0A%20%20%20%20%20%20var%20m22%20%3D%20m%5B2%20*%204%20%2B%202%5D%3B%0A%20%20%20%20%20%20var%20m23%20%3D%20m%5B2%20*%204%20%2B%203%5D%3B%0A%20%20%20%20%20%20var%20m30%20%3D%20m%5B3%20*%204%20%2B%200%5D%3B%0A%20%20%20%20%20%20var%20m31%20%3D%20m%5B3%20*%204%20%2B%201%5D%3B%0A%20%20%20%20%20%20var%20m32%20%3D%20m%5B3%20*%204%20%2B%202%5D%3B%0A%20%20%20%20%20%20var%20m33%20%3D%20m%5B3%20*%204%20%2B%203%5D%3B%0A%20%20%20%20%20%20var%20tmp_0%20%3D%20m22%20*%20m33%3B%0A%20%20%20%20%20%20var%20tmp_1%20%3D%20m32%20*%20m23%3B%0A%20%20%20%20%20%20var%20tmp_2%20%3D%20m12%20*%20m33%3B%0A%20%20%20%20%20%20var%20tmp_3%20%3D%20m32%20*%20m13%3B%0A%20%20%20%20%20%20var%20tmp_4%20%3D%20m12%20*%20m23%3B%0A%20%20%20%20%20%20var%20tmp_5%20%3D%20m22%20*%20m13%3B%0A%20%20%20%20%20%20var%20tmp_6%20%3D%20m02%20*%20m33%3B%0A%20%20%20%20%20%20var%20tmp_7%20%3D%20m32%20*%20m03%3B%0A%20%20%20%20%20%20var%20tmp_8%20%3D%20m02%20*%20m23%3B%0A%20%20%20%20%20%20var%20tmp_9%20%3D%20m22%20*%20m03%3B%0A%20%20%20%20%20%20var%20tmp_10%20%3D%20m02%20*%20m13%3B%0A%20%20%20%20%20%20var%20tmp_11%20%3D%20m12%20*%20m03%3B%0A%20%20%20%20%20%20var%20tmp_12%20%3D%20m20%20*%20m31%3B%0A%20%20%20%20%20%20var%20tmp_13%20%3D%20m30%20*%20m21%3B%0A%20%20%20%20%20%20var%20tmp_14%20%3D%20m10%20*%20m31%3B%0A%20%20%20%20%20%20var%20tmp_15%20%3D%20m30%20*%20m11%3B%0A%20%20%20%20%20%20var%20tmp_16%20%3D%20m10%20*%20m21%3B%0A%20%20%20%20%20%20var%20tmp_17%20%3D%20m20%20*%20m11%3B%0A%20%20%20%20%20%20var%20tmp_18%20%3D%20m00%20*%20m31%3B%0A%20%20%20%20%20%20var%20tmp_19%20%3D%20m30%20*%20m01%3B%0A%20%20%20%20%20%20var%20tmp_20%20%3D%20m00%20*%20m21%3B%0A%20%20%20%20%20%20var%20tmp_21%20%3D%20m20%20*%20m01%3B%0A%20%20%20%20%20%20var%20tmp_22%20%3D%20m00%20*%20m11%3B%0A%20%20%20%20%20%20var%20tmp_23%20%3D%20m10%20*%20m01%3B%0A%0A%20%20%20%20%20%20var%20t0%20%3D%20(tmp_0%20*%20m11%20%2B%20tmp_3%20*%20m21%20%2B%20tmp_4%20*%20m31)%20-%0A%20%20%20%20%20%20%20%20(tmp_1%20*%20m11%20%2B%20tmp_2%20*%20m21%20%2B%20tmp_5%20*%20m31)%3B%0A%20%20%20%20%20%20var%20t1%20%3D%20(tmp_1%20*%20m01%20%2B%20tmp_6%20*%20m21%20%2B%20tmp_9%20*%20m31)%20-%0A%20%20%20%20%20%20%20%20(tmp_0%20*%20m01%20%2B%20tmp_7%20*%20m21%20%2B%20tmp_8%20*%20m31)%3B%0A%20%20%20%20%20%20var%20t2%20%3D%20(tmp_2%20*%20m01%20%2B%20tmp_7%20*%20m11%20%2B%20tmp_10%20*%20m31)%20-%0A%20%20%20%20%20%20%20%20(tmp_3%20*%20m01%20%2B%20tmp_6%20*%20m11%20%2B%20tmp_11%20*%20m31)%3B%0A%20%20%20%20%20%20var%20t3%20%3D%20(tmp_5%20*%20m01%20%2B%20tmp_8%20*%20m11%20%2B%20tmp_11%20*%20m21)%20-%0A%20%20%20%20%20%20%20%20(tmp_4%20*%20m01%20%2B%20tmp_9%20*%20m11%20%2B%20tmp_10%20*%20m21)%3B%0A%0A%20%20%20%20%20%20var%20d%20%3D%201.0%20%2F%20(m00%20*%20t0%20%2B%20m10%20*%20t1%20%2B%20m20%20*%20t2%20%2B%20m30%20*%20t3)%3B%0A%0A%20%20%20%20%20%20dst%5B0%5D%20%3D%20d%20*%20t0%3B%0A%20%20%20%20%20%20dst%5B1%5D%20%3D%20d%20*%20t1%3B%0A%20%20%20%20%20%20dst%5B2%5D%20%3D%20d%20*%20t2%3B%0A%20%20%20%20%20%20dst%5B3%5D%20%3D%20d%20*%20t3%3B%0A%20%20%20%20%20%20dst%5B4%5D%20%3D%20d%20*%20((tmp_1%20*%20m10%20%2B%20tmp_2%20*%20m20%20%2B%20tmp_5%20*%20m30)%20-%0A%20%20%20%20%20%20%20%20(tmp_0%20*%20m10%20%2B%20tmp_3%20*%20m20%20%2B%20tmp_4%20*%20m30))%3B%0A%20%20%20%20%20%20dst%5B5%5D%20%3D%20d%20*%20((tmp_0%20*%20m00%20%2B%20tmp_7%20*%20m20%20%2B%20tmp_8%20*%20m30)%20-%0A%20%20%20%20%20%20%20%20(tmp_1%20*%20m00%20%2B%20tmp_6%20*%20m20%20%2B%20tmp_9%20*%20m30))%3B%0A%20%20%20%20%20%20dst%5B6%5D%20%3D%20d%20*%20((tmp_3%20*%20m00%20%2B%20tmp_6%20*%20m10%20%2B%20tmp_11%20*%20m30)%20-%0A%20%20%20%20%20%20%20%20(tmp_2%20*%20m00%20%2B%20tmp_7%20*%20m10%20%2B%20tmp_10%20*%20m30))%3B%0A%20%20%20%20%20%20dst%5B7%5D%20%3D%20d%20*%20((tmp_4%20*%20m00%20%2B%20tmp_9%20*%20m10%20%2B%20tmp_10%20*%20m20)%20-%0A%20%20%20%20%20%20%20%20(tmp_5%20*%20m00%20%2B%20tmp_8%20*%20m10%20%2B%20tmp_11%20*%20m20))%3B%0A%20%20%20%20%20%20dst%5B8%5D%20%3D%20d%20*%20((tmp_12%20*%20m13%20%2B%20tmp_15%20*%20m23%20%2B%20tmp_16%20*%20m33)%20-%0A%20%20%20%20%20%20%20%20(tmp_13%20*%20m13%20%2B%20tmp_14%20*%20m23%20%2B%20tmp_17%20*%20m33))%3B%0A%20%20%20%20%20%20dst%5B9%5D%20%3D%20d%20*%20((tmp_13%20*%20m03%20%2B%20tmp_18%20*%20m23%20%2B%20tmp_21%20*%20m33)%20-%0A%20%20%20%20%20%20%20%20(tmp_12%20*%20m03%20%2B%20tmp_19%20*%20m23%20%2B%20tmp_20%20*%20m33))%3B%0A%20%20%20%20%20%20dst%5B10%5D%20%3D%20d%20*%20((tmp_14%20*%20m03%20%2B%20tmp_19%20*%20m13%20%2B%20tmp_22%20*%20m33)%20-%0A%20%20%20%20%20%20%20%20(tmp_15%20*%20m03%20%2B%20tmp_18%20*%20m13%20%2B%20tmp_23%20*%20m33))%3B%0A%20%20%20%20%20%20dst%5B11%5D%20%3D%20d%20*%20((tmp_17%20*%20m03%20%2B%20tmp_20%20*%20m13%20%2B%20tmp_23%20*%20m23)%20-%0A%20%20%20%20%20%20%20%20(tmp_16%20*%20m03%20%2B%20tmp_21%20*%20m13%20%2B%20tmp_22%20*%20m23))%3B%0A%20%20%20%20%20%20dst%5B12%5D%20%3D%20d%20*%20((tmp_14%20*%20m22%20%2B%20tmp_17%20*%20m32%20%2B%20tmp_13%20*%20m12)%20-%0A%20%20%20%20%20%20%20%20(tmp_16%20*%20m32%20%2B%20tmp_12%20*%20m12%20%2B%20tmp_15%20*%20m22))%3B%0A%20%20%20%20%20%20dst%5B13%5D%20%3D%20d%20*%20((tmp_20%20*%20m32%20%2B%20tmp_12%20*%20m02%20%2B%20tmp_19%20*%20m22)%20-%0A%20%20%20%20%20%20%20%20(tmp_18%20*%20m22%20%2B%20tmp_21%20*%20m32%20%2B%20tmp_13%20*%20m02))%3B%0A%20%20%20%20%20%20dst%5B14%5D%20%3D%20d%20*%20((tmp_18%20*%20m12%20%2B%20tmp_23%20*%20m32%20%2B%20tmp_15%20*%20m02)%20-%0A%20%20%20%20%20%20%20%20(tmp_22%20*%20m32%20%2B%20tmp_14%20*%20m02%20%2B%20tmp_19%20*%20m12))%3B%0A%20%20%20%20%20%20dst%5B15%5D%20%3D%20d%20*%20((tmp_22%20*%20m22%20%2B%20tmp_16%20*%20m02%20%2B%20tmp_21%20*%20m12)%20-%0A%20%20%20%20%20%20%20%20(tmp_20%20*%20m12%20%2B%20tmp_23%20*%20m22%20%2B%20tmp_17%20*%20m02))%3B%0A%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Takes%20a%20%20matrix%20and%20a%20vector%20with%204%20entries%2C%20transforms%20that%20vector%20by%0A%20%20%20%20%20*%20the%20matrix%2C%20and%20returns%20the%20result%20as%20a%20vector%20with%204%20entries.%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20m%20The%20matrix.%0A%20%20%20%20%20*%20%40param%20%7BVector4%7D%20v%20The%20point%20in%20homogenous%20coordinates.%0A%20%20%20%20%20*%20%40param%20%7BVector4%7D%20dst%20optional%20vector4%20to%20store%20result%0A%20%20%20%20%20*%20%40return%20%7BVector4%7D%20dst%20or%20new%20Vector4%20if%20not%20provided%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20transformVector(m%2C%20v%2C%20dst)%20%7B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(4)%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%204%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20dst%5Bi%5D%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20for%20(var%20j%20%3D%200%3B%20j%20%3C%204%3B%20%2B%2Bj)%20%7B%0A%20%20%20%20%20%20%20%20%20%20dst%5Bi%5D%20%2B%3D%20v%5Bj%5D%20*%20m%5Bj%20*%204%20%2B%20i%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Takes%20a%204-by-4%20matrix%20and%20a%20vector%20with%203%20entries%2C%0A%20%20%20%20%20*%20interprets%20the%20vector%20as%20a%20point%2C%20transforms%20that%20point%20by%20the%20matrix%2C%20and%0A%20%20%20%20%20*%20returns%20the%20result%20as%20a%20vector%20with%203%20entries.%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20m%20The%20matrix.%0A%20%20%20%20%20*%20%40param%20%7BVector3%7D%20v%20The%20point.%0A%20%20%20%20%20*%20%40param%20%7BVector4%7D%20dst%20optional%20vector4%20to%20store%20result%0A%20%20%20%20%20*%20%40return%20%7BVector4%7D%20dst%20or%20new%20Vector4%20if%20not%20provided%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20transformPoint(m%2C%20v%2C%20dst)%20%7B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(3)%3B%0A%20%20%20%20%20%20var%20v0%20%3D%20v%5B0%5D%3B%0A%20%20%20%20%20%20var%20v1%20%3D%20v%5B1%5D%3B%0A%20%20%20%20%20%20var%20v2%20%3D%20v%5B2%5D%3B%0A%20%20%20%20%20%20var%20d%20%3D%20v0%20*%20m%5B0%20*%204%20%2B%203%5D%20%2B%20v1%20*%20m%5B1%20*%204%20%2B%203%5D%20%2B%20v2%20*%20m%5B2%20*%204%20%2B%203%5D%20%2B%20m%5B3%20*%204%20%2B%203%5D%3B%0A%0A%20%20%20%20%20%20dst%5B0%5D%20%3D%20(v0%20*%20m%5B0%20*%204%20%2B%200%5D%20%2B%20v1%20*%20m%5B1%20*%204%20%2B%200%5D%20%2B%20v2%20*%20m%5B2%20*%204%20%2B%200%5D%20%2B%20m%5B3%20*%204%20%2B%200%5D)%20%2F%20d%3B%0A%20%20%20%20%20%20dst%5B1%5D%20%3D%20(v0%20*%20m%5B0%20*%204%20%2B%201%5D%20%2B%20v1%20*%20m%5B1%20*%204%20%2B%201%5D%20%2B%20v2%20*%20m%5B2%20*%204%20%2B%201%5D%20%2B%20m%5B3%20*%204%20%2B%201%5D)%20%2F%20d%3B%0A%20%20%20%20%20%20dst%5B2%5D%20%3D%20(v0%20*%20m%5B0%20*%204%20%2B%202%5D%20%2B%20v1%20*%20m%5B1%20*%204%20%2B%202%5D%20%2B%20v2%20*%20m%5B2%20*%204%20%2B%202%5D%20%2B%20m%5B3%20*%204%20%2B%202%5D)%20%2F%20d%3B%0A%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Takes%20a%204-by-4%20matrix%20and%20a%20vector%20with%203%20entries%2C%20interprets%20the%20vector%20as%20a%0A%20%20%20%20%20*%20direction%2C%20transforms%20that%20direction%20by%20the%20matrix%2C%20and%20returns%20the%20result%3B%0A%20%20%20%20%20*%20assumes%20the%20transformation%20of%203-dimensional%20space%20represented%20by%20the%20matrix%0A%20%20%20%20%20*%20is%20parallel-preserving%2C%20i.e.%20any%20combination%20of%20rotation%2C%20scaling%20and%0A%20%20%20%20%20*%20translation%2C%20but%20not%20a%20perspective%20distortion.%20Returns%20a%20vector%20with%203%0A%20%20%20%20%20*%20entries.%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20m%20The%20matrix.%0A%20%20%20%20%20*%20%40param%20%7BVector3%7D%20v%20The%20direction.%0A%20%20%20%20%20*%20%40param%20%7BVector4%7D%20dst%20optional%20vector4%20to%20store%20result%0A%20%20%20%20%20*%20%40return%20%7BVector4%7D%20dst%20or%20new%20Vector4%20if%20not%20provided%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20transformDirection(m%2C%20v%2C%20dst)%20%7B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(3)%3B%0A%0A%20%20%20%20%20%20var%20v0%20%3D%20v%5B0%5D%3B%0A%20%20%20%20%20%20var%20v1%20%3D%20v%5B1%5D%3B%0A%20%20%20%20%20%20var%20v2%20%3D%20v%5B2%5D%3B%0A%0A%20%20%20%20%20%20dst%5B0%5D%20%3D%20v0%20*%20m%5B0%20*%204%20%2B%200%5D%20%2B%20v1%20*%20m%5B1%20*%204%20%2B%200%5D%20%2B%20v2%20*%20m%5B2%20*%204%20%2B%200%5D%3B%0A%20%20%20%20%20%20dst%5B1%5D%20%3D%20v0%20*%20m%5B0%20*%204%20%2B%201%5D%20%2B%20v1%20*%20m%5B1%20*%204%20%2B%201%5D%20%2B%20v2%20*%20m%5B2%20*%204%20%2B%201%5D%3B%0A%20%20%20%20%20%20dst%5B2%5D%20%3D%20v0%20*%20m%5B0%20*%204%20%2B%202%5D%20%2B%20v1%20*%20m%5B1%20*%204%20%2B%202%5D%20%2B%20v2%20*%20m%5B2%20*%204%20%2B%202%5D%3B%0A%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Takes%20a%204-by-4%20matrix%20m%20and%20a%20vector%20v%20with%203%20entries%2C%20interprets%20the%20vector%0A%20%20%20%20%20*%20as%20a%20normal%20to%20a%20surface%2C%20and%20computes%20a%20vector%20which%20is%20normal%20upon%0A%20%20%20%20%20*%20transforming%20that%20surface%20by%20the%20matrix.%20The%20effect%20of%20this%20function%20is%20the%0A%20%20%20%20%20*%20same%20as%20transforming%20v%20(as%20a%20direction)%20by%20the%20inverse-transpose%20of%20m.%20%20This%0A%20%20%20%20%20*%20function%20assumes%20the%20transformation%20of%203-dimensional%20space%20represented%20by%20the%0A%20%20%20%20%20*%20matrix%20is%20parallel-preserving%2C%20i.e.%20any%20combination%20of%20rotation%2C%20scaling%20and%0A%20%20%20%20%20*%20translation%2C%20but%20not%20a%20perspective%20distortion.%20%20Returns%20a%20vector%20with%203%0A%20%20%20%20%20*%20entries.%0A%20%20%20%20%20*%20%40param%20%7BMatrix4%7D%20m%20The%20matrix.%0A%20%20%20%20%20*%20%40param%20%7BVector3%7D%20v%20The%20normal.%0A%20%20%20%20%20*%20%40param%20%7BVector3%7D%20%5Bdst%5D%20The%20direction.%0A%20%20%20%20%20*%20%40return%20%7BVector3%7D%20The%20transformed%20direction.%0A%20%20%20%20%20*%20%40memberOf%20module%3Awebgl-3d-math%0A%20%20%20%20%20*%2F%0A%20%20%20%20function%20transformNormal(m%2C%20v%2C%20dst)%20%7B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(3)%3B%0A%20%20%20%20%20%20var%20mi%20%3D%20inverse(m)%3B%0A%20%20%20%20%20%20var%20v0%20%3D%20v%5B0%5D%3B%0A%20%20%20%20%20%20var%20v1%20%3D%20v%5B1%5D%3B%0A%20%20%20%20%20%20var%20v2%20%3D%20v%5B2%5D%3B%0A%0A%20%20%20%20%20%20dst%5B0%5D%20%3D%20v0%20*%20mi%5B0%20*%204%20%2B%200%5D%20%2B%20v1%20*%20mi%5B0%20*%204%20%2B%201%5D%20%2B%20v2%20*%20mi%5B0%20*%204%20%2B%202%5D%3B%0A%20%20%20%20%20%20dst%5B1%5D%20%3D%20v0%20*%20mi%5B1%20*%204%20%2B%200%5D%20%2B%20v1%20*%20mi%5B1%20*%204%20%2B%201%5D%20%2B%20v2%20*%20mi%5B1%20*%204%20%2B%202%5D%3B%0A%20%20%20%20%20%20dst%5B2%5D%20%3D%20v0%20*%20mi%5B2%20*%204%20%2B%200%5D%20%2B%20v1%20*%20mi%5B2%20*%204%20%2B%201%5D%20%2B%20v2%20*%20mi%5B2%20*%204%20%2B%202%5D%3B%0A%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20function%20copy(src%2C%20dst)%20%7B%0A%20%20%20%20%20%20dst%20%3D%20dst%20%7C%7C%20new%20MatType(16)%3B%0A%0A%20%20%20%20%20%20dst%5B0%5D%20%3D%20src%5B0%5D%3B%0A%20%20%20%20%20%20dst%5B1%5D%20%3D%20src%5B1%5D%3B%0A%20%20%20%20%20%20dst%5B2%5D%20%3D%20src%5B2%5D%3B%0A%20%20%20%20%20%20dst%5B3%5D%20%3D%20src%5B3%5D%3B%0A%20%20%20%20%20%20dst%5B4%5D%20%3D%20src%5B4%5D%3B%0A%20%20%20%20%20%20dst%5B5%5D%20%3D%20src%5B5%5D%3B%0A%20%20%20%20%20%20dst%5B6%5D%20%3D%20src%5B6%5D%3B%0A%20%20%20%20%20%20dst%5B7%5D%20%3D%20src%5B7%5D%3B%0A%20%20%20%20%20%20dst%5B8%5D%20%3D%20src%5B8%5D%3B%0A%20%20%20%20%20%20dst%5B9%5D%20%3D%20src%5B9%5D%3B%0A%20%20%20%20%20%20dst%5B10%5D%20%3D%20src%5B10%5D%3B%0A%20%20%20%20%20%20dst%5B11%5D%20%3D%20src%5B11%5D%3B%0A%20%20%20%20%20%20dst%5B12%5D%20%3D%20src%5B12%5D%3B%0A%20%20%20%20%20%20dst%5B13%5D%20%3D%20src%5B13%5D%3B%0A%20%20%20%20%20%20dst%5B14%5D%20%3D%20src%5B14%5D%3B%0A%20%20%20%20%20%20dst%5B15%5D%20%3D%20src%5B15%5D%3B%0A%0A%20%20%20%20%20%20return%20dst%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20%7B%0A%20%20%20%20%20%20copy%3A%20copy%2C%0A%20%20%20%20%20%20lookAt%3A%20lookAt%2C%0A%20%20%20%20%20%20addVectors%3A%20addVectors%2C%0A%20%20%20%20%20%20subtractVectors%3A%20subtractVectors%2C%0A%20%20%20%20%20%20scaleVector%3A%20scaleVector%2C%0A%20%20%20%20%20%20distance%3A%20distance%2C%0A%20%20%20%20%20%20distanceSq%3A%20distanceSq%2C%0A%20%20%20%20%20%20normalize%3A%20normalize%2C%0A%20%20%20%20%20%20compose%3A%20compose%2C%0A%20%20%20%20%20%20cross%3A%20cross%2C%0A%20%20%20%20%20%20decompose%3A%20decompose%2C%0A%20%20%20%20%20%20dot%3A%20dot%2C%0A%20%20%20%20%20%20identity%3A%20identity%2C%0A%20%20%20%20%20%20transpose%3A%20transpose%2C%0A%20%20%20%20%20%20length%3A%20length%2C%0A%20%20%20%20%20%20lengthSq%3A%20lengthSq%2C%0A%20%20%20%20%20%20orthographic%3A%20orthographic%2C%0A%20%20%20%20%20%20frustum%3A%20frustum%2C%0A%20%20%20%20%20%20perspective%3A%20perspective%2C%0A%20%20%20%20%20%20translation%3A%20translation%2C%0A%20%20%20%20%20%20translate%3A%20translate%2C%0A%20%20%20%20%20%20xRotation%3A%20xRotation%2C%0A%20%20%20%20%20%20yRotation%3A%20yRotation%2C%0A%20%20%20%20%20%20zRotation%3A%20zRotation%2C%0A%20%20%20%20%20%20xRotate%3A%20xRotate%2C%0A%20%20%20%20%20%20yRotate%3A%20yRotate%2C%0A%20%20%20%20%20%20zRotate%3A%20zRotate%2C%0A%20%20%20%20%20%20axisRotation%3A%20axisRotation%2C%0A%20%20%20%20%20%20axisRotate%3A%20axisRotate%2C%0A%20%20%20%20%20%20scaling%3A%20scaling%2C%0A%20%20%20%20%20%20scale%3A%20scale%2C%0A%20%20%20%20%20%20multiply%3A%20multiply%2C%0A%20%20%20%20%20%20inverse%3A%20inverse%2C%0A%20%20%20%20%20%20transformVector%3A%20transformVector%2C%0A%20%20%20%20%20%20transformPoint%3A%20transformPoint%2C%0A%20%20%20%20%20%20transformDirection%3A%20transformDirection%2C%0A%20%20%20%20%20%20transformNormal%3A%20transformNormal%2C%0A%20%20%20%20%20%20setDefaultType%3A%20setDefaultType%2C%0A%20%20%20%20%7D%3B%0A%20%20%7D())%3B%0A%0A%20%20const%20textures%20%3D%20%7B%7D%3B%0A%0A%20%20var%20vertexShaderCode%20%3D%20%5B%0A%20%20%20%20'attribute%20vec4%20a_position%3B'%2C%0A%20%20%20%20'attribute%20vec2%20a_texcoord%3B'%2C%0A%20%20%20%20'attribute%20float%20a_zOffset%3B'%2C%0A%20%20%20%20'attribute%20vec4%20aVertexColor%3B'%2C%0A%20%20%20%20''%2C%0A%20%20%20%20'uniform%20mat4%20u_matrix%3B'%2C%0A%20%20%20%20''%2C%0A%20%20%20%20'varying%20vec2%20v_texcoord%3B'%2C%0A%20%20%20%20'varying%20vec4%20vColor%3B'%2C%0A%20%20%20%20''%2C%0A%20%20%20%20'void%20main()%20%7B'%2C%0A%20%20%20%20'gl_Position%20%3D%20u_matrix%20*%20(a_position%20*%20a_zOffset%20*%20float(128))%20%2B%20vec4(0%2C0%2C1%2Ca_zOffset)%3B'%2C%0A%20%20%20%20'v_texcoord%20%3D%20a_texcoord%3B'%2C%0A%20%20%20%20'vColor%20%3D%20aVertexColor%3B'%2C%0A%20%20%20%20'%7D'%0A%20%20%5D.join('%5Cn')%3B%0A%0A%20%20var%20fragmentShaderCode%20%3D%20%5B%0A%20%20%20%20'precision%20mediump%20float%3B'%2C%0A%20%20%20%20''%2C%0A%20%20%20%20'varying%20vec2%20v_texcoord%3B'%2C%0A%20%20%20%20'varying%20vec4%20vColor%3B'%2C%0A%20%20%20%20''%2C%0A%20%20%20%20'uniform%20sampler2D%20u_texture%3B'%2C%0A%20%20%20%20''%2C%0A%20%20%20%20'void%20main()%20%7B'%2C%0A%20%20%20%20'gl_FragColor%20%3D%20texture2D(u_texture%2C%20v_texcoord)%20*%20vColor%3B'%2C%0A%20%20%20%20'%7D'%2C%0A%20%20%5D.join('%5Cn')%3B%0A%0A%20%20var%20quadPositions%20%3D%20%5B%0A%20%20%20%200%2C%200%2C%0A%20%20%20%200%2C%201%2C%0A%20%20%20%201%2C%200%2C%0A%20%20%20%201%2C%200%2C%0A%20%20%20%200%2C%201%2C%0A%20%20%20%201%2C%201%2C%0A%20%20%5D%3B%0A%0A%20%20var%20quadCoords%20%3D%20%5B%0A%20%20%20%200%2C%200%2C%0A%20%20%20%200%2C%201%2C%0A%20%20%20%201%2C%200%2C%0A%20%20%20%201%2C%200%2C%0A%20%20%20%200%2C%201%2C%0A%20%20%20%201%2C%201%2C%0A%20%20%5D%3B%0A%0A%20%20var%20quadZPositionArray%20%3D%20%5B%0A%20%20%20%201%2C%0A%20%20%20%201%2C%0A%20%20%20%201%2C%0A%20%20%20%201%2C%0A%20%20%20%201%2C%0A%20%20%20%201%0A%20%20%5D%3B%0A%0A%20%20var%20quadColors%20%3D%20%5B%0A%20%20%20%201.0%2C%201.0%2C%201.0%2C%201.0%2C%0A%20%20%20%201.0%2C%201.0%2C%201.0%2C%201.0%2C%0A%20%20%20%201.0%2C%201.0%2C%201.0%2C%201.0%2C%0A%20%20%20%201.0%2C%201.0%2C%201.0%2C%201.0%2C%0A%20%20%20%201.0%2C%201.0%2C%201.0%2C%201.0%2C%0A%20%20%20%201.0%2C%201.0%2C%201.0%2C%201.0%0A%20%20%5D%3B%0A%0A%20%20var%20TriangleZPositionArray%20%3D%20%5B%0A%20%20%20%201%2C%0A%20%20%20%201%2C%0A%20%20%20%201%0A%20%20%5D%3B%0A%0A%20%20var%20triangleColors%20%3D%20%5B%0A%20%20%20%201.0%2C%201.0%2C%201.0%2C%201.0%2C%0A%20%20%20%201.0%2C%201.0%2C%201.0%2C%201.0%2C%0A%20%20%20%201.0%2C%201.0%2C%201.0%2C%201.0%0A%20%20%5D%3B%0A%20%20var%20quadPositionBuffer%20%3D%20gl.createBuffer()%3B%0A%20%20gl.bindBuffer(gl.ARRAY_BUFFER%2C%20quadPositionBuffer)%3B%0A%20%20gl.bufferData(gl.ARRAY_BUFFER%2C%20new%20Float32Array(quadPositions)%2C%20gl.STATIC_DRAW)%3B%0A%0A%20%20var%20quadZPositionBuffer%20%3D%20gl.createBuffer()%3B%0A%0A%20%20var%20quadTexCoordBuffer%20%3D%20gl.createBuffer()%3B%0A%20%20gl.bindBuffer(gl.ARRAY_BUFFER%2C%20quadTexCoordBuffer)%3B%0A%20%20gl.bufferData(gl.ARRAY_BUFFER%2C%20new%20Float32Array(quadCoords)%2C%20gl.STATIC_DRAW)%3B%0A%0A%20%20var%20quadColorBuffer%20%3D%20gl.createBuffer()%3B%0A%0A%20%20var%20triPosBuffer%20%3D%20gl.createBuffer()%3B%0A%20%20var%20triUVBuffer%20%3D%20gl.createBuffer()%3B%0A%20%20var%20tricolorBuffer%20%3D%20gl.createBuffer()%3B%0A%20%20var%20triZBuffer%20%3D%20gl.createBuffer()%3B%0A%0A%20%20%2F**%0A%20%20%20*%20%40param%20%7Bstring%7D%20code%0A%20%20%20*%20%40param%20%7Bnumber%7D%20type%0A%20%20%20*%20%40returns%20%7BWebGLShader%7D%0A%20%20%20*%2F%0A%20%20const%20compileShader%20%3D%20(code%2C%20type)%20%3D%3E%20%7B%0A%20%20%20%20const%20shader%20%3D%20gl.createShader(type)%3B%0A%20%20%20%20gl.shaderSource(shader%2C%20code)%3B%0A%20%20%20%20gl.compileShader(shader)%3B%0A%20%20%20%20if%20(!gl.getShaderParameter(shader%2C%20gl.COMPILE_STATUS))%20%7B%0A%20%20%20%20%20%20console.error(gl.getShaderInfoLog(shader))%3B%0A%20%20%20%20%20%20throw%20new%20Error('Error%20compiling%20shader')%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20shader%3B%0A%20%20%7D%3B%0A%0A%20%20%2F**%0A%20%20%20*%20%40param%20%7BWebGLShader%7D%20vertexShader%0A%20%20%20*%20%40param%20%7BWebGLShader%7D%20fragmentShader%0A%20%20%20*%20%40returns%20%7BWebGLProgram%7D%0A%20%20%20*%2F%0A%20%20const%20createProgram%20%3D%20(vertexShader%2C%20fragmentShader)%20%3D%3E%20%7B%0A%20%20%20%20const%20program%20%3D%20gl.createProgram()%3B%0A%20%20%20%20gl.attachShader(program%2C%20vertexShader)%3B%0A%20%20%20%20gl.attachShader(program%2C%20fragmentShader)%3B%0A%20%20%20%20gl.linkProgram(program)%3B%0A%20%20%20%20if%20(!gl.getProgramParameter(program%2C%20gl.LINK_STATUS))%20%7B%0A%20%20%20%20%20%20console.error(gl.getProgramInfoLog(program))%3B%0A%20%20%20%20%20%20throw%20new%20Error('Error%20linking%20program')%3B%0A%20%20%20%20%7D%0A%20%20%20%20gl.validateProgram(program)%3B%0A%20%20%20%20if%20(!gl.getProgramParameter(program%2C%20gl.VALIDATE_STATUS))%20%7B%0A%20%20%20%20%20%20console.error(gl.getProgramInfoLog(program))%3B%0A%20%20%20%20%20%20throw%20new%20Error('Error%20validating%20program')%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20program%3B%0A%20%20%7D%3B%0A%0A%20%20const%20vertexShader%20%3D%20compileShader(vertexShaderCode%2C%20gl.VERTEX_SHADER)%3B%0A%20%20const%20fragmentShader%20%3D%20compileShader(fragmentShaderCode%2C%20gl.FRAGMENT_SHADER)%3B%0A%20%20const%20program%20%3D%20createProgram(vertexShader%2C%20fragmentShader)%3B%0A%0A%20%20%2F%2F%20look%20up%20where%20the%20vertex%20data%20needs%20to%20go.%0A%20%20const%20positionLocation%20%3D%20gl.getAttribLocation(program%2C%20'a_position')%3B%0A%20%20const%20texcoordLocation%20%3D%20gl.getAttribLocation(program%2C%20'a_texcoord')%3B%0A%20%20const%20zLocation%20%3D%20gl.getAttribLocation(program%2C%20'a_zOffset')%3B%0A%20%20const%20colorLocation%20%3D%20gl.getAttribLocation(program%2C%20'aVertexColor')%3B%0A%0A%20%20%2F%2F%20lookup%20uniforms%0A%20%20const%20matrixLocation%20%3D%20gl.getUniformLocation(program%2C%20'u_matrix')%3B%0A%20%20const%20textureLocation%20%3D%20gl.getUniformLocation(program%2C%20'u_texture')%3B%0A%0A%20%20%2F%2Fcool%20drawing%20functions%0A%0A%20%20%2F**%0A%20%20%20*%20%40param%20%7Bnumber%7D%20deg%0A%20%20%20*%20%40returns%20%7Bnumber%7D%0A%20%20%20*%2F%0A%20%20function%20degreesToRadians(deg)%20%7B%0A%20%20%20%20return%20deg%20*%200.0174533%3B%0A%20%20%7D%0A%0A%20%20function%20loadImageAndCreateTextureInfo(url%2C%20clamp)%20%7B%0A%20%20%20%20const%20texture%20%3D%20gl.createTexture()%3B%0A%20%20%20%20gl.bindTexture(gl.TEXTURE_2D%2C%20texture)%3B%0A%20%20%20%20%2F%2F%20Fill%20the%20texture%20with%20a%201x1%20blue%20pixel.%0A%20%20%20%20gl.texImage2D(gl.TEXTURE_2D%2C%200%2C%20gl.RGBA%2C%201%2C%201%2C%200%2C%20gl.RGBA%2C%20gl.UNSIGNED_BYTE%2C%20new%20Uint8Array(%5B0%2C%200%2C%20255%2C%20255%5D))%3B%0A%0A%20%20%20%20%2F%2F%20Let's%20assume%20all%20images%20are%20not%20a%20power%20of%202%0A%20%20%20%20if%20(clamp)%20%7B%0A%20%20%20%20%20%20gl.texParameteri(gl.TEXTURE_2D%2C%20gl.TEXTURE_WRAP_S%2C%20gl.CLAMP_TO_EDGE)%3B%0A%20%20%20%20%20%20gl.texParameteri(gl.TEXTURE_2D%2C%20gl.TEXTURE_WRAP_T%2C%20gl.CLAMP_TO_EDGE)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20gl.texParameteri(gl.TEXTURE_2D%2C%20gl.TEXTURE_WRAP_S%2C%20gl.REPEAT)%3B%0A%20%20%20%20%20%20gl.texParameteri(gl.TEXTURE_2D%2C%20gl.TEXTURE_WRAP_T%2C%20gl.REPEAT)%3B%0A%20%20%20%20%7D%0A%20%20%20%20gl.texParameteri(gl.TEXTURE_2D%2C%20gl.TEXTURE_MIN_FILTER%2C%20gl.NEAREST)%3B%0A%0A%20%20%20%20const%20textureInfo%20%3D%20%7B%0A%20%20%20%20%20%20%2F%2F%20we%20don't%20know%20the%20size%20until%20it%20loads%0A%20%20%20%20%20%20width%3A%201%2C%0A%20%20%20%20%20%20height%3A%201%2C%0A%20%20%20%20%20%20texture%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20Scratch.canFetch(url).then(allowed%20%3D%3E%20%7B%0A%20%20%20%20%20%20if%20(!allowed)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F%2F%20Permission%20is%20checked%20earlier.%0A%20%20%20%20%20%20%2F%2F%20eslint-disable-next-line%20no-restricted-syntax%0A%20%20%20%20%20%20const%20image%20%3D%20new%20Image()%3B%0A%20%20%20%20%20%20image.onload%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20%20%20textureInfo.width%20%3D%20image.width%3B%0A%20%20%20%20%20%20%20%20textureInfo.height%20%3D%20image.height%3B%0A%0A%20%20%20%20%20%20%20%20gl.bindTexture(gl.TEXTURE_2D%2C%20textureInfo.texture)%3B%0A%20%20%20%20%20%20%20%20gl.texImage2D(gl.TEXTURE_2D%2C%200%2C%20gl.RGBA%2C%20gl.RGBA%2C%20gl.UNSIGNED_BYTE%2C%20image)%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20image.crossOrigin%20%3D%20'anonymous'%3B%0A%20%20%20%20%20%20image.src%20%3D%20url%3B%0A%20%20%20%20%7D)%3B%0A%0A%20%20%20%20return%20textureInfo%3B%0A%20%20%7D%0A%0A%20%20function%20drawImage(tex%2C%20texWidth%2C%20texHeight%2C%20dstX%2C%20dstY%2C%20stampRotation)%20%7B%0A%20%20%20%20gl.bindTexture(gl.TEXTURE_2D%2C%20tex)%3B%0A%0A%20%20%20%20%2F%2F%20Tell%20WebGL%20to%20use%20our%20shader%20program%20pair%0A%20%20%20%20gl.useProgram(program)%3B%0A%0A%20%20%20%20gl.bindBuffer(gl.ARRAY_BUFFER%2C%20quadZPositionBuffer)%3B%0A%20%20%20%20gl.bufferData(gl.ARRAY_BUFFER%2C%20new%20Float32Array(quadZPositionArray)%2C%20gl.STATIC_DRAW)%3B%0A%0A%20%20%20%20gl.bindBuffer(gl.ARRAY_BUFFER%2C%20quadColorBuffer)%3B%0A%20%20%20%20gl.bufferData(gl.ARRAY_BUFFER%2C%20new%20Float32Array(quadColors)%2C%20gl.STATIC_DRAW)%3B%0A%20%20%20%20%2F%2F%20Setup%20the%20attributes%20to%20pull%20data%20from%20our%20buffers%20%0A%20%20%20%20gl.bindBuffer(gl.ARRAY_BUFFER%2C%20quadPositionBuffer)%3B%0A%20%20%20%20gl.enableVertexAttribArray(positionLocation)%3B%0A%20%20%20%20gl.vertexAttribPointer(positionLocation%2C%202%2C%20gl.FLOAT%2C%20false%2C%200%2C%200)%3B%0A%20%20%20%20gl.bindBuffer(gl.ARRAY_BUFFER%2C%20quadZPositionBuffer)%3B%0A%20%20%20%20gl.enableVertexAttribArray(zLocation)%3B%0A%20%20%20%20gl.vertexAttribPointer(zLocation%2C%201%2C%20gl.FLOAT%2C%20false%2C%200%2C%200)%3B%0A%20%20%20%20gl.bindBuffer(gl.ARRAY_BUFFER%2C%20quadTexCoordBuffer)%3B%0A%20%20%20%20gl.enableVertexAttribArray(texcoordLocation)%3B%0A%20%20%20%20gl.vertexAttribPointer(texcoordLocation%2C%202%2C%20gl.FLOAT%2C%20false%2C%200%2C%200)%3B%0A%20%20%20%20gl.bindBuffer(gl.ARRAY_BUFFER%2C%20quadColorBuffer)%3B%0A%20%20%20%20gl.enableVertexAttribArray(colorLocation)%3B%0A%20%20%20%20gl.vertexAttribPointer(colorLocation%2C%204%2C%20gl.FLOAT%2C%20false%2C%200%2C%200)%3B%0A%0A%20%20%20%20%2F%2F%20this%20matrix%20will%20convert%20from%20pixels%20to%20clip%20space%0A%20%20%20%20var%20matrix%20%3D%20m4.orthographic(0%2C%20gl.canvas.width%2C%20gl.canvas.height%2C%200%2C%20-1%2C%201)%3B%0A%20%20%20%20if%20(coordinateSpace%20%3D%3D%20%22Canvas%22)%20%7B%0A%20%20%20%20%20%20matrix%20%3D%20m4.translate(matrix%2C%20dstX%2C%20dstY%2C%200)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20var%20scalemultiplyer%20%3D%20canvas.width%20%2F%20runtime.stageWidth%3B%0A%20%20%20%20%20%20matrix%20%3D%20m4.translate(matrix%2C%20runtime.stageWidth%20%2F%202%20*%20scalemultiplyer%2C%20runtime.stageHeight%20%2F%202%20*%20scalemultiplyer%2C%200)%3B%0A%20%20%20%20%20%20matrix%20%3D%20m4.translate(matrix%2C%20dstX%2C%20-dstY%2C%200)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20this%20matrix%20will%20translate%20our%20quad%20to%20dstX%2C%20dstY%0A%0A%20%20%20%20matrix%20%3D%20m4.zRotate(matrix%2C%20degreesToRadians(stampRotation))%3B%0A%0A%20%20%20%20%2F%2F%20this%20matrix%20will%20scale%20our%201%20unit%20quad%0A%20%20%20%20%2F%2F%20from%201%20unit%20to%20texWidth%2C%20texHeight%20units%0A%20%20%20%20matrix%20%3D%20m4.scale(matrix%2C%20texWidth%2C%20texHeight%2C%201)%3B%0A%20%20%20%20matrix%20%3D%20m4.translate(matrix%2C%20stampOffset%5B0%5D%2C%20stampOffset%5B1%5D%2C%200)%3B%0A%0A%20%20%20%20%2F%2F%20Set%20the%20matrix.%0A%20%20%20%20gl.uniformMatrix4fv(matrixLocation%2C%20false%2C%20matrix)%3B%0A%0A%20%20%20%20%2F%2F%20Tell%20the%20shader%20to%20get%20the%20texture%20from%20texture%20unit%200%0A%20%20%20%20gl.uniform1i(textureLocation%2C%200)%3B%0A%0A%20%20%20%20%2F%2F%20draw%20the%20quad%20(2%20triangles%2C%206%20vertices)%0A%20%20%20%20gl.drawArrays(gl.TRIANGLES%2C%200%2C%206)%3B%0A%20%20%7D%0A%0A%20%20function%20drawTexturedTri(tex%2C%20trianglePoints%2C%20triangleUvs)%20%7B%0A%20%20%20%20gl.bindTexture(gl.TEXTURE_2D%2C%20tex)%3B%0A%0A%20%20%20%20gl.bindBuffer(gl.ARRAY_BUFFER%2C%20triPosBuffer)%3B%0A%20%20%20%20gl.bufferData(gl.ARRAY_BUFFER%2C%20new%20Float32Array(trianglePoints)%2C%20gl.STATIC_DRAW)%3B%0A%0A%20%20%20%20gl.bindBuffer(gl.ARRAY_BUFFER%2C%20triUVBuffer)%3B%0A%20%20%20%20gl.bufferData(gl.ARRAY_BUFFER%2C%20new%20Float32Array(triangleUvs)%2C%20gl.STATIC_DRAW)%3B%0A%0A%20%20%20%20gl.bindBuffer(gl.ARRAY_BUFFER%2C%20triZBuffer)%3B%0A%20%20%20%20gl.bufferData(gl.ARRAY_BUFFER%2C%20new%20Float32Array(TriangleZPositionArray)%2C%20gl.STATIC_DRAW)%3B%0A%0A%20%20%20%20gl.bindBuffer(gl.ARRAY_BUFFER%2C%20tricolorBuffer)%3B%0A%20%20%20%20gl.bufferData(gl.ARRAY_BUFFER%2C%20new%20Float32Array(triangleColors)%2C%20gl.STATIC_DRAW)%3B%0A%0A%20%20%20%20%2F%2F%20Tell%20WebGL%20to%20use%20our%20shader%20program%20pair%0A%20%20%20%20gl.useProgram(program)%3B%0A%0A%20%20%20%20%2F%2F%20Setup%20the%20attributes%20to%20pull%20data%20from%20our%20buffers%0A%20%20%20%20gl.bindBuffer(gl.ARRAY_BUFFER%2C%20triPosBuffer)%3B%0A%20%20%20%20gl.enableVertexAttribArray(positionLocation)%3B%0A%20%20%20%20gl.vertexAttribPointer(positionLocation%2C%202%2C%20gl.FLOAT%2C%20false%2C%200%2C%200)%3B%0A%20%20%20%20gl.bindBuffer(gl.ARRAY_BUFFER%2C%20triUVBuffer)%3B%0A%20%20%20%20gl.enableVertexAttribArray(texcoordLocation)%3B%20%2F%2F%0A%20%20%20%20gl.vertexAttribPointer(texcoordLocation%2C%202%2C%20gl.FLOAT%2C%20false%2C%200%2C%200)%3B%0A%20%20%20%20gl.bindBuffer(gl.ARRAY_BUFFER%2C%20triZBuffer)%3B%0A%20%20%20%20gl.enableVertexAttribArray(zLocation)%3B%20%2F%2F%0A%20%20%20%20gl.vertexAttribPointer(zLocation%2C%201%2C%20gl.FLOAT%2C%20false%2C%200%2C%200)%3B%0A%20%20%20%20gl.bindBuffer(gl.ARRAY_BUFFER%2C%20tricolorBuffer)%3B%0A%20%20%20%20gl.enableVertexAttribArray(colorLocation)%3B%20%2F%2F%0A%20%20%20%20gl.vertexAttribPointer(colorLocation%2C%204%2C%20gl.FLOAT%2C%20false%2C%200%2C%200)%3B%0A%0A%20%20%20%20%2F%2F%20this%20matrix%20will%20convert%20from%20pixels%20to%20clip%20space%0A%20%20%20%20var%20matrix%20%3D%20m4.orthographic(0%2C%20gl.canvas.width%2C%20gl.canvas.height%2C%200%2C%20-1%2C%201)%3B%0A%0A%20%20%20%20%2F%2F%20this%20matrix%20will%20translate%20our%20quad%20to%20dstX%2C%20dstY%0A%0A%20%20%20%20%2F%2F%20this%20matrix%20will%20scale%20our%201%20unit%20quad%0A%20%20%20%20%2F%2F%20from%201%20unit%20to%20texWidth%2C%20texHeight%20units%0A%0A%20%20%20%20if%20(coordinateSpace%20%3D%3D%20%22Scratch%22)%20%7B%0A%20%20%20%20%20%20var%20scalemultiplyer%20%3D%20canvas.width%20%2F%20runtime.stageWidth%3B%0A%20%20%20%20%20%20matrix%20%3D%20m4.translate(matrix%2C%20runtime.stageWidth%20%2F%202%20*%20scalemultiplyer%2C%20runtime.stageHeight%20%2F%202%20*%20scalemultiplyer%2C%200)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Set%20the%20matrix.%0A%20%20%20%20gl.uniformMatrix4fv(matrixLocation%2C%20false%2C%20matrix)%3B%0A%0A%20%20%20%20%2F%2F%20Tell%20the%20shader%20to%20get%20the%20texture%20from%20texture%20unit%200%0A%20%20%20%20gl.uniform1i(textureLocation%2C%200)%3B%0A%0A%20%20%20%20%2F%2F%20draw%20the%20quad%20(2%20triangles%2C%206%20vertices)%0A%20%20%20%20gl.drawArrays(gl.TRIANGLES%2C%200%2C%203)%3B%0A%20%20%7D%0A%0A%20%20function%20hexToRgb(hex)%20%7B%0A%20%20%20%20if%20(typeof%20hex%20%3D%3D%3D%20'string')%20%7B%0A%20%20%20%20%20%20const%20splitHex%20%3D%20%2F%5E%23%3F(%5Ba-f%5Cd%5D%7B2%7D)(%5Ba-f%5Cd%5D%7B2%7D)(%5Ba-f%5Cd%5D%7B2%7D)%24%2Fi.exec(hex)%3B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20r%3A%20parseInt(splitHex%5B1%5D%2C%2016)%2C%0A%20%20%20%20%20%20%20%20g%3A%20parseInt(splitHex%5B2%5D%2C%2016)%2C%0A%20%20%20%20%20%20%20%20b%3A%20parseInt(splitHex%5B3%5D%2C%2016)%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20%7B%0A%20%20%20%20%20%20r%3A%20Math.floor(hex%20%2F%2065536)%2C%0A%20%20%20%20%20%20g%3A%20Math.floor(hex%20%2F%20256)%20%25%20256%2C%0A%20%20%20%20%20%20b%3A%20hex%20%25%20256%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%0A%20%20function%20getspritecostume(util%2C%20c)%20%7B%0A%20%20%20%20let%20target%20%3D%20util.target%3B%0A%20%20%20%20let%20dataURI%20%3D%20target.sprite.costumes%5Bc%20-%201%5D.asset.encodeDataURI()%3B%0A%20%20%20%20return%20dataURI%3B%0A%20%20%7D%0A%0A%20%20async%20function%20coolcash(uri%2C%20clamp)%20%7B%0A%20%20%20%20if%20(!textures.hasOwnProperty(uri))%20%7B%0A%20%20%20%20%20%20textures%5Buri%5D%20%3D%20await%20loadImageAndCreateTextureInfo(uri%2C%20clamp)%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%0A%20%20%2F%2FSplit%20Blocks%20Function%0A%20%20function%20splitBlockCatagories(Catagories)%20%7B%0A%20%20%20%20let%20returnedArray%20%3D%20%5B%5D%3B%0A%20%20%20%20Catagories.forEach(Catagory%20%3D%3E%20%7B%0A%20%20%20%20%20%20Catagory.blocks.forEach(Block%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20if%20((!Block.blockIconURI)%20%26%26%20Catagory.icon)%20%7B%0A%20%20%20%20%20%20%20%20%20%20Block.blockIconURI%20%3D%20Catagory.icon%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20returnedArray.push(Block)%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20returnedArray.push('---')%3B%0A%20%20%20%20%7D)%3B%0A%0A%20%20%20%20return%20returnedArray%3B%0A%20%20%7D%0A%0A%20%20const%20BlankIcon%20%3D%20%22data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAAFoAAABZCAYAAAC%2BPDOsAAAAAXNSR0IArs4c6QAAAihJREFUeF7t3VtuwyAQBdB4Cd1S19XPrqtb6hJakcQOJtjmMQPzuPwgJGuAoyt%2BLMFye7S%2FZ792SzLGsFMggKbIcUmAdwLHyd2gP36%2Bb7%2BfX2lpYBNgb4kOyGsDNoFs5iy%2BJzqGDmNg02JnE41k0yKHaqfQSDYd%2BCU0sGmwi6CB3Y9dDA3sPuwqaGC3Y1dDA7sNuwka2PXYzdDArsPuggZ2OXY3NLDLsEmggX2NTQYN7HNsUmhgH2OTQwM7j80CDex3bDZoYO%2BxWaGB%2FcJmhwb2A3sINLAHQnvHHpbo9bTy%2Bnd9OLTXZE%2BB9og9Ddob9lRoT9jTob1gi4D2gC0G2jq2KGjL2OKgrWKLhLaILRbaGrZoaEvY4qGtYKuAtoCtBlo7tipozdjqoLViq4TWiK0WWhu2amhN2OqhtWCbgNaAbQZaOrYpaMnY5qClYpuElohtFloatmloSdjmoaVgu4CWgO0Geja2K%2BiZ2O6gZ2G7hJ6B7RZ6NLZr6JHY7qFHYQM6SA%2B4ixXQT2hubEBH0JzYgE6gubABnYHmwAb0ATQ1NqBPoCmxAX0BTYUN6AJoCmxAF0L3YgO6AroHG9CV0K3YgG6AbsEGdCN0LTagO6BrsAHdCV2KDWgC6BJsQBNBX2EDmhD6DBvQxNBH2Bt0%2BCB905BhDW5KJjdWLgE6tN1zqG40mDcaY79BM8%2FttvwKvUu1Ww2%2BjW9HR26Ks2es%2BZZko3Ic4PuO%2FgGXQ1VnDpD%2BgwAAAABJRU5ErkJggg%3D%3D%22%3B%0A%20%20const%20CoordsIcon%20%3D%20%22data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAAGIAAABgCAYAAADmbacFAAAAAXNSR0IArs4c6QAAA2xJREFUeF7tncFxwyAQRe0S0pKLSDWZHDKpJkWkpZSQDJKxkAwsYtfMRn65OaBl%2BU8fMLLx%2BbT%2B%2B72%2BPG%2F%2BX3oZ64fy3DVSeWMzx68WxUsFi72WYEjXSOXHV3dHD4PYk2Av35%2B3y34ubxKMWeSP16Wp96%2F0Gql8R4rPUXUCkUKI3b7CKLnidwUhXrTAWENal0tOew7lN72UQJTH%2FtQNadAII1c%2BlwEic6v1g9gOTeldX4cEiCEgSgPLeg55yuGn1uleR4SY9xNyrSWGperNNwYEbhBHAA2INlcAQYQQVzC15WvLKie%2FlL1f0jJJV5BoHSG7grlhiCPkCZuhyQmIkAauEGFohibZDcwTIoBYYQwIXCEC6QXR7gZcIULQLF%2FLS9YwH7DX1CR%2BWqnfEey%2B7hb7EXtNPI8wxTA%2FG%2Bh5Zy09gZPKjbvx%2F8P1gljeUa81SLcxeGa94%2F7QgIjNBMFr%2B0hS%2BY50j1vVAsRx1RnYM0AMFPsRqyYn6R8nDRzhhCUgAOFEASdp4AhAOFHASRo4AhBOFHCSBo4AhBMFnKSBIwDhRAEnaeAIQDhRwEkaOAIQThRwkgaOAIQTBZykgSMA4UQBJ2ngCEA4UcBJGjgCEE4UcJIGjgCEEwWcpIEjAOFEASdp4AhAOFHASRo4AhBOFHCSBo4AhBMF7NJoPfU5Ww9H2IDIfYM2RN5%2BybP4TVtA6EHkzyW5Pxqp%2Bt1zQFiAKB82HF1RPkTmCgwQjwIR4kpHdC91zoCwABFi1F0hntgDiEeCiHe8dJLP6YQj9BymCOqDxHCEEYkJRunOz7WxOf0TEJYgSnPFto3MEayAsAPRPkQBwlb1TDR5rigcSIwj7NnUYRQOIwbESBCV47kBYQuiyw23fZDKr27ldhBtUz9WtPp5uHNftzuyt3%2F2nHJ5LPlsetPtBhxhAyBG6XYDIOxAqNwACEsQDRt7teZYNelhSA99mhY8gLAAoXQDQ5Mewry%2FJD8qFVvCEaJEYoXahweahiUcIWrcXGGBkT6n3vFLxTiiWWux4vYzS9l30KUogBD1HVMBEGN0FlsBhCjRmAqAGKOz2EoLCDEIFVQKTJN6EYQqNBc3KfBzeYv1yh8wa4pEJbUCEQaOUEupDxBgAEKvozoCINQS6gOshiZ9OCIoFZgna2UQLu9X4LYf9Qeqxh17SNwkIgAAAABJRU5ErkJggg%3D%3D%22%3B%0A%20%20const%20SpriteIcon%20%3D%20%22data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAAGAAAABeCAYAAADc6BHlAAAAAXNSR0IArs4c6QAABItJREFUeF7tncuN2zAQhu0SctmCAuSQDnLZAlLCAjkG2BJSwF62gxwWSEG5pIQEFJYKRQ5f8%2BBzfLSoMfV%2F8yIl2%2Fdb%2BPrrvXUHxti3%2FLGJobeUndR5Sx9zRUmJWTquVCyF8a4UKOzj89Pt5em5VMxj3Idf34Pxfz5%2By9nYHoQV4PR%2BI777ioGABM%2BpHQGyNYRqABjhfTAAiG0hRAH4ns8hvIIIc0RRcZUQ307Fi4btIiELQFJ8hXALevNLK9pC%2FN0h%2BCF%2FAmgp%2Fs4QFECudxY%2BDtaAHt6%2FaxQoAGEPz5kP1gE9vR%2BIguXb0tEBGCZLQ7gAGMH7jeI7Lc6GBOBB0AjIFRKJ404UKAAJgXM2dwLQdfUbA7ETAKPBAWGUIgwUYpfTUilpmCJccPsyFixTA%2BkOgCC8D2RKEN0AQMI%2F%2Fn7L1ebz%2BMvDpyUiostK2Be%2FRnhIdQDGNNHQFAC38C6MSEQMDyLYDZXqhCTFT4CYD4BUO%2BoCoKacXKHwomFoCOAdMe4oaCm%2BhTMLBPFbkj3EnwkCFJ5sWxM9xTcQZoiCWH5kgdAbwAwQsgAoRdkCkC66FUV5uIKcmhDpIa0RvH%2BGWpDzCDSEUbx%2F9DSUA3BuVbthnmtTR%2FJ%2BIApKrjmX1diO10wG%2FApT7psxvfP%2FSgDstdR8Me82IABzHTWOx%2BbtkCHKRIpAKIA0PwoAyHIARQG0BXBJU6OIP3InxB0BQZ3oDSFx54w7JaNqxZIAKkXvemtzKQAp4b%2F8%2FBH10NfPX1PeK6XR8ZmSxo%2BC3CoFQeKnRI8pHoEhppOYYfuwlzQAX3iM6BAMAISIViJG3y%2Fo%2F88fVDxuUlPJpMR35yANYloALcS3IDwIrJqxGgO8VywKXABcaScVfVIQpgTQWnzJSJAGYObOGgW9xJeC0AIAKwQLoEXaKeiOyPqRDRR2LZdNOmxr2tv7JaKgFYBLFGAXaL29f3YAJAijeD8AgeTEpJML048%2FDHXPYGAApC2dHgCCLWv7Rqo2jJJ%2BuNNQTwBBSoIiykJRAMh8U3ha0f1lY6tX%2B5lpSdGOjD6xUFjMsCQMBYCRlH7OCUUB0MXEWFAAGNWYzzkgaAQwq1phbigAXNvTIxbhGJNmAFxxYxG3LQDJNBR7OgKCoAAqclfJ0MyjKUHtccaTsgjp5JILYx4jloasoKn%2FT7CRwOX9pE0kZmFLzYm0o66gPgAzMfen%2FA2EnQGc%2B0ec7WgOgA%2FB8RZyBiEbKHVdxnFdoiACgawf2QCjsDWm2CH4RRhKRQAEsn5kAzWqMY69bNhxpaMeEGYFcNYCC3VWCDMDWALC7ACmh7ACAJuFWOpCakUsUZhXAhBEQ019yG1FWFvcEFYDAEYDsvtytbk%2B2ef93aO17%2F35XZG2RYOQFzDCacU3%2BwtWtyIQVgcQcwIjJuba2SFgJjGCZ%2FecAysEBYBDyQZBAeAABB0XtjtSAHgALBAUAA0AGYICoAMgQVAAPADQEBQAHwAMhLsC4AVQBMHdslAA%2FACyEBwAGgEy%2Bh9WwcWav2GnESBIwIcAfJRGgKz%2BYST4u67%2FAPKrBHxjStmdAAAAAElFTkSuQmCC%22%3B%0A%20%20const%20ColorIcon%20%3D%20%22data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAAF4AAABeCAYAAACq0qNuAAAAAXNSR0IArs4c6QAABTFJREFUeF7t3b2KFEEUBeAecBVkk8nERBSMBEGMTDcxN%2FIhfATDRdinMDSaV5gn8REEo40MlBqoobrmVtWtqvtzWnYzd3tmer46ffrOr7tlOz9%2Fmbu6Y27nuhniTnKBe%2BGg7ivKzmhhlxbH%2FX577UAT%2BsmnD81EP3r9vLnN%2Fd2huc2yLOYO1jdYBOdA54Ic%2BPwyjYUw87C6IRJ8BDuFHIFPL19ZBHUX9RtYluUCfRY84s3Cx%2BspLICqjeaVq4FLw3ssgAa8OrgWvOUCSMOv0KUqpTSWSFVN6fqJChLzEruivMu10QOWNny4DS18CXjTlEtONZwBv1I%2FU3ZTF%2FZIuRe8dPpn4N2Srn1yrR0JUtUzCu%2BObtXx1CJI4I%2FAQ6B7wkvUTi88DLo3%2FCz%2BMLzFuNiaOizGydY%2BZLXD9mRvmE4wCOgIiS%2BMmixT1kaI6EjwRO00XZsboKKjwffiP8C3Srzj7z1934I%2FTzEove75yJWzBlx8FjwiOmLVECfbom8N%2Fpz26xfPlj%2FvX3IW3HQbhHGS8ciWNC7Br9DTK0daAET4xx%2Ffnbh%2B33xN2S6cu%2BHDtaHgI8FH8Kg9Al9Me35YeS8AAnwOnhrV8KnEs%2BHjjXgtgCf8%2Fd1htz%2FeVt%2BY1QPfje6J7wVfS3neCiX8PPHD8B4LYA3fA97qehI%2BjI%2BzPxb1YwU%2FAl7o%2BrO3GrzF9GMBP4uejZYk%2FHTNlI4SrfRrwkuA1%2BomTfwJXqJmrBZAA14SvFY3pvDS9SMJrwVOpP5kHuHVakYz%2FVLw2ujUUwhu8BLj5yy8BXip51fwmv3eGk9HTsCj8JbgpZ6HgR%2Fp%2F154L3Cq56Hge%2BunB94bPZ%2FnIeG5C8CBRwAvJd58omn1ffr3WvfX4JHAqRNsSDw0fC39FDwi%2BKbhqQXI4ZHR81l%2BM4mn6ifCo4P%2FF4lPF%2BDq%2B5ee04X7tumLIptMfBC8un663Pz4dsI8%2FvrpjsrZgU3DB%2FD4E%2BHjv9EXYJPwKXgJHj39m4On0ANynvj0cEdM%2F2bgS%2BC1xOddi7QAOXzYV%2FVXnzgnn9XEknR56bK1xCOmP4HfwT1X00p5CsqFRzn5QsL3gPdUDXW0eNUPHPwIeuvk2qo2D%2FwifNhZy1ehRsFnE%2B%2FR%2F%2Flb%2BVxec50Fl4S36v8SvNlkI4U%2BWzXW3Z%2FWTLhts%2FfVSIJrJF67fprw0j2vAa4NL10%2F1Fu1Vd%2B0qomuUTVa9ZOnPa8asZ7XBrdKvFT9sOFH68YK3AN%2BtH7UPxFijW5VNbP1w4U%2F1w039R7gnonvqZ%2BeD5%2Bx4T3BUeBb9dML38RHQPesGqp%2Bwu%2FS539S9P3xNnzSezVBdn2yGwUcLfFU%2FYx8sjtez%2BodZmjoiImPcIe3n89rQaWdmuPzo%2BiEv3%2FzqnR0uf6%2B94UQq51N4E%2Bf%2Fs5rhg2Pio8In6a99n%2BPtL4oaHWiRUs%2BGjwXnZP4B%2FiOfpKGh8VHSnwPOjfxF1MOSuWgwPei98LDJR8BfgR9Ch5h0vGGz9C7PDlTDTnbx1961o4n%2FAx61wpl%2BquvhPLC94KfRZ%2BBX%2FW9V%2B14wEugz8K741vDS6FLwLviW8JLokvBX8z5VtVjAS8NHrFGpprag2jTk642vBa6dOLJ5GumXwueABe3kk58ejRcfAup9NgpDW8BrlU1VA2pLYAUvCW4JfzF5CP1qHcWvgAuXitUGjWrhpX%2BmUUYga9gm4BbJ776fA%2B1QpzzAQe%2BAe3mYJ340iha%2FTrw2vw6%2BDf3%2B%2B2%2BAwSc1iJA3VeonWmkl7sgm7hP%2FwDwgcxktVR5CQAAAABJRU5ErkJggg%3D%3D%22%3B%0A%20%20const%20LineStyleIcon%20%3D%20%22data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAAE4AAABOCAYAAACOqiAdAAAAAXNSR0IArs4c6QAAAkxJREFUeF7t2m1OBCEMBmDnCF7Jc%2FnTc3klj7CG0TFIgLbsQD9498cmm2kUn22BgscLXpTAowg40ufzDa%2BmQIl2BR6Aa2fNifb6%2BfEv4uvt%2FfwMuDpcFS2FAk6YaVc44ISZBrjBTMvLNE1xmON%2BIJtzWplp17oAuAE0rKqDaLvDicsznx53LdWn0HbNuKfRAFfZmlwbXKqr2rFUyXaKQkPGZRnHzbS%2F45FNj5Sax0Vcj%2BilWj2E%2FMXpPSP9IsM9nVU9vahw3UNIzuRPpVxEuFtWzd3guptb6cq5S6ne0hFQmRZtO7IULcoGeDlaBDgVNO9wamie4VTRvMKpo3mEM4HmDc4Mmic4U2he4MyhuYEr%2F9Uqb4vu7D%2B57ZZ7OC0013CaaG7g0kDzctVG8wKXxlk7Blc9hFX95cVkzMFJMSbGbGIQeUalkrRQitQKawFu%2BsUKhTDyXBuOc0egPcaqq%2BagOGhmFzAtOJNtlKRkNeDco2mUQQi01XBh0FbChUJbBRcObQVcSLTZcGHRZsKFRpsFFx5tBtwWaFPgLF6sSFopbuzdLdejBefhjI2LtizjoqFNgbN4sSLJJG7s3aVq8mKFiyGJG4UrL1ZGf45krKZiR%2F7g2m3UjLI3BVUORgrn8mJlxjcggWtubiOumhQ2F871xQqFMPKcA7dNGyUBpOCA1tDswQGtk4ItOKARdVuDAxpjsivhgMZAK3f7QGOi5XBAE6BdcEATorHgdmynOI5pcUAPypEqYppwyLS%2B5rUdwRmbMOvyfdz2p7oSu299qhZaTMEypAAAAABJRU5ErkJggg%3D%3D%22%3B%0A%0A%0A%20%20%2F%2FBlock%20Catagories%20in%20pen%2B%20version%205.0%0A%20%20const%20UtilityBlocks%20%3D%20%7B%0A%20%20%20%20blocks%3A%20%5B%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20blockIconURI%3A%20SpriteIcon%2C%0A%20%20%20%20%20%20%20%20opcode%3A%20%22precachetextures%22%2C%0A%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20text%3A%20%22Start%20loading%20image%20from%20url%3A%20%5Buri%5D%20clamp%20the%20texture%3F%20%5Bclamp%5D%22%2C%0A%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20uri%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20EXAMPLE_IMAGE%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20clamp%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20'TFmenu'%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20blockIconURI%3A%20SpriteIcon%2C%0A%20%20%20%20%20%20%20%20opcode%3A%20%22getcostumedata%22%2C%0A%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20text%3A%20%22Get%20data%20uri%20of%20costume%5Bcostu%5D%22%2C%0A%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20costu%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%221%22%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20spr%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%221%22%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20blockIconURI%3A%20BlankIcon%2C%0A%20%20%20%20%20%20%20%20opcode%3A%20%22SolidColorRet%22%2C%0A%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20text%3A%20%22Solid%20Color%22%2C%0A%20%20%20%20%20%20%20%20disableMonitor%3A%20true%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20blockIconURI%3A%20ColorIcon%2C%0A%20%20%20%20%20%20%20%20opcode%3A%20%22rgbtoSColor%22%2C%0A%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20text%3A%20%22Convert%20R%5BR%5D%20G%5BG%5D%20B%5BB%5D%20to%20Hex%22%2C%0A%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20R%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'255'%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20G%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'255'%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20B%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'255'%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20blockIconURI%3A%20ColorIcon%2C%0A%20%20%20%20%20%20%20%20opcode%3A%20%22hsvtoSColor%22%2C%0A%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20text%3A%20%22Convert%20Hue%5BH%5D%20Saturation%5BS%5D%20Value%5BV%5D%20to%20Hex%22%2C%0A%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20H%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'0'%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20S%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'100'%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20V%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'100'%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20blockIconURI%3A%20CoordsIcon%2C%0A%20%20%20%20%20%20%20%20opcode%3A%20%22setCoordSpace%22%2C%0A%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20text%3A%20%22Set%20the%20coordinate%20space%20to%20%5Bspace%5D%22%2C%0A%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20space%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20'coordTypes'%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20blockIconURI%3A%20CoordsIcon%2C%0A%20%20%20%20%20%20%20%20opcode%3A%20%22coordBlock%22%2C%0A%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20text%3A%20%22%5Bc1%5D%5Bc2%5D%5Bc3%5D%5Bc4%5D%5Bc5%5D%5Bc6%5D%22%2C%0A%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20c1%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%220%22%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20c2%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%220%22%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20c3%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%220%22%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20c4%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%220%22%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20c5%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%220%22%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20c6%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%220%22%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%5D%0A%20%20%7D%3B%0A%0A%20%20const%20StampBlocks%20%3D%20%7B%0A%20%20%20%20icon%3A%20%22data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAAGIAAABYCAYAAAAORCLFAAAAAXNSR0IArs4c6QAAArZJREFUeF7tnDFSwzAQRe2SgoIr0XCTlJyAkhNQ5iY0XImCghLGmcijmBjLWe3qJ35UDCPtrv7T1yrG0HfxXz%2FxKVdn7FfPME6ITngNEHJJw%2FQJS9R13QmEu92TcQ%2F5TP%2Fev28HhCqERKAFjHBHqEMYYNwyiPFYugYQExghmzUkSd4fAHG%2BtwFipudnx1OIRiFJcMTyDQ8QOGJ5l7QcwdHUUv0sNyAA4aoAnyMW5KVZ06xdHWgOTo8wS1gnACDq6GiOAgizhHUCAKKOjuYogDBLWCcAIOroaI4CCLOEdQIAoo6O5ig3D8KsUHyAkKcPIUmmr9LEa2nKGKJRSJIVMhweDt6%2F7f6d8vW8XxFydqjU2qWKSc5ZAnEphQlAqbVLFQOIS7dY%2FXlFR5MlbeYKqU0oVYy3IwaAgCjbxjiiTCf3UYBwl7gsASDKdHIfBQh3icsSAKJMJ%2FdRkSCGxcjcGmUKOSIGhPteL0sAiDKdXEeNbwN6PWuafKDjaJrBCQjXfV4ePASE6mMOpWYNiPJN6zoSEK7ylgcHRLlWriPdr66pesXf1Mn1CM%2BrKyDKjIQjynRyHxUGQvEKq3I0hTXqM8eThAYSReQvoEX0CBwxf7qFHkuKz5zmHNHkX75FuWHm9uTeBI8Jzmqe%2F7CJ%2BPnqNwIiX%2FKof%2FqmKYRoALkSld6jtbqpH0CcQGgpinU11zR%2F%2Bun%2BBAQQYlHmMEYQQIiFML0wAKKN%2FmPW5ApAAKKxAiLpcQQgRBQQKQNHAEJEAZEycAQgRBQQKQNHAEJEAZEycAQgRBQQKQNHAEJEAZEycAQgRBQQKQNHqIIQqWuzZfx5i2OzSjReOCAaA0jpRxAPH68iJW2rjM%2FHl8OCAdGYOyAaA0jpAQEIEQVEysARqiCGurg5xdJJbji5NcWWQLapAhJ%2FqAKWrv8Fl7tFSQcWbxYAAAAASUVORK5CYII%3D%22%2C%0A%20%20%20%20blocks%3A%20%5B%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20opcode%3A%20%22pendrawspritefromurl%22%2C%0A%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20text%3A%20%22Stamp%20the%20image%20from%20url%3A%20%5Burl%5D%20at%20x%3A%5Bx%5D%20y%3A%5By%5D%22%2C%0A%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20url%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20EXAMPLE_IMAGE%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20x%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22240%22%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20y%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22180%22%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20opcode%3A%20%22rotateStamp%22%2C%0A%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20text%3A%20%22Set%20stamp%20rotation%20to%20%5BANGLE%5D%22%2C%0A%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20ANGLE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.ANGLE%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%2290%22%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20opcode%3A%20%22getstamprotation%22%2C%0A%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20text%3A%20%22Stamp%20Rotation%22%2C%0A%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20ANGLE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.ANGLE%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%2290%22%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20opcode%3A%20%22setpenstrechandsquash%22%2C%0A%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20text%3A%20%22Set%20stamp%20width%20to%20%5Bwidth%5D%20and%20height%20to%20%5Bheight%5D%22%2C%0A%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20width%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%2264%22%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20height%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%2264%22%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20opcode%3A%20%22getstampwidth%22%2C%0A%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20text%3A%20%22Stamp%20Width%22%2C%0A%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20opcode%3A%20%22getstampheight%22%2C%0A%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20text%3A%20%22Stamp%20Height%22%2C%0A%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20opcode%3A%20%22setstampcolor%22%2C%0A%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20text%3A%20%22Tint%20stamp%20by%20%5Bcolor%5D%20and%20transparency%5BT%5D(0-255)%22%2C%0A%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20color%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.COLOR%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'%23ffffff'%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20T%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'0'%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20opcode%3A%20%22offsetStamp%22%2C%0A%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20text%3A%20%22Set%20stamp%20anchorPoint%20to%20%5BAnchor%5D%22%2C%0A%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20Anchor%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22AnchorPointMenu%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%5B0%2C%200%5D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%5D%0A%20%20%7D%3B%0A%0A%20%20const%20TriangleBlocks%20%3D%20%7B%0A%20%20%20%20icon%3A%20%22data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAAGIAAABiCAYAAACrpQYOAAAAAXNSR0IArs4c6QAABGtJREFUeF7tncGxEzEMhpMZrhwogAYog2a4UAJHSuBCM5TxGqAADlyZgXGIg%2BPd9UqyJP82yuXNvHi9sj7%2FsiUnm%2BsF%2F%2FX7buIV31S5heiDyxDyCNHtFZNAHlgNYWkYqCAeEF5%2F%2BXAD8PPj13K2odq9nCIChBip7oU3EFkNueuVVYEo8Y0aMohX795efrz%2FtORaAQuiVkPyfgUi%2FQvRflFsQBvIoRoyiPS3UMUyMAKEaP7qXwQJ4s23z5dfL983o02hKb9WUwUSiEdYooCoQhTSOERyQRrADUSCkF5nilhtrUAB8aQGKoiVYAQIUSDRvwgBxEYNHEWsoooAoT%2B5RT3CgNjLpDkjmr0ONRpEM5PmgEhtZ4YBAaJXDStUZ0eCUFXD7DACBDf%2BGbUfDiJn0r3jKzPxGdeKUSB2c4ceGHVJpIAxaoys4Ywy8qmuxLL4oHEDxBRnFiNAqKvhKBOfKUQFCA05KvThDcJEDa3a1CwHSAFCYTZrdDEEhNaWtXRA6yBpBlV4gjALS5SyOTqMAKERVxT68AJhqgaKItAPkNxBaFVaJZMQOa9wBTESAnp11gOESblboogdGB7jJ5nqYcjuR%2BxJ1hk1QgxR1iDg1IAaotxAUJM4yif8NISClldYghBtWb1AoG1nA8Q%2FeVn64lTEljcXHf54KgJJFVYgRGGJmiGfTi9mA4T1IkCAfBXMAoRYDaMUgRCiAsQ9jI0OT2YgqHlDHc69F%2Bvy%2FiNhaIPoCksjQ1MGMuoL9SYgpGoAA5HM0fbP4X5O80bdakAAMWrhNgGBcO7ATCWemo%2BozqqDmB3CqOqsFgjYcreSMrT8ZL5GwB3%2B9AAYoQoN0kuqIcHwfCyRGYjyASYas5PSh0Uy6JXk9YJoPm2M4jzNNhYgvLazAYIwEzxUoQLi6LFvhDGqNrFShIcqekCQHvum6umTzixBWMPoBkF9yJUHkP8RBPtpYyuAsFSFVBEB4u%2FMkvpvMy%2BlHbEf%2B7aKIqxUIQEhfuybNQzrNaK0X%2FsASQyiPPzxdEALpqcd2rkFF8SydSWJWjXPLQKEhMD9mlEgQg070LRgcBQRIJBAHGXSHQqf9tJc6tdYuKmKUPmExpHHPXc7Z9SltvTCCBAVGWQQpmpIfpAO%2Fmx2S97vsaVHFRRFBIjidytacF1A9HyM8mxm9szCs7657%2FfaIoVxpghzNawUmjJ0SR2KBMJSDYuDIJfKWyBc1LAiCEmpPEAobV%2FrtYi7VhyBcFPDqorgqiJAGClCFYT1Ip190Ltl5G5RPQ%2BXqCFqTxFRZdUkS%2FyBkQCh7PS97ihnFjWIUIMRmDMYAcLI8XW3IhCrfA%2FOycfk27RglIpg5Q4oO53Z7DiqQ21AULesszmAPG2FDan%2BONrOZhAsNSBlw1QHCP1Lvoxjxx6MAEF2dbuhKghqWApFbKFwQOyVP5Ii2GEpQPSDqGBcA8SA0JRvWa4VTyBSA2p44kpRabybbma2owaRBvcIT1YOi37bHthN6MJp7h64%2FgHORJl%2BnCcCdQAAAABJRU5ErkJggg%3D%3D%22%2C%0A%20%20%20%20blocks%3A%20%5B%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20opcode%3A%20%22pendrawtexturedtrifromurl%22%2C%0A%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20text%3A%20%22Draw%20a%20triangle%20with%20points%20at(seperated%20by%20commas)%5Btrianglepoints%5D%20and%20the%20uvs%20of%20%5Btriangleuvs%5D%20with%20the%20image%20from%20url%3A%5Burl%5D%22%2C%0A%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20url%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20EXAMPLE_IMAGE%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20trianglepoints%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%220%2C0%2C10%2C10%2C0%2C10%22%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20triangleuvs%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%220%2C0%2C1%2C1%2C0%2C1%22%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20opcode%3A%20%22settripointcolour%22%2C%0A%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20text%3A%20%22Tint%20point%20%5Bpointmenu%5D%20by%20%5Bcolor%5D%20and%20transparency%5BT%5D(0-255)%22%2C%0A%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20pointmenu%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20'pointmenu'%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20color%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.COLOR%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'%23ffffff'%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20T%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'0'%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20opcode%3A%20%22setTriPointZ%22%2C%0A%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20text%3A%20%22Set%20point%20%5Bpointmenu%5D's%20depth%20to%20%5BZ%5D%22%2C%0A%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20pointmenu%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20'pointmenu'%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20Z%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'1'%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%5D%0A%20%20%7D%3B%0A%0A%20%20const%20LineBlocks%20%3D%20%7B%0A%20%20%20%20icon%3A%20%22data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAAE4AAABOCAYAAACOqiAdAAAAAXNSR0IArs4c6QAAAclJREFUeF7t3EFuxCAMBdDmCL1Sz9XlnGuu1CO0IjNIFIUEiAF%2F%2B7OIhORI6MU2ysbbB9eVwG8WsIX9%2FuAqCuRoMXAjXDlrdrTP5%2BNfxM%2FX974n3DHcIVoIJVxjpsVwwjVmGuE6My0t09Di2ONekMWelmdavBcI14HGW7UTzTtcc3mm7dFrqd5C85pxt9E8womgeYMTQ%2FMEJ4rmBU4czQPcEDTrcMPQLMMNRbMKNxzNItwUNGtw09AswU1FswI3Hc0C3BI0dLhlaMhwS9FQ4ZajIcKpQEODU4OGBKcKDQVOHRoCnEo07XBq0TTDqUbTCqceTSMcBJo2OBg0TXBQaFrg4NA0wEGirYaDRVsJB422Cg4ebQWcCbTZcGbQZsKZQpsFZw5tBpxJtNFwZtFGwplGGwVnHm0EnAs0aTg3aJJwrtCk4NyhScC5RLsL5xbtDpxrtF4492g9cEQLao0jgoj2RmuBI1qCVgtHtAytBo5oB2hXcEQroJ3BEe0ErQRHtAu0IziiVaDlcESrREvhiNaAFuGI1ohWBReHaTb%2BnnUcBeuVMAatmHFEK3%2FMIhzRzisgDt7bs67jlwyrvgRPm04szPG8TjOs4v0Dp6EsWljkur0AAAAASUVORK5CYII%3D%22%2C%0A%20%20%20%20blocks%3A%20%5B%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20opcode%3A%20%22drawLine%22%2C%0A%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20text%3A%20%22Draw%20a%20line%20from%3A%5Bx1%5D%5By1%5D%20to%3A%5Bx2%5D%5By2%5D%22%2C%0A%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20x1%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20y1%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20x2%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2025%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20y2%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2025%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20opcode%3A%20%22setLineWidth%22%2C%0A%20%20%20%20%20%20%20%20blockIconURI%3A%20LineStyleIcon%2C%0A%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20text%3A%20%22Set%20line%20the%3A%5Bpoint%5D%20point's%20width%20to%3A%5BWidth%5D%22%2C%0A%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20Width%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2010%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20point%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22All%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22linePointsmenu%22%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20opcode%3A%20%22setLineColor%22%2C%0A%20%20%20%20%20%20%20%20blockIconURI%3A%20LineStyleIcon%2C%0A%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20text%3A%20%22Set%20line%20color%20to%3A%5Bcolor%5D%20and%20transparency%20to%3A%5BAlpha%5D%22%2C%0A%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20color%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.COLOR%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'%23ffffff'%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20Alpha%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'255'%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%5D%0A%20%20%7D%3B%0A%0A%20%20const%20DepracatedBlocks%20%3D%20%7B%0A%20%20%20%20icon%3A%20%22data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAAE4AAABOCAYAAACOqiAdAAAAAXNSR0IArs4c6QAAAphJREFUeF7t20lywyAQBdB4lQvlFjlvbpELZZUUqqKMCFM3PXzA3liyLQTPH4Fk%2BfH2fPwmy2Hxka2fulp0iTj5mxHpdLyqS4C53nz%2F%2FLgl6ufr%2B3S8pksVLqgdjFdES02acIfiVdFIcIfhNdFyuLA%2BvMHGoy3JIB01SRtuNjchtz2fbpAL2ACQ1ebSPI1V0KKA7LbWJrjsAhcCnGpj68xgqmBwwOm29U6ppncACCjSph7cblMVETTKFRCxHTomULQNI4mLbRXdsTGgeN0pcKt2W3E0SldNA6JSEaUEqtWVmriVuq0aGjdxK%2BCpos3CoR7z1NEk4NDwTNCk4FDwzNAk4bzxTNGk4bzwzNE04KzxXNC04Kzw3NA04bTxXNG04bTw3NEs4KTxINCs4KTwYNAs4WbxoNCs4bh4cGgecFS860pMfgtavDwTnr3uqOJej0vrzlkeThEimlfiInQXr%2FWNeCUt1skrcVN43mjeiWPhIaChwA0NGJ4DQemQ4d1VSalDSRtK4kiDBAqed%2BJIaDGeCHiecCw0FDwvuC5aTNVrAvwcmobR4iaIeNaJo6Dd%2FmeGhmcJx0Ebnq5YDxhWcDNokHgWcBJocHjacJJoUHiacBpoMHhacJpoEHgacBZo7njScJZorniScB5obnhScJ5oLngScAho5nizcEhopngzcIhoZnhcOGQ0EzwO3Apo6nhUuJXQVPEocCuiqeGNwq2MpoI3ArcDmjheD24nNFG8FtyOaGJ4Nbid0UTwSnAnoE3j5XAnoU3hpXAnorHxoH8tL93Qp%2FgaKTgBjrSBYsURih626MJZ31oAoNfEix5NuAPRuse8LtzBaE28FC588Ipn4dE7JQPoWapVqLr8m44k1Tgd7Za83OUPGEk0ZW66HHQAAAAASUVORK5CYII%3D%22%2C%0A%20%20%20%20blocks%3A%20%5B%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20opcode%3A%20%22settargetsw%22%2C%0A%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20text%3A%20%22Change%20the%20target%20screen%20size%20to%20width%5Bwidth%5D%20and%20height%5Bheight%5D%22%2C%0A%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20width%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22480%22%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20height%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22360%22%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20opcode%3A%20%22gettargetstagewidth%22%2C%0A%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20text%3A%20%22Target%20Stage%20Width%22%2C%0A%20%20%20%20%20%20%20%20disableMonitor%3A%20true%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20opcode%3A%20%22gettargetstageheight%22%2C%0A%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20text%3A%20%22Target%20Stage%20Height%22%2C%0A%20%20%20%20%20%20%20%20disableMonitor%3A%20true%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20opcode%3A%20%22converttocanvascoords%22%2C%0A%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20text%3A%20%22Convert%20%5Bscrcoord%5D%20to%20%5BcoordTypes%5D%20units%20on%20the%20axis%20%5Bcoordmenu%5D%22%2C%0A%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20coordmenu%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20'coordMenu'%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20scrcoord%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'0'%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20coordTypes%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20'coordTypes'%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%5D%0A%20%20%7D%3B%0A%0A%20%20%2F%2FStamps%0A%0A%20%20class%20PenPlus%20%7B%0A%20%20%20%20getInfo()%20%7B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20id%3A%20%22betterpen%22%2C%0A%20%20%20%20%20%20%20%20name%3A%20%22Pen%2B%22%2C%0A%20%20%20%20%20%20%20%20color1%3A%20'%230e9a6b'%2C%0A%20%20%20%20%20%20%20%20color2%3A%20'%230b7f58'%2C%0A%20%20%20%20%20%20%20%20color3%3A%20'%23096647'%2C%0A%20%20%20%20%20%20%20%20docsURI%3A%20'https%3A%2F%2Fwww.youtube.com%2Fplaylist%3Flist%3DPLdR2VVCBIN3CceUdgKWOUxFEEbLqWgCC9'%2C%0A%20%20%20%20%20%20%20%20menuIconURI%3A%20%22data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSIzNy44NjkyMSIgaGVpZ2h0PSI0OC44NTI3MiIgdmlld0JveD0iMCwwLDM3Ljg2OTIxLDQ4Ljg1MjcyIj48ZGVmcz48cmFkaWFsR3JhZGllbnQgY3g9IjIzNy41NDM0IiBjeT0iMTg0LjAwNTYiIHI9IjkuOTg1NDkiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiBpZD0iY29sb3ItMSI%2BPHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZmZmZmZmIi8%2BPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjY2ZkNWU5Ii8%2BPC9yYWRpYWxHcmFkaWVudD48L2RlZnM%2BPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTIyMy4zMDE4MSwtMTYzLjc2MzA5KSI%2BPGcgZGF0YS1wYXBlci1kYXRhPSJ7JnF1b3Q7aXNQYWludGluZ0xheWVyJnF1b3Q7OnRydWV9IiBmaWxsLXJ1bGU9Im5vbnplcm8iIHN0cm9rZS1saW5lam9pbj0ibWl0ZXIiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLWRhc2hhcnJheT0iIiBzdHJva2UtZGFzaG9mZnNldD0iMCIgc3R5bGU9Im1peC1ibGVuZC1tb2RlOiBub3JtYWwiPjxwYXRoIGQ9Ik0yMjUuMTYzNTYsMTkzLjIwMDIxYzAuNTYxNTMsLTEuMTA3NDYgMi4yMzQwNCwtMy4yODU4MyAyLjIzNDA0LC0zLjI4NTgzYzAsMCAwLjU5NDQyLDEuODIzOTEgMS4yMjQ0OSwyLjU5NTc1YzAuNjMyMTIsMC43NzQzNSAyLjA4ODc4LDEuNDc0ODQgMi4wODg3OCwxLjQ3NDg0YzAsMCAtMi4xOTQ0NiwxLjI4MTQxIC0zLjMyNDIxLDEuNzI2OTVjLTEuMTEwMzIsMC40Mzc4NyAtMy4zOTcsMC45MjM2NyAtMy4zOTcsMC45MjM2N2MwLDAgMC41OTk3NCwtMi4zMDI5OSAxLjE3MzksLTMuNDM1Mzh6IiBmaWxsPSIjNGM5N2ZmIiBzdHJva2U9IiM1NzVlNzUiIHN0cm9rZS13aWR0aD0iMSIgc3Ryb2tlLWxpbmVjYXA9ImJ1dHQiLz48cGF0aCBkPSJNMjI3LjYxMTMxLDE4OS4yOTIwM2wxNC45NTE1NCwtMTUuMjcxOTNjMCwwIDIuMjA2LDAuODk1MDUgMi45NTc3NiwxLjYzMDQ3YzAuODY4OCwwLjg0OTkxIDEuOTU0ODksMy4xNzUzOCAxLjk1NDg5LDMuMTc1MzhsLTE2LjEyNjMxLDE1LjE2NTE0YzAsMCAtMi4wMDYzOSwtMS4xMjc4NiAtMi42MDkyMSwtMS44ODU2OGMtMC42NDA4MiwtMC44MDU2IC0xLjEyODY4LC0yLjgxMzM3IC0xLjEyODY4LC0yLjgxMzM3eiIgZmlsbD0idXJsKCNjb2xvci0xKSIgc3Ryb2tlPSIjNTc1ZTc1IiBzdHJva2Utd2lkdGg9IjEiIHN0cm9rZS1saW5lY2FwPSJidXR0Ii8%2BPHBhdGggZD0iTTIzNy43NTY5OSwxNzIuOTUyMTNjMCwwIDAuOTg2MTksMS4wNTA2MiAyLjM5NjA4LC0wLjI3MDcyYzEuODAzLC0xLjY4OTc3IDQuMjMxMDUsLTUuOTAxNDcgNS40NDc0MywtNi41ODcwN2MxLjM3NDgsLTAuNzc0ODkgMy45MDQxNCwwLjIzNjM5IDMuOTA0MTQsMC4yMzYzOSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNTc1ZTc1IiBzdHJva2Utd2lkdGg9IjEiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPjxwYXRoIGQ9Ik0yMzYuMDc5ODEsMTcyLjMxMTM1YzAsLTAuNjkwMzYgMC41NTk2NCwtMS4yNSAxLjI1LC0xLjI1YzAuNjkwMzYsMCAxLjI1LDAuNTU5NjQgMS4yNSwxLjI1YzAsMC42OTAzNiAtMC41NTk2NCwxLjI1IC0xLjI1LDEuMjVjLTAuNjkwMzYsMCAtMS4yNSwtMC41NTk2NCAtMS4yNSwtMS4yNXoiIGZpbGw9IiM1NzVlNzUiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIwLjUiIHN0cm9rZS1saW5lY2FwPSJidXR0Ii8%2BPHBhdGggZD0iTTI1MC45OTk3OSwxNjQuNzI4NzdjMCwwIDEuOTEzOTYsLTEuMDUxOTMgNC4yMDAwOSwxLjMyMzU4YzIuNDI2ODUsMi41MjE3MyAwLjYwNTc2LDQuNDQzNDQgMC42MDU3Niw0LjQ0MzQ0bC04LjMzMDE0LDguMjIzMzVjMCwwIC0wLjc1MDQsLTIuMDcxMTIgLTEuNTYyNDksLTIuNzk0OTRjLTAuODI1MjQsLTAuNzM1NTUgLTMuMzUwMTYsLTEuNTgzNzMgLTMuMzUwMTYsLTEuNTgzNzN6IiBmaWxsPSIjNGM5N2ZmIiBzdHJva2U9IiM1NzVlNzUiIHN0cm9rZS13aWR0aD0iMSIgc3Ryb2tlLWxpbmVjYXA9ImJ1dHQiLz48dGV4dCB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMzkuODkzMzcsMjAxLjcxMTE4KSBzY2FsZSgwLjg3MjM3LDAuODcyMzcpIiBmb250LXNpemU9IjQwIiB4bWw6c3BhY2U9InByZXNlcnZlIiBmaWxsPSIjZThlYmY0IiBmaWxsLXJ1bGU9Im5vbnplcm8iIHN0cm9rZT0iIzU3NWU3NSIgc3Ryb2tlLXdpZHRoPSIxIiBzdHJva2UtbGluZWNhcD0iYnV0dCIgc3Ryb2tlLWxpbmVqb2luPSJtaXRlciIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2UtZGFzaGFycmF5PSIiIHN0cm9rZS1kYXNob2Zmc2V0PSIwIiBmb250LWZhbWlseT0iU2FucyBTZXJpZiIgZm9udC13ZWlnaHQ9Im5vcm1hbCIgdGV4dC1hbmNob3I9InN0YXJ0IiBzdHlsZT0ibWl4LWJsZW5kLW1vZGU6IG5vcm1hbCI%2BPHRzcGFuIHg9IjAiIGR5PSIwIj4rPC90c3Bhbj48L3RleHQ%2BPC9nPjwvZz48L3N2Zz48IS0tcm90YXRpb25DZW50ZXI6MTYuNjk4MTkxNTI3MDE2NDYyOjE2LjIzNjkxNDk5OTk5OTk4Mi0tPg%3D%3D%22%2C%0A%20%20%20%20%20%20%20%20blocks%3A%20splitBlockCatagories(%5BUtilityBlocks%2C%20StampBlocks%2C%20TriangleBlocks%2C%20LineBlocks%2C%20DepracatedBlocks%5D)%2C%0A%20%20%20%20%20%20%20%20menus%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20coordMenu%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B'x'%2C%20'y'%5D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20coordTypes%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B'Canvas'%2C%20'Scratch'%5D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20pointmenu%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B'1'%2C%20'2'%2C%20'3'%5D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20TFmenu%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B'true'%2C%20%22false%22%5D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20AnchorPointMenu%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'Top%20Left'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%5B0%2C%200%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'Top'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%5B-0.5%2C%200%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'Top%20Right'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%5B-1%2C%200%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'Middle%20Left'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%5B0%2C%20-0.5%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'Middle'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%5B-0.5%2C%20-0.5%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'Middle%20Right'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%5B-1%2C%20-0.5%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'Bottom%20Left'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%5B0%2C%20-1%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'Bottom'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%5B-0.5%2C%20-1%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'Bottom%20Right'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%5B-1%2C%20-1%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20linePointsmenu%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B'All'%2C%20'Starting'%2C%20'Ending'%5D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20rgbtoSColor(%7B%20R%2C%20G%2C%20B%20%7D)%20%7B%0A%20%20%20%20%20%20R%20%3D%20Math.min(Math.max(R%2C%200)%2C%20255)%3B%0A%20%20%20%20%20%20G%20%3D%20Math.min(Math.max(G%2C%200)%2C%20255)%3B%0A%20%20%20%20%20%20B%20%3D%20Math.min(Math.max(B%2C%200)%2C%20255)%3B%0A%20%20%20%20%20%20return%20(((Math.floor(R)%20*%20256)%20%2B%20Math.floor(G))%20*%20256)%20%2B%20Math.floor(B)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20hsvtoSColor(%7B%20H%2C%20S%2C%20V%20%7D)%20%7B%0A%20%20%20%20%20%20%2F%2F%20Formula%20taken%20from%20https%3A%2F%2Fwww.rapidtables.com%2Fconvert%2Fcolor%2Fhsv-to-rgb.html%20and%20converted%20into%20javascipt%20by%20OAC%0A%20%20%20%20%20%20S%20%3D%20S%20%2F%20100%3B%0A%20%20%20%20%20%20V%20%3D%20V%20%2F%20100%3B%0A%20%20%20%20%20%20S%20%3D%20Math.min(Math.max(S%2C%200)%2C%201)%3B%0A%20%20%20%20%20%20V%20%3D%20Math.min(Math.max(V%2C%200)%2C%201)%3B%0A%20%20%20%20%20%20H%20%3D%20H%20%25%20360%3B%0A%20%20%20%20%20%20const%20C%20%3D%20V%20*%20S%3B%0A%20%20%20%20%20%20const%20X%20%3D%20C%20*%20(1%20-%20Math.abs((H%20%2F%2060)%20%25%202%20-%201))%3B%0A%20%20%20%20%20%20const%20M%20%3D%20V%20-%20C%3B%0A%20%20%20%20%20%20let%20Primes%20%3D%20%5B0%2C%200%2C%200%5D%3B%0A%20%20%20%20%20%20if%20(H%20%3E%3D%200%20%26%26%20H%20%3C%2060)%20%7B%0A%20%20%20%20%20%20%20%20Primes%5B0%5D%20%3D%20C%3B%0A%20%20%20%20%20%20%20%20Primes%5B1%5D%20%3D%20X%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(H%20%3E%3D%2060%20%26%26%20H%20%3C%20120)%20%7B%0A%20%20%20%20%20%20%20%20Primes%5B0%5D%20%3D%20X%3B%0A%20%20%20%20%20%20%20%20Primes%5B1%5D%20%3D%20C%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(H%20%3E%3D%20120%20%26%26%20H%20%3C%20180)%20%7B%0A%20%20%20%20%20%20%20%20Primes%5B1%5D%20%3D%20C%3B%0A%20%20%20%20%20%20%20%20Primes%5B2%5D%20%3D%20X%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(H%20%3E%3D%20180%20%26%26%20H%20%3C%20240)%20%7B%0A%20%20%20%20%20%20%20%20Primes%5B1%5D%20%3D%20X%3B%0A%20%20%20%20%20%20%20%20Primes%5B2%5D%20%3D%20C%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(H%20%3E%3D%20240%20%26%26%20H%20%3C%20300)%20%7B%0A%20%20%20%20%20%20%20%20Primes%5B0%5D%20%3D%20X%3B%0A%20%20%20%20%20%20%20%20Primes%5B2%5D%20%3D%20C%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(H%20%3E%3D%20300%20%26%26%20H%20%3C%20360)%20%7B%0A%20%20%20%20%20%20%20%20Primes%5B0%5D%20%3D%20C%3B%0A%20%20%20%20%20%20%20%20Primes%5B2%5D%20%3D%20X%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20Primes%5B0%5D%20%3D%20(Primes%5B0%5D%20%2B%20M)%20*%20255%3B%0A%20%20%20%20%20%20Primes%5B1%5D%20%3D%20(Primes%5B1%5D%20%2B%20M)%20*%20255%3B%0A%20%20%20%20%20%20Primes%5B2%5D%20%3D%20(Primes%5B2%5D%20%2B%20M)%20*%20255%3B%0A%20%20%20%20%20%20return%20this.rgbtoSColor(%7B%20R%3A%20Primes%5B0%5D%2C%20G%3A%20Primes%5B1%5D%2C%20B%3A%20Primes%5B2%5D%20%7D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getstampwidth(%7B%20%7D)%20%7B%0A%20%20%20%20%20%20return%20stampWidth%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getstampheight(%7B%20%7D)%20%7B%0A%20%20%20%20%20%20return%20stampHeight%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20converttocanvascoords(%7B%20coordmenu%2C%20scrcoord%2C%20coordTypes%20%7D)%20%7B%0A%20%20%20%20%20%20if%20(coordTypes%20%3D%3D%20'Canvas')%20%7B%0A%20%20%20%20%20%20%20%20if%20(coordmenu%20%3D%3D%20%22x%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20scrcoord%20%2B%20(runtime.stageWidth%20%2F%202)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20(scrcoord%20*%20-1)%20%2B%20(runtime.stageHeight%20%2F%202)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20if%20(coordmenu%20%3D%3D%20%22x%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20scrcoord%20-%20(runtime.stageWidth%20%2F%202)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20(scrcoord%20*%20-1)%20-%20(runtime.stageHeight%20%2F%202)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20offsetStamp(%7B%20Anchor%20%7D)%20%7B%0A%20%20%20%20%20%20stampOffset%20%3D%20Anchor.split(%22%2C%22)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setCoordSpace(%7B%20space%20%7D)%20%7B%0A%20%20%20%20%20%20coordinateSpace%20%3D%20space%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20SolidColorRet()%20%7B%0A%20%20%20%20%20%20return%20blankImage%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getstamprotation(%7B%20%7D)%20%7B%0A%20%20%20%20%20%20return%20stampRotation%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20rotateStamp(%7B%20ANGLE%20%7D)%20%7B%0A%20%20%20%20%20%20stampRotation%20%3D%20ANGLE%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20pendrawspritefromurl(%7B%20url%2C%20x%2C%20y%20%7D)%20%7B%0A%20%20%20%20%20%20var%20scaleMultiplier%20%3D%20canvas.width%20%2F%20runtime.stageWidth%3B%0A%20%20%20%20%20%20if%20(!textures.hasOwnProperty(url))%20%7B%0A%20%20%20%20%20%20%20%20textures%5Burl%5D%20%3D%20loadImageAndCreateTextureInfo(url%2C%20true)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20drawImage(textures%5Burl%5D.texture%2C%20stampWidth%20*%20scaleMultiplier%2C%20stampHeight%20*%20scaleMultiplier%2C%20(x)%20*%20scaleMultiplier%2C%20(y)%20*%20scaleMultiplier%2C%20stampRotation%20-%2090)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setLineWidth(%7B%20Width%2C%20point%20%7D)%20%7B%0A%20%20%20%20%20%20if%20(point%20%3D%3D%3D%20'All')%20%7B%0A%20%20%20%20%20%20%20%20lineWidth%20%3D%20%5BWidth%2C%20Width%5D%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(point%20%3D%3D%3D%20'Starting')%20%7B%0A%20%20%20%20%20%20%20%20lineWidth%5B0%5D%20%3D%20Width%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20lineWidth%5B1%5D%20%3D%20Width%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%7D%0A%0A%20%20%20%20drawLine(%7B%20x1%2C%20y1%2C%20x2%2C%20y2%20%7D)%20%7B%0A%20%20%20%20%20%20var%20scalemultiplyer%20%3D%20canvas.width%20%2F%20runtime.stageWidth%3B%0A%20%20%20%20%20%20let%20tempColors%20%3D%20triangleColors%3B%0A%20%20%20%20%20%20triangleColors%20%3D%20%5B%0A%20%20%20%20%20%20%20%20lineColor.r%2C%20lineColor.g%2C%20lineColor.b%2C%20lineColor.a%2C%0A%20%20%20%20%20%20%20%20lineColor.r%2C%20lineColor.g%2C%20lineColor.b%2C%20lineColor.a%2C%0A%20%20%20%20%20%20%20%20lineColor.r%2C%20lineColor.g%2C%20lineColor.b%2C%20lineColor.a%0A%20%20%20%20%20%20%5D%3B%0A%20%20%20%20%20%20let%20vectorLength%20%3D%20Math.sqrt(Math.pow(x2%20-%20x1%2C%202)%20%2B%20Math.pow(y2%20-%20y1%2C%202))%3B%0A%20%20%20%20%20%20let%20vectorDir%20%3D%20%7B%20X%3A%20(x2%20-%20x1)%20%2F%20vectorLength%2C%20Y%3A%20(y2%20-%20y1)%20%2F%20vectorLength%20%7D%3B%0A%20%20%20%20%20%20let%20triangleDir%20%3D%20%7B%20X1%3A%20-vectorDir.Y%20*%20lineWidth%5B0%5D%2C%20Y1%3A%20vectorDir.X%20*%20lineWidth%5B0%5D%2C%20X2%3A%20-vectorDir.Y%20*%20lineWidth%5B1%5D%2C%20Y2%3A%20vectorDir.X%20*%20lineWidth%5B1%5D%20%7D%3B%0A%0A%20%20%20%20%20%20if%20(!textures.hasOwnProperty(blankImage))%20%7B%0A%20%20%20%20%20%20%20%20textures%5BblankImage%5D%20%3D%20loadImageAndCreateTextureInfo(blankImage%2C%20true)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20drawTexturedTri(textures%5BblankImage%5D.texture%2C%20%5B%0A%20%20%20%20%20%20%20%20(x1%20%2B%20triangleDir.X1)%20*%20scalemultiplyer%2C%0A%20%20%20%20%20%20%20%20(y1%20%2B%20triangleDir.Y1)%20*%20scalemultiplyer%2C%0A%20%20%20%20%20%20%20%20(x1%20-%20triangleDir.X1)%20*%20scalemultiplyer%2C%0A%20%20%20%20%20%20%20%20(y1%20-%20triangleDir.Y1)%20*%20scalemultiplyer%2C%0A%20%20%20%20%20%20%20%20(x2%20%2B%20triangleDir.X2)%20*%20scalemultiplyer%2C%0A%20%20%20%20%20%20%20%20(y2%20%2B%20triangleDir.Y2)%20*%20scalemultiplyer%5D%2C%20%5B0.5%2C%200.5%2C%200.5%2C%200.6%2C%200.6%2C%200.6%5D%0A%20%20%20%20%20%20)%3B%0A%0A%20%20%20%20%20%20drawTexturedTri(textures%5BblankImage%5D.texture%2C%20%5B%0A%20%20%20%20%20%20%20%20(x1%20-%20triangleDir.X1)%20*%20scalemultiplyer%2C%0A%20%20%20%20%20%20%20%20(y1%20-%20triangleDir.Y1)%20*%20scalemultiplyer%2C%0A%20%20%20%20%20%20%20%20(x2%20-%20triangleDir.X2)%20*%20scalemultiplyer%2C%0A%20%20%20%20%20%20%20%20(y2%20-%20triangleDir.Y2)%20*%20scalemultiplyer%2C%0A%20%20%20%20%20%20%20%20(x2%20%2B%20triangleDir.X2)%20*%20scalemultiplyer%2C%0A%20%20%20%20%20%20%20%20(y2%20%2B%20triangleDir.Y2)%20*%20scalemultiplyer%5D%2C%20%5B0.5%2C%200.5%2C%200.5%2C%200.6%2C%200.6%2C%200.6%5D%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20triangleColors%20%3D%20tempColors%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20gettargetstagewidth(%7B%20%7D)%20%7B%0A%20%20%20%20%20%20return%20screenWidth%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20gettargetstageheight(%7B%20%7D)%20%7B%0A%20%20%20%20%20%20return%20screenHeight%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20pendrawtexturedtrifromurl(%7B%20url%2C%20trianglepoints%2C%20triangleuvs%20%7D)%20%7B%0A%20%20%20%20%20%20var%20scalemultiplyer%20%3D%20canvas.width%20%2F%20runtime.stageWidth%3B%0A%20%20%20%20%20%20if%20(!textures.hasOwnProperty(url))%20%7B%0A%20%20%20%20%20%20%20%20textures%5Burl%5D%20%3D%20loadImageAndCreateTextureInfo(url%2C%20true)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20pointsarray%20%3D%20trianglepoints.split(%22%2C%22)%3B%0A%20%20%20%20%20%20var%20pointslen%20%3D%20pointsarray.length%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20pointslen%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20pointsarray%5Bi%5D%20%3D%20pointsarray%5Bi%5D%20*%20scalemultiplyer%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20uvarray%20%3D%20triangleuvs.split(%22%2C%22)%3B%0A%20%20%20%20%20%20drawTexturedTri(textures%5Burl%5D.texture%2C%20pointsarray%2C%20uvarray)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20precachetextures(%7B%20uri%2C%20clamp%20%7D)%20%7B%0A%20%20%20%20%20%20coolcash(uri%2C%20clamp%20%3D%3D%3D%20'true')%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setpenstrechandsquash(%7B%20width%2C%20height%20%7D)%20%7B%0A%20%20%20%20%20%20stampWidth%20%3D%20width%3B%0A%20%20%20%20%20%20stampHeight%20%3D%20height%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20settargetsw(%7B%20width%2C%20height%20%7D)%20%7B%0A%20%20%20%20%20%20screenWidth%20%3D%20width%3B%0A%20%20%20%20%20%20screenHeight%20%3D%20height%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getcostumedata(%7B%20costu%20%7D%2C%20util)%20%7B%0A%20%20%20%20%20%20let%20fileData%20%3D%20getspritecostume(util%2C%20costu)%3B%0A%20%20%20%20%20%20return%20fileData%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20coordBlock(%7B%20c1%2C%20c2%2C%20c3%2C%20c4%2C%20c5%2C%20c6%20%7D)%20%7B%0A%20%20%20%20%20%20return%20c1%20%2B%20%22%2C%22%20%2B%20c2%20%2B%20%22%2C%22%20%2B%20c3%20%2B%20%22%2C%22%20%2B%20c4%20%2B%20%22%2C%22%20%2B%20c5%20%2B%20%22%2C%22%20%2B%20c6%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20settripointcolour(%7B%20pointmenu%2C%20color%2C%20T%20%7D)%20%7B%0A%20%20%20%20%20%20if%20(pointmenu%20%3D%3D%20%221%22)%20%7B%0A%20%20%20%20%20%20%20%20triangleColors%5B0%5D%20%3D%20hexToRgb(color).r%20%2F%20255%3B%0A%20%20%20%20%20%20%20%20triangleColors%5B1%5D%20%3D%20hexToRgb(color).g%20%2F%20255%3B%0A%20%20%20%20%20%20%20%20triangleColors%5B2%5D%20%3D%20hexToRgb(color).b%20%2F%20255%3B%0A%20%20%20%20%20%20%20%20triangleColors%5B3%5D%20%3D%20T%20%2F%20255%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(pointmenu%20%3D%3D%20%222%22)%20%7B%0A%20%20%20%20%20%20%20%20triangleColors%5B4%5D%20%3D%20hexToRgb(color).r%20%2F%20255%3B%0A%20%20%20%20%20%20%20%20triangleColors%5B5%5D%20%3D%20hexToRgb(color).g%20%2F%20255%3B%0A%20%20%20%20%20%20%20%20triangleColors%5B6%5D%20%3D%20hexToRgb(color).b%20%2F%20255%3B%0A%20%20%20%20%20%20%20%20triangleColors%5B7%5D%20%3D%20T%20%2F%20255%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20triangleColors%5B8%5D%20%3D%20hexToRgb(color).r%20%2F%20255%3B%0A%20%20%20%20%20%20%20%20triangleColors%5B9%5D%20%3D%20hexToRgb(color).g%20%2F%20255%3B%0A%20%20%20%20%20%20%20%20triangleColors%5B10%5D%20%3D%20hexToRgb(color).b%20%2F%20255%3B%0A%20%20%20%20%20%20%20%20triangleColors%5B11%5D%20%3D%20T%20%2F%20255%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20setLineColor(%7B%20color%2C%20Alpha%20%7D)%20%7B%0A%20%20%20%20%20%20lineColor.r%20%3D%20hexToRgb(color).r%20%2F%20255%3B%0A%20%20%20%20%20%20lineColor.g%20%3D%20hexToRgb(color).g%20%2F%20255%3B%0A%20%20%20%20%20%20lineColor.b%20%3D%20hexToRgb(color).b%20%2F%20255%3B%0A%20%20%20%20%20%20lineColor.a%20%3D%20Alpha%20%2F%20255%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setTriPointZ(%7B%20pointmenu%2C%20Z%20%7D)%20%7B%0A%20%20%20%20%20%20if%20(pointmenu%20%3D%3D%20%221%22)%20%7B%0A%20%20%20%20%20%20%20%20TriangleZPositionArray%5B0%5D%20%3D%20Z%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(pointmenu%20%3D%3D%20%222%22)%20%7B%0A%20%20%20%20%20%20%20%20TriangleZPositionArray%5B1%5D%20%3D%20Z%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20TriangleZPositionArray%5B2%5D%20%3D%20Z%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20setstampcolor(%7B%20color%2C%20T%20%7D)%20%7B%0A%20%20%20%20%20%20let%20convertr%20%3D%20hexToRgb(color).r%20%2F%20255%3B%0A%20%20%20%20%20%20let%20convertg%20%3D%20hexToRgb(color).g%20%2F%20255%3B%0A%20%20%20%20%20%20let%20convertb%20%3D%20hexToRgb(color).b%20%2F%20255%3B%0A%20%20%20%20%20%20let%20converta%20%3D%20T%20%2F%20255%3B%0A%20%20%20%20%20%20quadColors%5B0%5D%20%3D%20convertr%3B%0A%20%20%20%20%20%20quadColors%5B1%5D%20%3D%20convertg%3B%0A%20%20%20%20%20%20quadColors%5B2%5D%20%3D%20convertb%3B%0A%20%20%20%20%20%20quadColors%5B3%5D%20%3D%20converta%3B%0A%20%20%20%20%20%20quadColors%5B4%5D%20%3D%20convertr%3B%0A%20%20%20%20%20%20quadColors%5B5%5D%20%3D%20convertg%3B%0A%20%20%20%20%20%20quadColors%5B6%5D%20%3D%20convertb%3B%0A%20%20%20%20%20%20quadColors%5B7%5D%20%3D%20converta%3B%0A%20%20%20%20%20%20quadColors%5B8%5D%20%3D%20convertr%3B%0A%20%20%20%20%20%20quadColors%5B9%5D%20%3D%20convertg%3B%0A%20%20%20%20%20%20quadColors%5B10%5D%20%3D%20convertb%3B%0A%20%20%20%20%20%20quadColors%5B11%5D%20%3D%20converta%3B%0A%20%20%20%20%20%20quadColors%5B12%5D%20%3D%20convertr%3B%0A%20%20%20%20%20%20quadColors%5B13%5D%20%3D%20convertg%3B%0A%20%20%20%20%20%20quadColors%5B14%5D%20%3D%20convertb%3B%0A%20%20%20%20%20%20quadColors%5B15%5D%20%3D%20converta%3B%0A%20%20%20%20%20%20quadColors%5B16%5D%20%3D%20convertr%3B%0A%20%20%20%20%20%20quadColors%5B17%5D%20%3D%20convertg%3B%0A%20%20%20%20%20%20quadColors%5B18%5D%20%3D%20convertb%3B%0A%20%20%20%20%20%20quadColors%5B19%5D%20%3D%20converta%3B%0A%20%20%20%20%20%20quadColors%5B20%5D%20%3D%20convertr%3B%0A%20%20%20%20%20%20quadColors%5B21%5D%20%3D%20convertg%3B%0A%20%20%20%20%20%20quadColors%5B22%5D%20%3D%20convertb%3B%0A%20%20%20%20%20%20quadColors%5B23%5D%20%3D%20converta%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20Scratch.extensions.register(new%20PenPlus())%3B%0A%7D)(window.Scratch)%3B%20%2F%2F%20use%20window.Scratch%20so%20it%20doesn't%20throw%20error%20in%20plugin%20loaders%0A%20%7D)(Scratch)%3B"]) {
        vm.extensionManager.loadExtensionURL(extension);
      }

    } catch (e) {
      handleError(e);
    }
  </script>
  
  
    <script>
      const getProjectData = (function() {
        const storage = scaffolding.storage;
        storage.onprogress = (total, loaded) => {
          setProgress(interpolate(0.2, 0.98, loaded / total));
        };
        
        storage.addWebStore(
          [storage.AssetType.ImageVector, storage.AssetType.ImageBitmap, storage.AssetType.Sound],
          (asset) => new URL('./assets/' + asset.assetId + '.' + asset.dataFormat, location).href
        );
        return () => new Promise((resolve, reject) => {
        const xhr = new XMLHttpRequest();
        xhr.onload = () => {
          resolve(xhr.response);
        };
        xhr.onerror = () => {
          if (location.protocol === 'file:') {
            reject(new Error('Zip environment must be used from a website, not from a file URL.'));
          } else {
            reject(new Error('Request to load project data failed.'));
          }
        };
        xhr.onprogress = (e) => {
          if (e.lengthComputable) {
            setProgress(interpolate(0.1, 0.2, e.loaded / e.total));
          }
        };
        xhr.responseType = 'arraybuffer';
        xhr.open('GET', "./assets/project.json");
        xhr.send();
      });
      })();
    </script>
  <script>
    const run = async () => {
      const projectData = await getProjectData();
      await scaffolding.loadProject(projectData);
      setProgress(1);
      loadingScreen.hidden = true;
      if (true) {
        scaffolding.start();
      } else {
        launchScreen.hidden = false;
        launchScreen.addEventListener('click', () => {
          launchScreen.hidden = true;
          scaffolding.start();
        });
        launchScreen.focus();
      }
    };
    run().catch(handleError);
  </script>
</body>
</html>
